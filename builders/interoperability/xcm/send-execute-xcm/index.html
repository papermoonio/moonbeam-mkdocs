<!doctype html><html lang="en" class="no-js"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Build a custom XCM message, verify its construction and integrity using the XCM Dry Run API, and then execute it locally on Moonbeam to observe the results."><link rel="canonical" href="https://docs.moonbeam.network/builders/interoperability/xcm/send-execute-xcm/"><link rel="prev" href="../remote-execution/remote-evm-calls/"><link rel="next" href="../xcm-utils/"><link rel="icon" href="../../../../assets/images/favicon.webp"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Send, Execute and Test XCM Messages | Moonbeam Docs</title><link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js" as="script"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Banana+Grotesk:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Banana Grotesk";--md-code-font:"Roboto Mono"}</style><link rel="preconnect" href="https://fonts.googleapis.com"><link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel="stylesheet"><link rel="stylesheet" href="../../../../assets/stylesheets/moonbeam.min.css"><link rel="stylesheet" href="../../../../assets/stylesheets/termynal.min.css"><link rel="stylesheet" href="../../../../assets/stylesheets/timeline-neoteroi.min.css"><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-5ZBERCXWC3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-5ZBERCXWC3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-5ZBERCXWC3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src="../../../../assets/javascripts/glightbox.min.js"></script></head> <body dir="ltr"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#send-execute-and-test-xcm-messages" class="md-skip"> Skip to content </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="header.title"> <div class="md-header__left-nav"> <a href="https://docs.moonbeam.network/" title="Moonbeam Docs" class="md-header__button md-logo" aria-label="Moonbeam Docs"> <img src="../../../../assets/images/logo.webp" alt="logo"> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> </div> <div class="md-header__buttons"> <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../">Builders</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../get-started/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/get-started.webp" alt="Get Started" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Get Started</span> <p class="dropdown-desc">Everything you need to get started building</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../ethereum/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/ethereum.webp" alt="Ethereum Toolkit" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Ethereum Toolkit</span> <p class="dropdown-desc">Ethereum libraries, tools, and contracts</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../substrate/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/substrate.webp" alt="Substrate Toolkit" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Substrate Toolkit</span> <p class="dropdown-desc">Substrate libraries, tools, and low-level interfaces</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/interoperability.webp" alt="Interoperability" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Interoperability</span> <p class="dropdown-desc">GMP protocols for cross-chain development</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../integrations/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/integrations.webp" alt="Integrate" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Integrate</span> <p class="dropdown-desc">Tools and protocols to integrate with</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../node-operators/">Node Operators</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../node-operators/networks/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/networks.webp" alt="Networks" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Networks</span> <p class="dropdown-desc">Run full, tracing, or collator nodes</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../tokens/">Tokens</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../tokens/connect/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/connect.webp" alt="Connect to Moonbeam" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Connect to Moonbeam</span> <p class="dropdown-desc">Connect your wallet to Moonbeam</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../tokens/manage/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/manage.webp" alt="Account Management" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Account Management</span> <p class="dropdown-desc">Advanced account and identity services</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../tokens/staking/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/staking.webp" alt="Staking" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Staking</span> <p class="dropdown-desc">Stake tokens by delegating to collators</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../tokens/governance/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/governance.webp" alt="Governance" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Governance</span> <p class="dropdown-desc">Submit and vote on on-chain proposals</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../learn/">Learn</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../learn/core-concepts/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/core-concepts.webp" alt="Core Concepts" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Core Concepts</span> <p class="dropdown-desc">Learn about the fundamentals of Moonbeam</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../learn/features/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/features.webp" alt="Features" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Features</span> <p class="dropdown-desc">Explore core features</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../learn/dapp-directory/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/dapp-directory.webp" alt="DApp Directory" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">DApp Directory</span> <p class="dropdown-desc">Explore the DApp Directory and listing process</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../tutorials/">Tutorials</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../tutorials/eth-api/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/eth-api.webp" alt="Ethereum API" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Ethereum API</span> <p class="dropdown-desc">Beginner to pro smart contract tutorials</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../tutorials/integrations/"> <div class="icon-col"> <img class="dropdown-icon" src="assets/images/dropdown-icons/integrations.webp" alt="Integrations" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Integrations</span> <p class="dropdown-desc">Dive deeper with tutorials on seamless integrations</p> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class="language-select-wrapper select-wrapper"> <span class="language-select-label select-label">Eng</span> <ul class="language-select select"> <li class="en" value="en"><a href="#">Eng</a></li> <li class="cn" value="cn"><a href>中文</a></li> </ul> <span class="md-icon selector-closed active"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6z"/></svg></span> <span class="md-icon selector-open"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg></span> </div> <a href="#" class="md-header__button md-button connectMetaMask-nav md-typeset"> Connect Wallet </a> <a class="md-header__button md-button faucet md-typeset" href="https://faucet.moonbeam.network/" target="_blank"> Faucet </a> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class="md-search__options" aria-label="Search"> <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../../.." title="Moonbeam Docs" class="md-nav__button md-logo" aria-label="Moonbeam Docs" data-md-component="logo"> <img src="../../../../assets/images/logo.webp" alt="logo"> </a> </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../.." class="md-nav__link"> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../../">Builders</a> <label for="__nav_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../get-started/">Get Started</a> <label for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../get-started/quick-start/" class="md-nav__link"> Quick Start </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../get-started/networks/">Networks</a> <label for="__nav_2_2_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_2_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-networks-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../get-started/networks/moonbeam-dev/" class="md-nav__link"> Local Moonbeam Dev Node </a> </li> <li class="md-nav__item"> <a href="../../../get-started/networks/moonbase/" class="md-nav__link"> Moonbase Alpha </a> </li> <li class="md-nav__item"> <a href="../../../get-started/networks/moonriver/" class="md-nav__link"> Moonriver </a> </li> <li class="md-nav__item"> <a href="../../../get-started/networks/moonbeam/" class="md-nav__link"> Moonbeam </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../get-started/endpoints/" class="md-nav__link"> Network RPC Endpoints </a> </li> <li class="md-nav__item"> <a href="../../../get-started/explorers/" class="md-nav__link"> Block Explorers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/">Ethereum Toolkit</a> <label for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/canonical-contracts/" class="md-nav__link"> Canonical Contracts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/precompiles/">Precompiled Contracts</a> <label for="__nav_2_3_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/overview/" class="md-nav__link"> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/precompiles/account/">Account Management</a> <label for="__nav_2_3_3_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_3_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-account-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/account/identity/" class="md-nav__link"> Identity </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/account/proxy/" class="md-nav__link"> Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/precompiles/ux/">User Experience</a> <label for="__nav_2_3_3_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_3_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-ux-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/ux/batch/" class="md-nav__link"> Batch </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/ux/call-permit/" class="md-nav__link"> Call Permit </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/ux/erc20/" class="md-nav__link"> Native Token ERC-20 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/precompiles/features/">Network Features</a> <label for="__nav_2_3_3_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_3_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/precompiles/features/governance/">Governance</a> <label for="__nav_2_3_3_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_3_3_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_3_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-governance-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/features/governance/collective/" class="md-nav__link"> Collective </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/features/governance/conviction-voting/" class="md-nav__link"> Conviction Voting </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/features/governance/preimage/" class="md-nav__link"> Preimage </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/features/governance/referenda/" class="md-nav__link"> Referenda </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/features/randomness/" class="md-nav__link"> Randomness </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/features/staking/" class="md-nav__link"> Staking Functions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/precompiles/interoperability/">Interoperability</a> <label for="__nav_2_3_3_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_3_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-interoperability-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/interoperability/gmp/" class="md-nav__link"> GMP </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/" class="md-nav__link"> X-Tokens </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xc20/send-xc20s/eth-api/" class="md-nav__link"> XCM Interface </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/" class="md-nav__link"> XCM Transactor </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xcm-utils/" class="md-nav__link"> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/precompiles/utility/">Utility</a> <label for="__nav_2_3_3_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_3_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_3_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-utility-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/utility/eth-mainnet/" class="md-nav__link"> Ethereum Native </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/utility/registry/" class="md-nav__link"> Precompile Registry </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/utility/relay-data-verifier/" class="md-nav__link"> Relay Data Verifier </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/precompiles/utility/non-specific/" class="md-nav__link"> Non-Network Specific </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/libraries/">Libraries</a> <label for="__nav_2_3_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-libraries-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/libraries/ethersjs/" class="md-nav__link"> Ethers.js </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/libraries/viem/" class="md-nav__link"> viem </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/libraries/web3py/" class="md-nav__link"> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/dev-env/">Dev Environments</a> <label for="__nav_2_3_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-dev-env-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/dev-env/foundry/" class="md-nav__link"> Foundry </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/dev-env/hardhat/" class="md-nav__link"> Hardhat </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/dev-env/remix/" class="md-nav__link"> Remix </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/dev-env/tenderly/" class="md-nav__link"> Tenderly </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/verify-contracts/">Verify Contracts</a> <label for="__nav_2_3_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-verify-contracts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/verify-contracts/block-explorers/" class="md-nav__link"> Block Explorers </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/verify-contracts/etherscan-plugins/" class="md-nav__link"> Etherscan Plugins </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/verify-contracts/api-verification/" class="md-nav__link"> API-based Verification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../../ethereum/json-rpc/">JSON-RPC APIs</a> <label for="__nav_2_3_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-json-rpc-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../ethereum/json-rpc/eth-rpc/" class="md-nav__link"> Standard Ethereum </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/json-rpc/debug-trace/" class="md-nav__link"> Non-standard Ethereum: Tracing </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/json-rpc/pubsub/" class="md-nav__link"> Non-standard Ethereum: Pubsub </a> </li> <li class="md-nav__item"> <a href="../../../ethereum/json-rpc/moonbeam-custom-api/" class="md-nav__link"> Custom Moonbeam </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../substrate/">Substrate Toolkit</a> <label for="__nav_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../substrate/libraries/">Libraries</a> <label for="__nav_2_4_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-libraries-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../substrate/libraries/polkadot-js-api/" class="md-nav__link"> Polkadot.js API </a> </li> <li class="md-nav__item"> <a href="../../../substrate/libraries/py-substrate-interface/" class="md-nav__link"> Py Substrate Interface </a> </li> <li class="md-nav__item"> <a href="../../../substrate/libraries/sidecar/" class="md-nav__link"> Sidecar </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../substrate/dev-env/">Dev Environments</a> <label for="__nav_2_4_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-dev-env-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../substrate/dev-env/chopsticks/" class="md-nav__link"> Chopsticks </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../">Interoperability</a> <label for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2" checked> <div class="md-nav__link md-nav__link--index "> <a href="../">XCM Interoperability</a> <label for="__nav_2_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-" data-md-scrollfix> <li class="md-nav__item"> <a href="../overview/" class="md-nav__link"> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_3"> <div class="md-nav__link md-nav__link--index "> <a href="../core-concepts/">Core Concepts</a> <label for="__nav_2_5_2_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-core-concepts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../core-concepts/instructions/" class="md-nav__link"> XCM Instructions </a> </li> <li class="md-nav__item"> <a href="../core-concepts/multilocations/" class="md-nav__link"> Multilocations </a> </li> <li class="md-nav__item"> <a href="../core-concepts/weights-fees/" class="md-nav__link"> Weights and Fees </a> </li> <li class="md-nav__item"> <a href="../core-concepts/sovereign-accounts/" class="md-nav__link"> Sovereign Accounts </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../xc-registration/">XC Registration</a> <label for="__nav_2_5_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc-registration-" data-md-scrollfix> <li class="md-nav__item"> <a href="../xc-registration/forum-templates/" class="md-nav__link"> Forum Templates </a> </li> <li class="md-nav__item"> <a href="../xc-registration/xc-integration/" class="md-nav__link"> XC Channel Registration </a> </li> <li class="md-nav__item"> <a href="../xc-registration/assets/" class="md-nav__link"> XC Asset Registration via Governance </a> </li> <li class="md-nav__item"> <a href="../xc-registration/self-serve-asset-registration/" class="md-nav__link"> Self-Serve Asset Registration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_5"> <div class="md-nav__link md-nav__link--index "> <a href="../xc20/">XC-20s</a> <label for="__nav_2_5_2_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_2_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-" data-md-scrollfix> <li class="md-nav__item"> <a href="../xc20/overview/" class="md-nav__link"> Overview </a> </li> <li class="md-nav__item"> <a href="../xc20/interact/" class="md-nav__link"> Interact with XC-20s </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_5_4"> <div class="md-nav__link md-nav__link--index "> <a href="../xc20/send-xc20s/">Send XC-20s</a> <label for="__nav_2_5_2_5_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_5_2_5_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2_5_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-send-xc20s-" data-md-scrollfix> <li class="md-nav__item"> <a href="../xc20/send-xc20s/overview/" class="md-nav__link"> Overview </a> </li> <li class="md-nav__item"> <a href="../xc20/send-xc20s/xcm-pallet/" class="md-nav__link"> Using the Substrate API: Polkadot XCM Pallet </a> </li> <li class="md-nav__item"> <a href="../xc20/send-xc20s/xtokens-precompile/" class="md-nav__link"> Using the Ethereum API: X-Tokens Precompile </a> </li> <li class="md-nav__item"> <a href="../xc20/send-xc20s/eth-api/" class="md-nav__link"> Using the Ethereum API: XCM Precompile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_6"> <div class="md-nav__link md-nav__link--index "> <a href="../remote-execution/">Remote Execution</a> <label for="__nav_2_5_2_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_5_2_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-" data-md-scrollfix> <li class="md-nav__item"> <a href="../remote-execution/overview/" class="md-nav__link"> Overview </a> </li> <li class="md-nav__item"> <a href="../remote-execution/computed-origins/" class="md-nav__link"> Computed Origin Accounts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2_6_4"> <div class="md-nav__link md-nav__link--index "> <a href="../remote-execution/substrate-calls/">Remote Substrate Calls</a> <label for="__nav_2_5_2_6_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_5_2_6_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2_6_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-substrate-calls-" data-md-scrollfix> <li class="md-nav__item"> <a href="../remote-execution/substrate-calls/xcm-transactor-pallet/" class="md-nav__link"> Using the Substrate API </a> </li> <li class="md-nav__item"> <a href="../remote-execution/substrate-calls/xcm-transactor-precompile/" class="md-nav__link"> Using the Ethereum API </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../remote-execution/remote-evm-calls/" class="md-nav__link"> Remote EVM Calls </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="https://moonbeam-foundation.github.io/xcm-sdk/latest/" class="md-nav__link"> XCM SDK </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> Send, Execute, & Test XCMs <span class="md-nav__icon md-icon"></span> </label> <div class="md-nav__link-wrapper md-nav__item md-nav__item--active"> <a href="./" class="md-nav__link md-nav__link--active"> Send, Execute, & Test XCMs </a> </div> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> <div class="toc-sections-title">Sections</div> </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#introduction" class="md-nav__link"> <span class="md-ellipsis"> Introduction </span> </a> </li> <li class="md-nav__item"> <a href="#polkadot-xcm-pallet-interface" class="md-nav__link"> <span class="md-ellipsis"> Polkadot XCM Pallet Interface </span> </a> <nav class="md-nav" aria-label="Polkadot XCM Pallet Interface"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#extrinsics" class="md-nav__link"> <span class="md-ellipsis"> Extrinsics </span> </a> </li> <li class="md-nav__item"> <a href="#storage-methods" class="md-nav__link"> <span class="md-ellipsis"> Storage Methods </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#checking-prerequisites" class="md-nav__link"> <span class="md-ellipsis"> Checking Prerequisites </span> </a> </li> <li class="md-nav__item"> <a href="#execute-an-xcm-message-locally" class="md-nav__link"> <span class="md-ellipsis"> Execute an XCM Message Locally </span> </a> <nav class="md-nav" aria-label="Execute an XCM Message Locally"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#execute-an-xcm-message-with-polkadotjs-api" class="md-nav__link"> <span class="md-ellipsis"> Execute an XCM Message with the Polkadot.js API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#test-an-xcm-message-with-the-dry-run-api" class="md-nav__link"> <span class="md-ellipsis"> Test an XCM Message with the Dry Run API </span> </a> <nav class="md-nav" aria-label="Test an XCM Message with the Dry Run API"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#dry-run-call-api-method" class="md-nav__link"> <span class="md-ellipsis"> Dry Run Call API Method </span> </a> </li> <li class="md-nav__item"> <a href="#dry-run-xcm-api-method" class="md-nav__link"> <span class="md-ellipsis"> Dry Run XCM API Method </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#execute-xcm-utils-precompile" class="md-nav__link"> <span class="md-ellipsis"> Execute an XCM Message with the XCM Utilities Precompile </span> </a> <nav class="md-nav" aria-label="Execute an XCM Message with the XCM Utilities Precompile"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#generate-encoded-calldata" class="md-nav__link"> <span class="md-ellipsis"> Generate the Encoded Calldata of an XCM Message </span> </a> </li> <li class="md-nav__item"> <a href="#execute-xcm-message" class="md-nav__link"> <span class="md-ellipsis"> Execute the XCM Message </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#send-xcm-message" class="md-nav__link"> <span class="md-ellipsis"> Send an XCM Message Cross-Chain </span> </a> <nav class="md-nav" aria-label="Send an XCM Message Cross-Chain"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#send-xcm-message-with-polkadotjs-api" class="md-nav__link"> <span class="md-ellipsis"> Send an XCM Message with the Polkadot.js API </span> </a> </li> <li class="md-nav__item"> <a href="#send-xcm-utils-precompile" class="md-nav__link"> <span class="md-ellipsis"> Send an XCM Message with the XCM Utilities Precompile </span> </a> <nav class="md-nav" aria-label="Send an XCM Message with the XCM Utilities Precompile"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#generate-encoded-calldata" class="md-nav__link"> <span class="md-ellipsis"> Generate the Encoded Calldata of an XCM Message </span> </a> </li> <li class="md-nav__item"> <a href="#send-xcm-message" class="md-nav__link"> <span class="md-ellipsis"> Send the XCM Message </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../xcm-utils/" class="md-nav__link"> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../protocols/">Cross-Chain Protocols</a> <label for="__nav_2_5_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-protocols-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../protocols/axelar/" class="md-nav__link"> Axelar </a> </li> <li class="md-nav__item"> <a href="../../protocols/hyperlane/" class="md-nav__link"> Hyperlane </a> </li> <li class="md-nav__item"> <a href="../../protocols/layerzero/" class="md-nav__link"> LayerZero </a> </li> <li class="md-nav__item"> <a href="../../protocols/wormhole/" class="md-nav__link"> Wormhole </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../mrl/" class="md-nav__link"> Moonbeam Routed Liquidity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../integrations/">Integrate</a> <label for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../integrations/indexers/">Indexers</a> <label for="__nav_2_6_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-indexers-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../integrations/indexers/covalent/" class="md-nav__link"> GoldRush API </a> </li> <li class="md-nav__item"> <a href="../../../integrations/indexers/subquery/" class="md-nav__link"> SubQuery </a> </li> <li class="md-nav__item"> <a href="../../../integrations/indexers/subsquid/" class="md-nav__link"> SQD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../integrations/oracles/">Oracles</a> <label for="__nav_2_6_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-oracles-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../integrations/oracles/api3/" class="md-nav__link"> API3 </a> </li> <li class="md-nav__item"> <a href="../../../integrations/oracles/dia/" class="md-nav__link"> DIA </a> </li> <li class="md-nav__item"> <a href="../../../integrations/oracles/supra/" class="md-nav__link"> Supra </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../node-operators/">Node Operators</a> <label for="__nav_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../node-operators/networks/">Networks</a> <label for="__nav_3_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../node-operators/networks/run-a-node/">Run a Node</a> <label for="__nav_3_2_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-run-a-node-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../node-operators/networks/run-a-node/overview/" class="md-nav__link"> Overview </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/run-a-node/docker/" class="md-nav__link"> Using Docker </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/run-a-node/systemd/" class="md-nav__link"> Using Systemd </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/run-a-node/flags/" class="md-nav__link"> Flags </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/tracing-node/" class="md-nav__link"> Run a Tracing Node </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../node-operators/networks/collators/">Collators</a> <label for="__nav_3_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-collators-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../node-operators/networks/collators/overview/" class="md-nav__link"> Overview </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/collators/faq/" class="md-nav__link"> FAQ </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/collators/requirements/" class="md-nav__link"> Requirements </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/collators/account-management/" class="md-nav__link"> Account Management </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/collators/author-mapping/" class="md-nav__link"> Author Mapping Precompile </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/collators/activities/" class="md-nav__link"> Collator Activities </a> </li> <li class="md-nav__item"> <a href="../../../../node-operators/networks/collators/orbiter/" class="md-nav__link"> Orbiter Program </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tokens/">Tokens</a> <label for="__nav_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tokens/connect/">Connect to Moonbeam</a> <label for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-connect-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../tokens/connect/ledger/" class="md-nav__link"> Ledger </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/connect/metamask/" class="md-nav__link"> MetaMask </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/connect/polkadotjs/" class="md-nav__link"> Polkadot.js Apps </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/connect/subwallet/" class="md-nav__link"> SubWallet </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/connect/talisman/" class="md-nav__link"> Talisman </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/connect/trezor/" class="md-nav__link"> Trezor </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/connect/on-ramps/" class="md-nav__link"> On Ramps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tokens/manage/">Account Management</a> <label for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-manage-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../tokens/manage/proxy-accounts/" class="md-nav__link"> Proxy Accounts </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/manage/multisig-safe/" class="md-nav__link"> Moonbeam Safe </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/manage/identity/" class="md-nav__link"> Managing an Identity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tokens/staking/">Staking</a> <label for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-staking-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../tokens/staking/stake/" class="md-nav__link"> How to Stake </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tokens/governance/">Governance</a> <label for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-governance-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../tokens/governance/proposals/" class="md-nav__link"> Submit a Democracy Proposal </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/governance/voting/" class="md-nav__link"> Vote on a Proposal </a> </li> <li class="md-nav__item"> <a href="../../../../tokens/governance/treasury-spend/" class="md-nav__link"> Submit a Treasury Proposal </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../learn/">Learn</a> <label for="__nav_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../learn/core-concepts/">Core Concepts</a> <label for="__nav_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-core-concepts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../learn/core-concepts/balances/" class="md-nav__link"> Account Balances </a> </li> <li class="md-nav__item"> <a href="../../../../learn/core-concepts/transfers-api/" class="md-nav__link"> Balance Transfers </a> </li> <li class="md-nav__item"> <a href="../../../../learn/core-concepts/consensus-finality/" class="md-nav__link"> Consensus & Finality </a> </li> <li class="md-nav__item"> <a href="../../../../learn/core-concepts/tx-fees/" class="md-nav__link"> Transaction Fees </a> </li> <li class="md-nav__item"> <a href="../../../../learn/core-concepts/unified-accounts/" class="md-nav__link"> Unified Accounts </a> </li> <li class="md-nav__item"> <a href="../../../../learn/core-concepts/security/" class="md-nav__link"> Security Considerations </a> </li> <li class="md-nav__item"> <a href="../../../../learn/core-concepts/glossary/" class="md-nav__link"> Glossary </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../learn/features/">Features</a> <label for="__nav_5_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-features-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../learn/features/eth-compatibility/" class="md-nav__link"> Ethereum Compatibility </a> </li> <li class="md-nav__item"> <a href="../../../../learn/features/governance/" class="md-nav__link"> Governance </a> </li> <li class="md-nav__item"> <a href="../../../../learn/features/randomness/" class="md-nav__link"> Randomness </a> </li> <li class="md-nav__item"> <a href="../../../../learn/features/staking/" class="md-nav__link"> Staking </a> </li> <li class="md-nav__item"> <a href="../../../../learn/features/treasury/" class="md-nav__link"> Treasury </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../learn/dapp-directory/" class="md-nav__link"> DApp Directory </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tutorials/">Tutorials</a> <label for="__nav_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tutorials/eth-api/">Ethereum API</a> <label for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../tutorials/eth-api/using-tenderly/" class="md-nav__link"> [Tenderly] Using Tenderly to Debug and Simulate Transactions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../tutorials/integrations/">Integrations</a> <label for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../tutorials/integrations/0xgasless/" class="md-nav__link"> Enable Gasless Transactions </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"><!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> <div class="toc-sections-title">Sections</div> </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#introduction" class="md-nav__link"> <span class="md-ellipsis"> Introduction </span> </a> </li> <li class="md-nav__item"> <a href="#polkadot-xcm-pallet-interface" class="md-nav__link"> <span class="md-ellipsis"> Polkadot XCM Pallet Interface </span> </a> <nav class="md-nav" aria-label="Polkadot XCM Pallet Interface"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#extrinsics" class="md-nav__link"> <span class="md-ellipsis"> Extrinsics </span> </a> </li> <li class="md-nav__item"> <a href="#storage-methods" class="md-nav__link"> <span class="md-ellipsis"> Storage Methods </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#checking-prerequisites" class="md-nav__link"> <span class="md-ellipsis"> Checking Prerequisites </span> </a> </li> <li class="md-nav__item"> <a href="#execute-an-xcm-message-locally" class="md-nav__link"> <span class="md-ellipsis"> Execute an XCM Message Locally </span> </a> <nav class="md-nav" aria-label="Execute an XCM Message Locally"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#execute-an-xcm-message-with-polkadotjs-api" class="md-nav__link"> <span class="md-ellipsis"> Execute an XCM Message with the Polkadot.js API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#test-an-xcm-message-with-the-dry-run-api" class="md-nav__link"> <span class="md-ellipsis"> Test an XCM Message with the Dry Run API </span> </a> <nav class="md-nav" aria-label="Test an XCM Message with the Dry Run API"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#dry-run-call-api-method" class="md-nav__link"> <span class="md-ellipsis"> Dry Run Call API Method </span> </a> </li> <li class="md-nav__item"> <a href="#dry-run-xcm-api-method" class="md-nav__link"> <span class="md-ellipsis"> Dry Run XCM API Method </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#execute-xcm-utils-precompile" class="md-nav__link"> <span class="md-ellipsis"> Execute an XCM Message with the XCM Utilities Precompile </span> </a> <nav class="md-nav" aria-label="Execute an XCM Message with the XCM Utilities Precompile"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#generate-encoded-calldata" class="md-nav__link"> <span class="md-ellipsis"> Generate the Encoded Calldata of an XCM Message </span> </a> </li> <li class="md-nav__item"> <a href="#execute-xcm-message" class="md-nav__link"> <span class="md-ellipsis"> Execute the XCM Message </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#send-xcm-message" class="md-nav__link"> <span class="md-ellipsis"> Send an XCM Message Cross-Chain </span> </a> <nav class="md-nav" aria-label="Send an XCM Message Cross-Chain"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#send-xcm-message-with-polkadotjs-api" class="md-nav__link"> <span class="md-ellipsis"> Send an XCM Message with the Polkadot.js API </span> </a> </li> <li class="md-nav__item"> <a href="#send-xcm-utils-precompile" class="md-nav__link"> <span class="md-ellipsis"> Send an XCM Message with the XCM Utilities Precompile </span> </a> <nav class="md-nav" aria-label="Send an XCM Message with the XCM Utilities Precompile"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#generate-encoded-calldata" class="md-nav__link"> <span class="md-ellipsis"> Generate the Encoded Calldata of an XCM Message </span> </a> </li> <li class="md-nav__item"> <a href="#send-xcm-message" class="md-nav__link"> <span class="md-ellipsis"> Send the XCM Message </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div><div class="feedback-actions-container"><div class="feedback-section"> <form class="md-feedback" name="feedback" hidden> <fieldset> <legend class="md-feedback__title"> Was this page helpful? </legend> <div class="md-feedback__inner"> <div class="md-feedback__list"> <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73zM1 21h4V9H1z"/></svg> </button> <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2"/></svg> </button> </div> <div class="md-feedback__note"> <div data-md-value="1" hidden> Thanks for your feedback! </div> <div data-md-value="0" hidden> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+Send%2C%20Execute%20and%20Test%20XCM%20Messages+-+/builders/interoperability/xcm/send-execute-xcm/" target="_blank" rel="noopener">additional feedback</a>. </div> </div> </div> </fieldset> <div class="divider"></div></form> </div><div class="edit-section"> <a href="https://github.com/moonbeam-foundation/moonbeam-docs/edit/master/builders/interoperability/xcm/send-execute-xcm.md" title="Edit this page" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> Edit this page </a> </div> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <h1 id="send-execute-and-test-xcm-messages">Send, Execute, and Test XCM Messages<a class="headerlink" href="#send-execute-and-test-xcm-messages" title="Permanent link">&para;</a></h1> <h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2> <p>XCM messages are comprised of a <a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/" target="_blank">series of instructions</a> that are executed by the Cross-Consensus Virtual Machine (XCVM). Combinations of these instructions result in predetermined actions, such as cross-chain token transfers. You can create your own custom XCM messages by combining various XCM instructions.</p> <p>Pallets such as <a href="/moonbeam-mkdocs/builders/interoperability/xcm/xc20/send-xc20s/xcm-pallet/" target="_blank">Polkadot XCM</a> and <a href="/moonbeam-mkdocs/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/" target="_blank">XCM Transactor</a> provide functions with a predefined set of XCM instructions to either send <a href="/moonbeam-mkdocs/builders/interoperability/xcm/xc20/overview/" target="_blank">XC-20s</a> or remotely execute on other chains via XCM. However, to get a better understanding of the results from combining different XCM instructions, you can build and execute custom XCM messages locally on Moonbeam (only available on Moonbase Alpha). You can also send custom XCM messages to another chain (which will start with the <a href="https://github.com/paritytech/xcm-format#descendorigin" target="_blank"><code>DescendOrigin</code></a> instruction). Nevertheless, for the XCM message to be successfully executed, the target chain needs to be able to understand the instructions.</p> <p>To execute or send a custom XCM message, you can either use the <a href="#polkadot-xcm-pallet-interface">Polkadot XCM Pallet</a> directly or through the Ethereum API with the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/xcm-utils/" target="_blank">XCM Utilities Precompile</a>. In this guide, you'll learn how to use both methods to execute and send custom-built XCM messages locally on Moonbase Alpha.</p> <p>This guide assumes that you are familiar with general XCM concepts, such as <a href="/moonbeam-mkdocs/builders/interoperability/xcm/overview/#general-xcm-definitions" target="_blank">general XCM terminology</a> and <a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/" target="_blank">XCM instructions</a>. For more information, you can check out the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/overview/" target="_blank">XCM Overview</a> documentation.</p> <h2 id="polkadot-xcm-pallet-interface">Polkadot XCM Pallet Interface<a class="headerlink" href="#polkadot-xcm-pallet-interface" title="Permanent link">&para;</a></h2> <h3 id="extrinsics">Extrinsics<a class="headerlink" href="#extrinsics" title="Permanent link">&para;</a></h3> <p>The Polkadot XCM Pallet includes the following relevant extrinsics (functions):</p> <details class="function" open="open"> <summary><strong>execute</strong>(message, maxWeight) — <strong>supported on Moonbase Alpha only</strong> - executes a custom XCM message on the source chain</summary> <div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Parameters</label><label for="__tabbed_1_2">Polkadot.js API Example</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>message</code> - the SCALE-encoded versioned XCM message to be executed</li> <li><code>maxWeight</code> - the maximum weight allowed to be consumed, which is defined by specifying the:<ul> <li><code>refTime</code> - the amount of computational time that can be used for execution</li> <li><code>proofSize</code> - the amount of storage in bytes that can be used</li> </ul> </li> </ul> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">INSERT_XCM_INSTRUCTIONS</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">maxWeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">refTime</span><span class="o">:</span><span class="w"> </span><span class="nx">INSERT_REF_TIME</span><span class="p">,</span><span class="w"> </span><span class="nx">proofSize</span><span class="o">:</span><span class="w"> </span><span class="nx">INSERT_PROOF_SIZE</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
<span class="w">    </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="s1">&#39;INSERT_WSS_ENDPOINT&#39;</span><span class="p">),</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">polkadotXcm</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">maxWeight</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">txHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">signAndSend</span><span class="p">(</span><span class="s1">&#39;INSERT_ACCOUNT_OR_KEYRING&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">main</span><span class="p">();</span>
</code></pre></div> </div> </div> </div> </details> <details class="function" open="open"> <summary><strong>send</strong>(dest, message) — <strong>supported on Moonbase Alpha only</strong> - sends a custom XCM message to a destination chain. For the XCM message to be successfully executed, the target chain needs to be able to understand the instructions in the message</summary> <div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Parameters</label><label for="__tabbed_2_2">Polkadot.js API Example</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>dest</code> - the XCM versioned multilocation representing a chain in the ecosystem where the XCM message is being sent to (the target chain)</li> <li><code>message</code> - the SCALE-encoded versioned XCM message to be executed</li> </ul> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="nx">INSERT_PARENTS</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="nx">INSERT_INTERIOR</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">INSERT_XCM_INSTRUCTIONS</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
<span class="w">    </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="s1">&#39;INSERT_WSS_ENDPOINT&#39;</span><span class="p">),</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">polkadotXcm</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">txHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">signAndSend</span><span class="p">(</span><span class="s1">&#39;INSERT_ACCOUNT_OR_KEYRING&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">main</span><span class="p">();</span>
</code></pre></div> </div> </div> </div> </details> <h3 id="storage-methods">Storage Methods<a class="headerlink" href="#storage-methods" title="Permanent link">&para;</a></h3> <p>The Polkadot XCM Pallet includes the following relevant read-only storage methods:</p> <details class="function" open="open"> <summary><strong>assetTraps</strong>(hash) — returns the existing number of times an asset has been trapped given a hash of the asset</summary> <div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><input id="__tabbed_3_3" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Parameters</label><label for="__tabbed_3_2">Returns</label><label for="__tabbed_3_3">Polkadot.js API Example</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <p><code>hash</code> - (optional) the Blake2-256 hash of the <a href="https://github.com/paritytech/xcm-format#6-universal-asset-identifiers" target="_blank"><code>Asset</code></a></p> </div> <div class="tabbed-block"> <p>The number of times an asset has been trapped. If the hash was omitted, it returns an array of all of the hashes and the number of times each asset has been trapped.</p> <div class="highlight"><pre><span></span><code><span class="c1">// If using Polkadot.js API and calling toJSON() on the value</span>
<span class="c1">// If hash was provided:</span>
<span class="mf">10</span>

<span class="c1">// If hash was omitted:</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span>
<span class="w">    </span><span class="mh">0xf7d4341888be30c6a842a77c52617423e8109aa249e88779019cf731ed772fb7</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="mf">10</span>
<span class="p">],</span>
<span class="p">...</span>
</code></pre></div> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code>
</code></pre></div> </div> </div> </div> </details> <details class="function"> <summary><strong>palletVersion</strong>() — returns current pallet version from storage</summary> <div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><input id="__tabbed_4_2" name="__tabbed_4" type="radio"><input id="__tabbed_4_3" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">Parameters</label><label for="__tabbed_4_2">Returns</label><label for="__tabbed_4_3">Polkadot.js API Example</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <p>None</p> </div> <div class="tabbed-block"> <p>A number representing the current version of the pallet.</p> <div class="highlight"><pre><span></span><code><span class="c1">// If using Polkadot.js API and calling toJSON() on the unwrapped value</span>
<span class="mf">0</span>
</code></pre></div> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
<span class="w">    </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="s1">&#39;INSERT_WSS_ENDPOINT&#39;</span><span class="p">),</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">palletVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">polkadotXcm</span><span class="p">.</span><span class="nx">palletVersion</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">main</span><span class="p">();</span>
</code></pre></div> </div> </div> </div> </details> <h2 id="checking-prerequisites">Checking Prerequisites<a class="headerlink" href="#checking-prerequisites" title="Permanent link">&para;</a></h2> <p>To follow along with this guide, you will need the following:</p> <ul> <li>Your account must be funded with DEV tokens. You can get DEV tokens for testing on Moonbase Alpha once every 24 hours from the <a href="https://faucet.moonbeam.network" target="_blank">Moonbase Alpha Faucet</a></li> </ul> <h2 id="execute-an-xcm-message-locally">Execute an XCM Message Locally<a class="headerlink" href="#execute-an-xcm-message-locally" title="Permanent link">&para;</a></h2> <p>This section of the guide covers the process of building a custom XCM message to be executed locally (i.e., in Moonbeam) via two different methods: the <code>execute</code> function of the Polkadot XCM Pallet and the <code>xcmExecute</code> function of the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/xcm-utils/" target="_blank">XCM Utilities Precompile</a>. This functionality provides a playground for you to experiment with different XCM instructions and see firsthand the results of these experiments. This also comes in handy to determine the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/weights-fees/" target="_blank">fees</a> associated with a given XCM message on Moonbeam.</p> <p>In the following example, you'll transfer DEV tokens from one account to another on Moonbase Alpha. To do so, you'll be building an XCM message that contains the following XCM instructions, which are executed locally (in this case, on Moonbase Alpha):</p> <ul> <li><a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/#withdraw-asset" target="_blank"><code>WithdrawAsset</code></a> - removes assets and places them into the holding register</li> <li><a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/#deposit-asset" target="_blank"><code>DepositAsset</code></a> - removes the assets from the holding register and deposits the equivalent assets to a beneficiary account</li> </ul> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Typically, when you send an XCM message cross-chain to a target chain, the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/#buy-execution" target="_blank"><code>BuyExecution</code> instruction</a> is needed to pay for remote execution. However, for local execution, this instruction is not necessary as you are already getting charged via the extrinsic call.</p> </div> <h3 id="execute-an-xcm-message-with-polkadotjs-api">Execute an XCM Message with the Polkadot.js API<a class="headerlink" href="#execute-an-xcm-message-with-polkadotjs-api" title="Permanent link">&para;</a></h3> <p>In this example, you'll execute a custom XCM message locally on Moonbase Alpha using the Polkadot.js API to interact directly with the Polkadot XCM Pallet.</p> <p>The <code>execute</code> function of the Polkadot XCM Pallet accepts two parameters: <code>message</code> and <code>maxWeight</code>. You can start assembling these parameters by taking the following steps:</p> <ol> <li> <p>Build the <code>WithdrawAsset</code> instruction, which will require you to define:</p> <ul> <li>The multilocation of the DEV token on Moonbase Alpha</li> <li>The amount of DEV tokens to transfer</li> </ul> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">instr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">WithdrawAsset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nx">PalletInstance</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">100000000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 0.1 DEV</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
</code></pre></div> </li> <li> <p>Build the <code>DepositAsset</code> instruction, which will require you to define:</p> <ul> <li>The asset identifier for DEV tokens. You can use the <a href="https://github.com/paritytech/xcm-format/blob/master/README.md#6-universal-asset-identifiers" target="_blank"><code>WildAsset</code> format</a>, which allows for wildcard matching, to identify the asset</li> <li>The multilocation of the beneficiary account on Moonbase Alpha</li> </ul> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">instr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DepositAsset</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assets</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">Wild</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">AllCounted</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">beneficiary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">      </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">AccountKey20</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;0x3Cd0A705a2DC65e5b1E1205896BaA2be8A07c6e0&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div> </li> <li> <p>Combine the XCM instructions into a versioned XCM message:</p> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">instr1</span><span class="p">,</span><span class="w"> </span><span class="nx">instr2</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
</code></pre></div> </li> <li> <p>Specify the <code>maxWeight</code>, which includes a value for <code>refTime</code> and <code>proofSize</code> that you will need to define. You can get both of these values by providing the XCM message as a parameter to the <code>queryXcmWeight</code> method of the <a href="https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fmoonbeam-alpha.api.onfinality.io%2Fpublic-ws#/runtime" target="_blank"><code>xcmPaymentApi</code> runtime call</a>. </p> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">maxWeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">refTime</span><span class="o">:</span><span class="w"> </span><span class="mi">7250000000n</span><span class="p">,</span><span class="w"> </span><span class="nx">proofSize</span><span class="o">:</span><span class="w"> </span><span class="mi">19374n</span><span class="w"> </span><span class="p">};</span>
</code></pre></div> </li> </ol> <p>Now that you have the values for each of the parameters, you can write the script for the execution. You'll take the following steps:</p> <ol> <li>Provide the input data for the call. This includes:<ul> <li>The Moonbase Alpha endpoint URL to create the provider</li> <li>The values for each of the parameters of the <code>execute</code> function</li> </ul> </li> <li>Create a Keyring instance that will be used to send the transaction</li> <li>Create the <a href="/moonbeam-mkdocs/builders/substrate/libraries/polkadot-js-api/" target="_blank">Polkadot.js API</a> provider</li> <li>Craft the <code>polkadotXcm.execute</code> extrinsic with the <code>message</code> and <code>maxWeight</code></li> <li>Send the transaction using the <code>signAndSend</code> extrinsic and the Keyring instance you created in the second step</li> </ol> <div class="admonition remember"> <p class="admonition-title">Remember</p> <p>This is for demo purposes only. Never store your private key in a JavaScript file.</p> </div> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">,</span><span class="w"> </span><span class="nx">Keyring</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Version 10.13.1</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">cryptoWaitReady</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/util-crypto&#39;</span><span class="p">;</span>

<span class="c1">// 1. Provide input data</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">providerWsURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;wss://wss.api.moonbase.moonbeam.network&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">WithdrawAsset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nx">PalletInstance</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">100000000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 0.1 DEV</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DepositAsset</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assets</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">Wild</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">AllCounted</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">beneficiary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">      </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">AccountKey20</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;0x3Cd0A705a2DC65e5b1E1205896BaA2be8A07c6e0&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">instr1</span><span class="p">,</span><span class="w"> </span><span class="nx">instr2</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">maxWeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">refTime</span><span class="o">:</span><span class="w"> </span><span class="mi">7250000000n</span><span class="p">,</span><span class="w"> </span><span class="nx">proofSize</span><span class="o">:</span><span class="w"> </span><span class="mi">19374n</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">executeXcmMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 2. Create Keyring instance</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">cryptoWaitReady</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">keyring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Keyring</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ethereum&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">alice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keyring</span><span class="p">.</span><span class="nx">addFromUri</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 3. Create Substrate API provider</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="nx">providerWsURL</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 4. Craft the extrinsic</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">polkadotXcm</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">maxWeight</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 5. Send the transaction</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">txHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">signAndSend</span><span class="p">(</span><span class="nx">alice</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Submitted with hash </span><span class="si">${</span><span class="nx">txHash</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="nx">api</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">executeXcmMessage</span><span class="p">();</span>
</code></pre></div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>You can view an example of the above script, which sends 1 DEV to Bob's account on Moonbase Alpha, on <a href="https://polkadot.js.org/apps/?rpc=wss://wss.api.moonbase.moonbeam.network#/extrinsics/decode/0x1c030408000400010403001300008a5d784563010d010204000103003cd0a705a2dc65e5b1e1205896baa2be8a07c6e007803822b001ba2e0100" target="_blank">Polkadot.js Apps</a> using the following encoded calldata: <code>0x1c030408000400010403001300008a5d784563010d010204000103003cd0a705a2dc65e5b1e1205896baa2be8a07c6e007803822b001ba2e0100</code>.</p> </div> <p>Once the transaction is processed, the 0.1 DEV tokens should be withdrawn from Alice's account along with the associated XCM fees, and the destination account should have received 0.1 DEV tokens in their account. A <code>polkadotXcm.Attempted</code> event will be emitted with the outcome.</p> <h2 id="test-an-xcm-message-with-the-dry-run-api">Test an XCM Message with the Dry Run API<a class="headerlink" href="#test-an-xcm-message-with-the-dry-run-api" title="Permanent link">&para;</a></h2> <p>The XCM Dry Run API is an easy and convenient way to test the integrity of your XCM message without incurring any transaction fees. The XCM Dry Run API can be accessed from the <a href="https://polkadot.js.org/apps/?rpc=wss://wss.api.moonbeam.network#/runtime" target="_blank">Runtime Calls</a> tab of the <strong>Developer</strong> section of Polkadot.js Apps.</p> <h3 id="dry-run-call-api-method">Dry Run Call API Method<a class="headerlink" href="#dry-run-call-api-method" title="Permanent link">&para;</a></h3> <p>This method takes as a parameter the origin and the call data and returns an execution result, actual weight, and event data. </p> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">testAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">createType</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;AccountId20&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;0x88bcE0b038eFFa09e58fE6d24fDe4b5Af21aa798&#39;</span>
<span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">callData</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="s1">&#39;0x1c030408000400010403001300008a5d784563010d010204000103003cd0a705a2dc65e5b1e1205896baa2be8a07c6e007803822b001ba2e0100&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">callDataU8a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">hexToU8a</span><span class="p">(</span><span class="nx">callData</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">dryRunApi</span><span class="p">.</span><span class="nx">dryRunCall</span><span class="p">(</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">system</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Signed</span><span class="o">:</span><span class="w"> </span><span class="nx">testAccount</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nx">callDataU8a</span>
<span class="p">);</span>
</code></pre></div> <details class="code"> <summary>View the complete script</summary> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">hexToU8a</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/util&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Construct API provider</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">wsProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="s1">&#39;INSERT_WSS_ENDPOINT&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="nx">wsProvider</span><span class="w"> </span><span class="p">});</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Connected to the API. Preparing dry run call...&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Create a test account (you should replace this with an actual account)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">testAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">createType</span><span class="p">(</span>
<span class="w">      </span><span class="s1">&#39;AccountId20&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="s1">&#39;0x88bcE0b038eFFa09e58fE6d24fDe4b5Af21aa798&#39;</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// The call data (replace with your actual call data)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">callData</span><span class="w"> </span><span class="o">=</span>
<span class="w">      </span><span class="s1">&#39;0x1c030408000400010403001300008a5d784563010d010204000103003cd0a705a2dc65e5b1e1205896baa2be8a07c6e007803822b001ba2e0100&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Your hex-encoded call data</span>

<span class="w">    </span><span class="c1">// Convert hex to Uint8Array</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">callDataU8a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">hexToU8a</span><span class="p">(</span><span class="nx">callData</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Perform the dry run call</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">dryRunApi</span><span class="p">.</span><span class="nx">dryRunCall</span><span class="p">(</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">system</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Signed</span><span class="o">:</span><span class="w"> </span><span class="nx">testAccount</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// origin</span>
<span class="w">      </span><span class="nx">callDataU8a</span><span class="w"> </span><span class="c1">// call</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="w">      </span><span class="s1">&#39;Dry run XCM result:&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">(),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Disconnect the API</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Disconnected from the API.&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;An error occurred:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">main</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</code></pre></div> </details> <p>Upon calling the XCM Dry Run API, the method will tell you whether the call would be successful and returns the event data that would be emitted if the call were actually submitted on chain. You can view the initial output of the <code>dryRunCall</code> below.</p> <details class="code"> <summary>View the complete output</summary> <div class="highlight"><pre><span></span><code><span class="err">Dry</span><span class="w"> </span><span class="err">ru</span><span class="kc">n</span><span class="w"> </span><span class="err">XCM</span><span class="w"> </span><span class="err">resul</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;ok&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;executionResult&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;ok&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;actualWeight&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;refTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7301615000</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;proofSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20928</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;paysFee&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Yes&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;emittedEvents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x030b&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">&quot;0x88bcE0b038eFFa09e58fE6d24fDe4b5Af21aa798&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;0x0000000000000000016345785d8a0000&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x0300&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">&quot;0x3Cd0A705a2DC65e5b1E1205896BaA2be8A07c6e0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;0x0000000000000000016345785d8a0000&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x030a&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">&quot;0x3Cd0A705a2DC65e5b1E1205896BaA2be8A07c6e0&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;0x0000000000000000016345785d8a0000&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1c00&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;complete&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;used&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;refTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7250000000</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;proofSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">19374</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;localXcm&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;v4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;withdrawAsset&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;parents&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;interior&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;x1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;palletInstance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">              </span><span class="nt">&quot;fun&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;fungible&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x0000000000000000016345785d8a0000&quot;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;depositAsset&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;assets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;wild&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;allCounted&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;beneficiary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nt">&quot;parents&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">              </span><span class="nt">&quot;interior&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;x1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                  </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;accountKey20&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                      </span><span class="nt">&quot;network&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                      </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x3cd0a705a2dc65e5b1e1205896baa2be8a07c6e0&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="c1">// Additional events returned here</span>
<span class="w">      </span><span class="c1">// Omitted for clarity </span>
</code></pre></div> </details> <h3 id="dry-run-xcm-api-method">Dry Run XCM API Method<a class="headerlink" href="#dry-run-xcm-api-method" title="Permanent link">&para;</a></h3> <p>The <code>dryRunXCM</code> method of the XCM Dry Run API takes a full XCM message as a parameter instead of an encoded call, as well as the origin of the message.</p> <p><code>dryRunXCM</code> takes as a parameter the origin and the XCM message and returns an execution result, actual weight, and event data. </p> <div class="highlight"><pre><span></span><code><span class="c1">// Define the origin</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">origin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Here&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"> </span><span class="c1">// Insert XCM Message Here</span>

<span class="c1">// Perform the dry run XCM call</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">dryRunApi</span><span class="p">.</span><span class="nx">dryRunXcm</span><span class="p">(</span><span class="nx">origin</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">);</span>
</code></pre></div> <details class="code"> <summary>View the complete script</summary> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">hexToU8a</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/util&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Construct API provider</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">wsProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="s1">&#39;INSERT_WSS_ENDPOINT&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="nx">wsProvider</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Connected to the API. Preparing dry run XCM call...&#39;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Define the origin</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">origin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Here&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">amountToSend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000000000000</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">WithdrawAsset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Here&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">              </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="nx">amountToSend</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">],</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">BuyExecution</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">fees</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Here&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">              </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="nx">amountToSend</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nx">weightLimit</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Unlimited</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">DepositAsset</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">assets</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Wild</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AllOf</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Here&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nx">maxAssets</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">            </span><span class="nx">beneficiary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">              </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                  </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">AccountKey20</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                      </span><span class="nx">network</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                      </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="nx">hexToU8a</span><span class="p">(</span><span class="s1">&#39;0x3B939FeaD1557C741Ff06492FD0127bd287A421e&#39;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Perform the dry run XCM call</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">call</span><span class="p">.</span><span class="nx">dryRunApi</span><span class="p">.</span><span class="nx">dryRunXcm</span><span class="p">(</span><span class="nx">origin</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">);</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="w">      </span><span class="s1">&#39;Dry run XCM result:&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">(),</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Disconnected from the API.&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;An error occurred:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">main</span><span class="p">().</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</code></pre></div> </details> <p>Upon calling the XCM Dry Run API, the method will tell you whether the call would be successful and returns the event data that would be emitted if the XCM were to be actually submitted on chain. You can view the initial output of the <code>dryRunXCM</code> below.</p> <details class="code"> <summary>View the complete output</summary> <div class="highlight"><pre><span></span><code><span class="err">Dry</span><span class="w"> </span><span class="err">ru</span><span class="kc">n</span><span class="w"> </span><span class="err">XCM</span><span class="w"> </span><span class="err">resul</span><span class="kc">t</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;ok&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;executionResult&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;complete&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;used&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;refTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">76473048000</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;proofSize&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">222483</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;emittedEvents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1d03&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">&quot;0x1fcacbd218edc0eba20fc2308c778080&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;0x506172656E740000000000000000000000000000&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="mi">1000000000000</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1d01&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">&quot;0x1fcacbd218edc0eba20fc2308c778080&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;0x3B939FeaD1557C741Ff06492FD0127bd287A421e&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="mi">959944978002</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1d01&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="s2">&quot;0x1fcacbd218edc0eba20fc2308c778080&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;0x6d6F646c70632f74727372790000000000000000&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="mi">40055021998</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span><span class="w"> </span><span class="c1">// Additional events returned here</span>
<span class="w">      </span><span class="c1">// Omitted for clarity </span>
</code></pre></div> </details> <h2 id="execute-xcm-utils-precompile">Execute an XCM Message with the XCM Utilities Precompile<a class="headerlink" href="#execute-xcm-utils-precompile" title="Permanent link">&para;</a></h2> <p>In this section, you'll use the <code>xcmExecute</code> function of the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/xcm-utils/" target="_blank">XCM Utilities Precompile</a>, which is only supported on Moonbase Alpha, to execute an XCM message locally. The XCM Utilities Precompile is located at the following address:</p> <div class="highlight"><pre><span></span><code>0x000000000000000000000000000000000000080C
</code></pre></div> <p>Under the hood, the <code>xcmExecute</code> function of the XCM Utilities Precompile calls the <code>execute</code> function of the Polkadot XCM Pallet, which is a Substrate pallet that is coded in Rust. The benefit of using the XCM Utilities Precompile to call <code>xcmExecute</code> is that you can do so via the Ethereum API and use <a href="/moonbeam-mkdocs/builders/ethereum/libraries/" target="_blank">Ethereum libraries</a> like <a href="/moonbeam-mkdocs/builders/ethereum/libraries/ethersjs/" target="_blank">Ethers.js</a>.</p> <p>The <code>xcmExecute</code> function accepts two parameters: the SCALE encoded versioned XCM message to be executed and the maximum weight to be consumed.</p> <p>First, you'll learn how to generate the encoded calldata, and then you'll learn how to use the encoded calldata to interact with the XCM Utilities Precompile.</p> <h3 id="generate-encoded-calldata">Generate the Encoded Calldata of an XCM Message<a class="headerlink" href="#generate-encoded-calldata" title="Permanent link">&para;</a></h3> <p>To get the encoded calldata of the XCM message, you can create a script similar to the one you created in the <a href="#execute-an-xcm-message-with-polkadotjs-api">Execute an XCM Message with the Polkadot.js API</a> section. Instead of building the message and sending the transaction, you'll build the message to get the encoded calldata. You'll take the following steps:</p> <ol> <li>Provide the input data for the call. This includes:<ul> <li>The Moonbase Alpha endpoint URL to create the provider</li> <li>The values for each of the parameters of the <code>execute</code> function as defined in the <a href="#execute-an-xcm-message-with-polkadotjs-api">Execute an XCM Message with the Polkadot.js API</a> section</li> </ul> </li> <li>Create the <a href="/moonbeam-mkdocs/builders/substrate/libraries/polkadot-js-api/" target="_blank">Polkadot.js API</a> provider</li> <li>Craft the <code>polkadotXcm.execute</code> extrinsic with the <code>message</code> and <code>maxWeight</code></li> <li>Use the transaction to get the encoded calldata</li> </ol> <p>The entire script is as follows:</p> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Version 10.13.1</span>

<span class="c1">// 1. Provide input data</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">moonbeamAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_ADDRESS&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">providerWsURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;wss://wss.api.moonbase.moonbeam.network&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">WithdrawAsset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nx">PalletInstance</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">100000000000000000n</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DepositAsset</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assets</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Wild</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AllCounted</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">beneficiary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">      </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">AccountKey20</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="nx">moonbeamAccount</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">instr1</span><span class="p">,</span><span class="w"> </span><span class="nx">instr2</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">maxWeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">refTime</span><span class="o">:</span><span class="w"> </span><span class="mi">7250000000n</span><span class="p">,</span><span class="w"> </span><span class="nx">proofSize</span><span class="o">:</span><span class="w"> </span><span class="mi">19374n</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">getEncodedXcmMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 2. Create Substrate API provider</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="nx">providerWsURL</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 3. Craft the extrinsic</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">polkadotXcm</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">maxWeight</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 4. Get the encoded XCM message</span>
<span class="w">  </span><span class="c1">// By using index 0, you&#39;ll get just the encoded XCM message.</span>
<span class="w">  </span><span class="c1">// If you wanted to get the maxWeight, you could use index 1</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">encodedXcmMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">toHex</span><span class="p">();</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Encoded Calldata for XCM Message: </span><span class="si">${</span><span class="nx">encodedXcmMessage</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="nx">api</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">getEncodedXcmMessage</span><span class="p">();</span>
</code></pre></div> <h3 id="execute-xcm-message">Execute the XCM Message<a class="headerlink" href="#execute-xcm-message" title="Permanent link">&para;</a></h3> <p>Now that you have the SCALE encoded XCM message, you can use the following code snippets to programmatically call the <code>xcmExecute</code> function of the XCM Utilities Precompile using your <a href="/moonbeam-mkdocs/builders/ethereum/libraries/" target="_blank">Ethereum library</a> of choice. Generally speaking, you'll take the following steps:</p> <ol> <li>Create a provider and signer</li> <li>Create an instance of the XCM Utilities Precompile to interact with</li> <li>Define parameters required for the <code>xcmExecute</code> function, which will be the encoded calldata for the XCM message and the maximum weight to use to execute the message. You can set the <code>maxWeight</code> to be <code>400000000n</code>, which corresponds to the <code>refTime</code>. The <code>proofSize</code> will automatically be set to the default, which is 64KB</li> <li>Execute the XCM message</li> </ol> <div class="admonition remember"> <p class="admonition-title">Remember</p> <p>The following snippets are for demo purposes only. Never store your private keys in a JavaScript or Python file.</p> </div> <div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"><input id="__tabbed_5_2" name="__tabbed_5" type="radio"><input id="__tabbed_5_3" name="__tabbed_5" type="radio"><div class="tabbed-labels"><label for="__tabbed_5_1">Ethers.js</label><label for="__tabbed_5_2">Web3.js</label><label for="__tabbed_5_3">Web3.py</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ethers</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;ethers&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import Ethers library</span>
<span class="k">import</span><span class="w"> </span><span class="nx">abi</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./xcmUtilsABI.js&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import the XCM Utilities Precompile ABI</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_YOUR_PRIVATE_KEY&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtilsAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;0x000000000000000000000000000000000000080C&#39;</span><span class="p">;</span>

<span class="cm">/* Create Ethers provider and signer */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;https://rpc.api.moonbase.moonbeam.network&#39;</span>
<span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">signer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>

<span class="cm">/* Create contract instance of the XCM Utilities Precompile */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span>
<span class="w">  </span><span class="nx">xcmUtilsAddress</span><span class="p">,</span>
<span class="w">  </span><span class="nx">abi</span><span class="p">,</span>
<span class="w">  </span><span class="nx">signer</span>
<span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">executeXcmMessageLocally</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/* Define parameters required for the xcmExecute function */</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">encodedCalldata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_ENCODED_CALLDATA&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">maxWeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;400000000&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="cm">/* Execute the custom XCM message */</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="p">.</span><span class="nx">xcmExecute</span><span class="p">(</span><span class="nx">encodedCalldata</span><span class="p">,</span><span class="w"> </span><span class="nx">maxWeight</span><span class="p">);</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Transaction receipt: </span><span class="si">${</span><span class="nx">tx</span><span class="p">.</span><span class="nx">hash</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">executeXcmMessageLocally</span><span class="p">();</span>
</code></pre></div> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Web3</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;web3&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import Web3 library</span>
<span class="k">import</span><span class="w"> </span><span class="nx">abi</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./xcmUtilsABI.js&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import the XCM Utilities Precompile ABI</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">accountFrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">.</span><span class="nx">privateKeyToAccount</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">).</span><span class="nx">address</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtilsAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;0x000000000000000000000000000000000000080C&#39;</span><span class="p">;</span>

<span class="cm">/* Create Web3 provider */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">web3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Web3</span><span class="p">(</span><span class="s1">&#39;https://rpc.api.moonbase.moonbeam.network&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Change to network of choice</span>

<span class="cm">/* Create contract instance of the XCM Utilities Precompile */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span>
<span class="w">  </span><span class="nx">abi</span><span class="p">,</span>
<span class="w">  </span><span class="nx">xcmUtilsAddress</span><span class="p">,</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="nx">accountFrom</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// &#39;from&#39; is necessary for gas estimation</span>
<span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">executeXcmMessageLocally</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/* Define parameters required for the xcmExecute function */</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">encodedCalldata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_ENCODED_CALLDATA&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">maxWeight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;400000000&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="cm">/* Send the custom XCM message */</span>
<span class="w">  </span><span class="c1">// Craft the extrinsic</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="p">.</span><span class="nx">methods</span><span class="p">.</span><span class="nx">xcmExecute</span><span class="p">(</span><span class="nx">encodedCalldata</span><span class="p">,</span><span class="w"> </span><span class="nx">maxWeight</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// Sign transaction</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">signedTx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">.</span><span class="nx">signTransaction</span><span class="p">(</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="nx">xcmUtilsAddress</span><span class="p">,</span>
<span class="w">      </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">encodeABI</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">gas</span><span class="o">:</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">estimateGas</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">gasPrice</span><span class="o">:</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">getGasPrice</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">nonce</span><span class="o">:</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">getTransactionCount</span><span class="p">(</span><span class="nx">accountFrom</span><span class="p">),</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">privateKey</span>
<span class="w">  </span><span class="p">);</span>
<span class="w">  </span><span class="c1">// Send the signed transaction</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sendTx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">sendSignedTransaction</span><span class="p">(</span><span class="nx">signedTx</span><span class="p">.</span><span class="nx">rawTransaction</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Transaction receipt: </span><span class="si">${</span><span class="nx">sendTx</span><span class="p">.</span><span class="nx">transactionHash</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">executeXcmMessageLocally</span><span class="p">();</span>
</code></pre></div> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">web3</span><span class="w"> </span><span class="kn">import</span> <span class="n">Web3</span>

<span class="n">abi</span> <span class="o">=</span> <span class="s2">&quot;INSERT_XCM_UTILS_ABI&quot;</span>  <span class="c1"># Paste or import the XCM Utils ABI</span>
<span class="c1"># This is for demo purposes, never store your private key in plain text</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="s2">&quot;INSERT_PRIVATE_KEY&quot;</span>
<span class="c1"># The wallet address that corresponds to your private key</span>
<span class="n">address</span> <span class="o">=</span> <span class="s2">&quot;INSERT_ADDRESS&quot;</span>
<span class="n">xcm_utils_address</span> <span class="o">=</span> <span class="s2">&quot;0x000000000000000000000000000000000000080C&quot;</span>

<span class="c1">## Create Web3 provider ##</span>
<span class="n">web3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s2">&quot;https://rpc.api.moonbase.moonbeam.network&quot;</span><span class="p">))</span>

<span class="c1">## Create contract instance of the XCM Utilities Precompile ##</span>
<span class="n">xcm_utils</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span>
    <span class="c1"># XCM Utilities Precompile address</span>
    <span class="n">address</span><span class="o">=</span><span class="n">xcm_utils_address</span><span class="p">,</span>
    <span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">execute_xcm_message_locally</span><span class="p">():</span>
    <span class="c1">## Define parameters required for the xcmExecute function ##</span>
    <span class="n">encoded_calldata</span> <span class="o">=</span> <span class="s2">&quot;INSERT_ENCODED_CALLDATA&quot;</span>
    <span class="n">max_weight</span> <span class="o">=</span> <span class="mi">400000000</span>

    <span class="c1">## Execute the custom XCM message ##</span>
    <span class="c1"># Craft the extrinsic</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">xcm_utils</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">xcmExecute</span><span class="p">(</span><span class="n">encoded_calldata</span><span class="p">,</span> <span class="n">max_weight</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">address</span><span class="p">,</span>
            <span class="s2">&quot;nonce&quot;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="n">address</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="c1"># Sign transaction</span>
    <span class="n">signedTx</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">private_key</span><span class="p">)</span>
    <span class="c1"># Send tx</span>
    <span class="nb">hash</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signedTx</span><span class="o">.</span><span class="n">rawTransaction</span><span class="p">)</span>
    <span class="n">receipt</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction receipt: </span><span class="si">{</span><span class="w"> </span><span class="n">receipt</span><span class="o">.</span><span class="n">transactionHash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="w"> </span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">execute_xcm_message_locally</span><span class="p">()</span>
</code></pre></div> </div> </div> </div> <p>And that's it! You've successfully used the Polkadot XCM Pallet and the XCM Utilities Precompile to execute a custom XCM message locally on Moonbase Alpha!</p> <h2 id="send-xcm-message">Send an XCM Message Cross-Chain<a class="headerlink" href="#send-xcm-message" title="Permanent link">&para;</a></h2> <p>This section of the guide covers the process of sending a custom XCM message cross-chain (i.e., from Moonbeam to a target chain, such as the relay chain) via two different methods: the <code>send</code> function of the Polkadot XCM Pallet and the <code>xcmSend</code> function of the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/xcm-utils/" target="_blank">XCM Utilities Precompile</a>.</p> <p>For the XCM message to be successfully executed, the target chain needs to be able to understand the instructions in the message. If it doesn't, you'll see a <code>Barrier</code> filter on the destination chain. For security reasons, the XCM message is prepended with the <a href="https://github.com/paritytech/xcm-format#descendorigin" target="_blank"><code>DescendOrigin</code></a> instruction to prevent XCM execution on behalf of the origin chain Sovereign account. <strong>The example in this section will not work for the reasons mentioned above, it is purely for demonstration purposes</strong>.</p> <p>In the following example, you'll be building an XCM message that contains the following XCM instructions, which will be executed in the Alphanet relay chain:</p> <ul> <li><a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/#withdraw-asset" target="_blank"><code>WithdrawAsset</code></a> - removes assets and places them into the holding register</li> <li><a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/#buy-execution" target="_blank"><code>BuyExecution</code></a> - takes the assets from holding to pay for execution fees. The fees to pay are determined by the target chain</li> <li><a href="/moonbeam-mkdocs/builders/interoperability/xcm/core-concepts/instructions/#deposit-asset" target="_blank"><code>DepositAsset</code></a>- removes the assets from the holding register and deposits the equivalent assets to a beneficiary account</li> </ul> <p>Together, the intention of these instructions is to transfer the native asset of the relay chain, which is UNIT for the Alphanet relay chain, from Moonbase Alpha to an account on the relay chain. This example is for demonstration purposes only to show you how a custom XCM message could be sent cross-chain. Please keep in mind that the target chain needs to be able to understand the instructions in the message to execute them.</p> <h3 id="send-xcm-message-with-polkadotjs-api">Send an XCM Message with the Polkadot.js API<a class="headerlink" href="#send-xcm-message-with-polkadotjs-api" title="Permanent link">&para;</a></h3> <p>In this example, you'll send a custom XCM message from your account on Moonbase Alpha to the relay chain using the <a href="/moonbeam-mkdocs/builders/substrate/libraries/polkadot-js-api/" target="_blank">Polkadot.js API</a> to interact directly with the Polkadot XCM Pallet.</p> <p>The <code>send</code> function of the Polkadot XCM Pallet accepts two parameters: <code>dest</code> and <code>message</code>. You can start assembling these parameters by taking the following steps:</p> <ol> <li> <p>Build the multilocation of the relay chain token, UNIT, for the <code>dest</code>:</p> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
</code></pre></div> </li> <li> <p>Build the <code>WithdrawAsset</code> instruction, which will require you to define:</p> <ul> <li>The multilocation of the UNIT token on the relay chain</li> <li>The amount of UNIT tokens to withdraw</li> </ul> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">instr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">WithdrawAsset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">1000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 1 UNIT</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
</code></pre></div> </li> <li> <p>Build the <code>BuyExecution</code> instruction, which will require you to define:</p> <ul> <li>The multilocation of the UNIT token on the relay chain</li> <li>The amount of UNIT tokens to buy for execution</li> <li>The weight limit</li> </ul> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">instr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">BuyExecution</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">1000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 1 UNIT</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">Unlimited</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
</code></pre></div> </li> <li> <p>Build the <code>DepositAsset</code> instruction, which will require you to define:</p> <ul> <li>The asset identifier for UNIT tokens. You can use the <a href="https://github.com/paritytech/xcm-format/blob/master/README.md#6-universal-asset-identifiers" target="_blank"><code>WildAsset</code> format</a>, which allows for wildcard matching, to identify the asset</li> <li>The multilocation of the beneficiary account on the relay chain</li> </ul> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">instr3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DepositAsset</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assets</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Wild</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;All&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">beneficiary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">      </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">AccountId32</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">relayAccount</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div> </li> <li> <p>Combine the XCM instructions into a versioned XCM message:</p> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">instr1</span><span class="p">,</span><span class="w"> </span><span class="nx">instr2</span><span class="p">,</span><span class="w"> </span><span class="nx">instr3</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
</code></pre></div> </li> </ol> <p>Now that you have the values for each of the parameters, you can write the script to send the XCM message. You'll take the following steps:</p> <ol> <li>Provide the input data for the call. This includes:<ul> <li>The Moonbase Alpha endpoint URL to create the provider</li> <li>The values for each of the parameters of the <code>send</code> function</li> </ul> </li> <li>Create a Keyring instance that will be used to send the transaction</li> <li>Create the <a href="/moonbeam-mkdocs/builders/substrate/libraries/polkadot-js-api/" target="_blank">Polkadot.js API</a> provider</li> <li>Craft the <code>polkadotXcm.send</code> extrinsic with the <code>dest</code> and <code>message</code></li> <li>Send the transaction using the <code>signAndSend</code> extrinsic and the Keyring instance you created in the second step</li> </ol> <div class="admonition remember"> <p class="admonition-title">Remember</p> <p>This is for demo purposes only. Never store your private key in a JavaScript file.</p> </div> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">,</span><span class="w"> </span><span class="nx">Keyring</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Version 10.13.1</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">cryptoWaitReady</span><span class="p">,</span><span class="w"> </span><span class="nx">decodeAddress</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/util-crypto&#39;</span><span class="p">;</span>

<span class="c1">// 1. Input data</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">providerWsURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;wss://wss.api.moonbase.moonbeam.network&#39;</span><span class="p">;</span>
<span class="c1">// You can use the decodeAddress function to ensure that your address is properly</span>
<span class="c1">// decoded. If it isn&#39;t decoded, it will decode it and if it is, it will ignore it</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">relayAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">decodeAddress</span><span class="p">(</span><span class="s1">&#39;INSERT_ADDRESS&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">WithdrawAsset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">1000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 1 UNIT</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">BuyExecution</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">1000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 1 UNIT</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">Unlimited</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DepositAsset</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assets</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Wild</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;All&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">beneficiary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">      </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">AccountId32</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">relayAccount</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">instr1</span><span class="p">,</span><span class="w"> </span><span class="nx">instr2</span><span class="p">,</span><span class="w"> </span><span class="nx">instr3</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">sendXcmMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 2. Create Keyring instance</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">cryptoWaitReady</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">keyring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Keyring</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ethereum&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">alice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">keyring</span><span class="p">.</span><span class="nx">addFromUri</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 3. Create Substrate API Provider</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="nx">providerWsURL</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 4. Create the extrinsic</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">polkadotXcm</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 5. Send the transaction</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">txHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">signAndSend</span><span class="p">(</span><span class="nx">alice</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Submitted with hash </span><span class="si">${</span><span class="nx">txHash</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="nx">api</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">sendXcmMessage</span><span class="p">();</span>
</code></pre></div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>You can view an example of the above script, which sends 1 UNIT to Bob's relay chain account, on <a href="https://polkadot.js.org/apps/?rpc=wss://wss.api.moonbase.moonbeam.network#/extrinsics/decode/0x1c00040100040c0004010000070010a5d4e813010000070010a5d4e8000d0100010101000c36e9ba26fa63c60ec728fe75fe57b86a450d94e7fee7f9f9eddd0d3f400d67" target="_blank">Polkadot.js Apps</a> using the following encoded calldata: <code>0x1c00040100040c0004010000070010a5d4e813010000070010a5d4e8000d0100010101000c36e9ba26fa63c60ec728fe75fe57b86a450d94e7fee7f9f9eddd0d3f400d67</code>.</p> </div> <p>Once the transaction is processed, a <code>polkadotXcm.sent</code> event is emitted with the details of the sent XCM message.</p> <h3 id="send-xcm-utils-precompile">Send an XCM Message with the XCM Utilities Precompile<a class="headerlink" href="#send-xcm-utils-precompile" title="Permanent link">&para;</a></h3> <p>In this section, you'll use the <code>xcmSend</code> function of the <a href="/moonbeam-mkdocs/builders/interoperability/xcm/xcm-utils/" target="_blank">XCM Utilities Precompile</a>, which is only supported on Moonbase Alpha, to send an XCM message cross-chain. The XCM Utilities Precompile is located at the following address:</p> <div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio"><div class="tabbed-labels"><label for="__tabbed_6_1">Moonbase Alpha</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code>0x000000000000000000000000000000000000080C
</code></pre></div> </div> </div> </div> <p>Under the hood, the <code>xcmSend</code> function of the XCM Utilities Precompile calls the <code>send</code> function of the Polkadot XCM Pallet, which is a Substrate pallet that is coded in Rust. The benefit of using the XCM Utilities Precompile to call <code>xcmSend</code> is that you can do so via the Ethereum API and use Ethereum libraries like <a href="/moonbeam-mkdocs/builders/ethereum/libraries/ethersjs/" target="_blank">Ethers.js</a>. For the XCM message to be successfully executed, the target chain needs to be able to understand the instructions in the message.</p> <p>The <code>xcmSend</code> function accepts two parameters: the multilocation of the destination and the SCALE encoded versioned XCM message to be sent.</p> <p>First, you'll learn how to generate the encoded calldata for the XCM message, and then you'll learn how to use the encoded calldata to interact with the XCM Utilities Precompile.</p> <h4 id="generate-encoded-calldata">Generate the Encoded Calldata of an XCM Message<a class="headerlink" href="#generate-encoded-calldata" title="Permanent link">&para;</a></h4> <p>To get the encoded calldata of the XCM message, you can create a script similar to the one you created in the <a href="#send-xcm-message-with-polkadotjs-api">Send an XCM Message with the Polkadot.js API</a> section. Instead of building the message and sending the transaction, you'll build the message to get the encoded calldata. You'll take the following steps:</p> <ol> <li>Provide the input data for the call. This includes:<ul> <li>The Moonbase Alpha endpoint URL to create the provider</li> <li>The values for each of the parameters of the <code>send</code> function as defined in the <a href="#send-xcm-message-with-polkadotjs-api">Send an XCM Message with the Polkadot.js API</a> section</li> </ul> </li> <li>Create the <a href="/moonbeam-mkdocs/builders/substrate/libraries/polkadot-js-api/" target="_blank">Polkadot.js API</a> provider</li> <li>Craft the <code>polkadotXcm.execute</code> extrinsic with the <code>message</code> and <code>maxWeight</code></li> <li>Use the transaction to get the encoded calldata</li> </ol> <p>The entire script is as follows:</p> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">,</span><span class="w"> </span><span class="nx">WsProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/api&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Version 10.13.1</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">decodeAddress</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@polkadot/util-crypto&#39;</span><span class="p">;</span>

<span class="c1">// 1. Input data</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">providerWsURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;wss://wss.api.moonbase.moonbeam.network&#39;</span><span class="p">;</span>
<span class="c1">// You can use the decodeAddress function to ensure that your address is properly</span>
<span class="c1">// decoded. If it isn&#39;t decoded, it will decode it and if it is, it will ignore it</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">relayAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">decodeAddress</span><span class="p">(</span><span class="s1">&#39;INSERT_ADDRESS&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">WithdrawAsset</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">1000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 1 UNIT</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">BuyExecution</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">fun</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Fungible</span><span class="o">:</span><span class="w"> </span><span class="mi">1000000000000n</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// 1 UNIT</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">Unlimited</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">instr3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">DepositAsset</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assets</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Wild</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;All&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">beneficiary</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">parents</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">      </span><span class="nx">interior</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">X1</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">AccountId32</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">relayAccount</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">V4</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">instr1</span><span class="p">,</span><span class="w"> </span><span class="nx">instr2</span><span class="p">,</span><span class="w"> </span><span class="nx">instr3</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">generateEncodedXcmMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// 2. Create Substrate API Provider</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WsProvider</span><span class="p">(</span><span class="nx">providerWsURL</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">api</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ApiPromise</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span><span class="nx">provider</span><span class="o">:</span><span class="w"> </span><span class="nx">substrateProvider</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 3. Create the extrinsic</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">api</span><span class="p">.</span><span class="nx">tx</span><span class="p">.</span><span class="nx">polkadotXcm</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 4. Get the encoded XCM message</span>
<span class="w">  </span><span class="c1">// By using index 1, you&#39;ll get just the encoded XCM message.</span>
<span class="w">  </span><span class="c1">// If you wanted to get the dest, you could use index 0</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">encodedXcmMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">toHex</span><span class="p">();</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Encoded Calldata for XCM Message: </span><span class="si">${</span><span class="nx">encodedXcmMessage</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="nx">api</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
<span class="p">};</span>

<span class="nx">generateEncodedXcmMessage</span><span class="p">();</span>
</code></pre></div> <h4 id="send-xcm-message">Send the XCM Message<a class="headerlink" href="#send-xcm-message" title="Permanent link">&para;</a></h4> <p>Before you can send the XCM message, you'll also need to build the multilocation of the destination. For this example, you'll target the relay chain with Moonbase Alpha as the origin chain:</p> <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="c1">// Parents: 1 </span>
<span class="w">  </span><span class="p">[]</span><span class="w"> </span><span class="c1">// Interior: Here</span>
<span class="p">];</span>
</code></pre></div> <p>Now that you have the SCALE encoded XCM message and the destination multilocation, you can use the following code snippets to programmatically call the <code>xcmSend</code> function of the XCM Utilities Precompile using your <a href="/moonbeam-mkdocs/builders/ethereum/libraries/" target="_blank">Ethereum library</a> of choice. Generally speaking, you'll take the following steps:</p> <ol> <li>Create a provider and signer</li> <li>Create an instance of the XCM Utilities Precompile to interact with</li> <li>Define parameters required for the <code>xcmSend</code> function, which will be the destination and the encoded calldata for the XCM message</li> <li>Send the XCM message</li> </ol> <div class="admonition remember"> <p class="admonition-title">Remember</p> <p>The following snippets are for demo purposes only. Never store your private keys in a JavaScript or Python file.</p> </div> <div class="tabbed-set tabbed-alternate" data-tabs="7:3"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio"><input id="__tabbed_7_2" name="__tabbed_7" type="radio"><input id="__tabbed_7_3" name="__tabbed_7" type="radio"><div class="tabbed-labels"><label for="__tabbed_7_1">Ethers.js</label><label for="__tabbed_7_2">Web3.js</label><label for="__tabbed_7_3">Web3.py</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ethers</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;ethers&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import Ethers library</span>
<span class="k">import</span><span class="w"> </span><span class="nx">abi</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./xcmUtilsABI.js&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import the XCM Utilities Precompile ABI</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtilsAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;0x000000000000000000000000000000000000080C&#39;</span><span class="p">;</span>

<span class="cm">/* Create Ethers provider and signer */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;https://rpc.api.moonbase.moonbeam.network&#39;</span>
<span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">signer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>

<span class="cm">/* Create contract instance of the XCM Utilities Precompile */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span>
<span class="w">  </span><span class="nx">xcmUtilsAddress</span><span class="p">,</span>
<span class="w">  </span><span class="nx">abi</span><span class="p">,</span>
<span class="w">  </span><span class="nx">signer</span>
<span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">sendXcm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/* Define parameters required for the xcmSend function */</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">encodedCalldata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_ENCODED_CALLDATA&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="c1">// Parents: 1 </span>
<span class="w">    </span><span class="p">[]</span><span class="w"> </span><span class="c1">// Interior: Here</span>
<span class="w">  </span><span class="p">];</span>

<span class="w">  </span><span class="cm">/* Send the custom XCM message */</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="p">.</span><span class="nx">xcmSend</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="w"> </span><span class="nx">encodedCalldata</span><span class="p">);</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Transaction receipt: </span><span class="si">${</span><span class="nx">tx</span><span class="p">.</span><span class="nx">hash</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">sendXcm</span><span class="p">();</span>
</code></pre></div> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Web3</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;web3&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import Web3 library</span>
<span class="k">import</span><span class="w"> </span><span class="nx">abi</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./xcmUtilsABI.js&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import the XCM Utilities Precompile ABI</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">accountFrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">.</span><span class="nx">privateKeyToAccount</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">).</span><span class="nx">address</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtilsAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;0x000000000000000000000000000000000000080C&#39;</span><span class="p">;</span>

<span class="cm">/* Create Web3 provider */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">web3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Web3</span><span class="p">(</span><span class="s1">&#39;https://rpc.api.moonbase.moonbeam.network&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Change to network of choice</span>

<span class="cm">/* Create contract instance of the XCM Utilities Precompile */</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span>
<span class="w">  </span><span class="nx">abi</span><span class="p">,</span>
<span class="w">  </span><span class="nx">xcmUtilsAddress</span><span class="p">,</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="nx">accountFrom</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// &#39;from&#39; is necessary for gas estimation</span>
<span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">sendXcm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/* Define parameters required for the xcmSend function */</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">encodedCalldata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_ENCODED_CALLDATA&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="c1">// Parents: 1</span>
<span class="w">    </span><span class="p">[],</span><span class="w"> </span><span class="c1">// Interior: Here</span>
<span class="w">  </span><span class="p">];</span>

<span class="w">  </span><span class="cm">/* Send the custom XCM message */</span>
<span class="w">  </span><span class="c1">// Craft the extrinsic</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">xcmUtils</span><span class="p">.</span><span class="nx">methods</span><span class="p">.</span><span class="nx">xcmSend</span><span class="p">(</span><span class="nx">dest</span><span class="p">,</span><span class="w"> </span><span class="nx">encodedCalldata</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// Sign transaction</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">signedTx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">.</span><span class="nx">signTransaction</span><span class="p">(</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="nx">xcmUtilsAddress</span><span class="p">,</span>
<span class="w">      </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">encodeABI</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">gas</span><span class="o">:</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">estimateGas</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">gasPrice</span><span class="o">:</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">getGasPrice</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">nonce</span><span class="o">:</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">getTransactionCount</span><span class="p">(</span><span class="nx">accountFrom</span><span class="p">),</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">privateKey</span>
<span class="w">  </span><span class="p">);</span>
<span class="w">  </span><span class="c1">// Send the signed transaction</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sendTx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">sendSignedTransaction</span><span class="p">(</span><span class="nx">signedTx</span><span class="p">.</span><span class="nx">rawTransaction</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Transaction receipt: </span><span class="si">${</span><span class="nx">sendTx</span><span class="p">.</span><span class="nx">transactionHash</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">sendXcm</span><span class="p">();</span>
</code></pre></div> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">web3</span><span class="w"> </span><span class="kn">import</span> <span class="n">Web3</span>

<span class="n">abi</span> <span class="o">=</span> <span class="s2">&quot;INSERT_XCM_UTILS_ABI&quot;</span>  <span class="c1"># Paste or import the XCM Utils ABI</span>
<span class="c1"># This is for demo purposes, never store your private key in plain text</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="s2">&quot;INSERT_PRIVATE_KEY&quot;</span>
<span class="c1"># The wallet address that corresponds to your private key</span>
<span class="n">address</span> <span class="o">=</span> <span class="s2">&quot;INSERT_ADDRESS&quot;</span>
<span class="n">xcm_utils_address</span> <span class="o">=</span> <span class="s2">&quot;0x000000000000000000000000000000000000080C&quot;</span>

<span class="c1">## Create Web3 provider ##</span>
<span class="n">web3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s2">&quot;https://rpc.api.moonbase.moonbeam.network&quot;</span><span class="p">))</span>

<span class="c1">## Create contract instance of the XCM Utilities Precompile ##</span>
<span class="n">xcm_utils</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span>
    <span class="c1"># XCM Utilities Precompile address</span>
    <span class="n">address</span><span class="o">=</span><span class="n">xcm_utils_address</span><span class="p">,</span>
    <span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">send_xcm</span><span class="p">():</span>
    <span class="c1">## Define parameters required for the xcmSend function ##</span>
    <span class="n">encoded_calldata</span> <span class="o">=</span> <span class="s2">&quot;INSERT_ENCODED_CALLDATA&quot;</span>
    <span class="n">xcm_dest</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[]]</span>  <span class="c1"># Parents: 1  # Interior: Here</span>

    <span class="c1">## Send the custom XCM message ##</span>
    <span class="c1"># Craft the extrinsic</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">xcm_utils</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">xcmSend</span><span class="p">(</span><span class="n">xcm_dest</span><span class="p">,</span> <span class="n">encoded_calldata</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">address</span><span class="p">,</span>
            <span class="s2">&quot;nonce&quot;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="n">address</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="c1"># Sign transaction</span>
    <span class="n">signed_tx</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">private_key</span><span class="p">)</span>
    <span class="c1"># Send tx</span>
    <span class="nb">hash</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signed_tx</span><span class="o">.</span><span class="n">rawTransaction</span><span class="p">)</span>
    <span class="n">receipt</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transaction receipt: </span><span class="si">{</span><span class="w"> </span><span class="n">receipt</span><span class="o">.</span><span class="n">transactionHash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="w"> </span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">send_xcm</span><span class="p">()</span>
</code></pre></div> </div> </div> </div> <p>And that's it! You've successfully used the Polkadot XCM Pallet and the XCM Utilities Precompile to send a message from Moonbase Alpha to another chain!</p> <div class="md-source-file"> <small> <span class="source-file-label">Last update:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 9, 2026 21:59:31">February 9, 2026</span> <br> <span class="source-file-seperator">|</span> <span class="source-file-label">Created:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 9, 2026 21:59:31">February 9, 2026</span> </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class="md-footer"> <nav class="md-footer__inner md-grid" aria-label="footer.title"> <a href="../remote-execution/remote-evm-calls/" class="md-footer__link md-footer__link--prev" rel="prev"> <div class="md-footer__button md-icon"> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="122.883px" height="122.882px" viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M61.441,0c16.967,0,32.327,6.877,43.446,17.996c11.119,11.119,17.996,26.479,17.996,43.445 c0,16.966-6.877,32.326-17.996,43.445c-11.119,11.118-26.479,17.995-43.446,17.995c-16.966,0-32.326-6.877-43.445-17.995 C6.877,93.768,0,78.407,0,61.441c0-16.967,6.877-32.327,17.996-43.445C29.115,6.877,44.475,0,61.441,0L61.441,0z M71.377,42.166 c1.736-1.784,1.695-4.637-0.088-6.372s-4.637-1.696-6.373,0.088L43.078,58.402l3.23,3.142l-3.244-3.146 c-1.737,1.792-1.693,4.652,0.099,6.39c0.052,0.05,0.104,0.099,0.158,0.146l21.595,22.082c1.736,1.784,4.59,1.823,6.373,0.088 c1.783-1.734,1.824-4.588,0.088-6.372L52.598,61.531L71.377,42.166L71.377,42.166z M98.496,24.386 C89.014,14.903,75.912,9.038,61.441,9.038s-27.572,5.865-37.055,15.348C14.903,33.869,9.038,46.97,9.038,61.441 c0,14.471,5.865,27.572,15.349,37.055c9.482,9.483,22.583,15.349,37.055,15.349s27.573-5.865,37.055-15.349 c9.484-9.482,15.35-22.584,15.35-37.055C113.846,46.97,107.98,33.869,98.496,24.386L98.496,24.386z"/></g></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Previous </span> <span class="md-footer__page-name"> Remote EVM Calls </span> </div> </a> <a href="../xcm-utils/" class="md-footer__link md-footer__link--next" rel="next"> <div class="md-footer__title"> <span class="md-footer__direction"> Next </span> <span class="md-footer__page-name"> XCM Utilities </span> </div> <div class="md-footer__button md-icon"> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="122.883px" height="122.882px" viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M61.441,0C44.475,0,29.115,6.877,17.996,17.996C6.877,29.115,0,44.475,0,61.441c0,16.966,6.877,32.326,17.996,43.445 c11.119,11.118,26.479,17.995,43.445,17.995c16.967,0,32.327-6.877,43.446-17.995c11.119-11.119,17.996-26.479,17.996-43.445 c0-16.967-6.877-32.327-17.996-43.445C93.768,6.877,78.408,0,61.441,0L61.441,0z M51.505,42.166 c-1.735-1.784-1.696-4.637,0.088-6.372c1.784-1.735,4.637-1.696,6.373,0.088l21.839,22.521l-3.23,3.142l3.244-3.146 c1.738,1.792,1.693,4.652-0.098,6.39c-0.053,0.05-0.105,0.099-0.158,0.146L57.966,87.017c-1.735,1.784-4.588,1.823-6.373,0.088 c-1.784-1.734-1.823-4.588-0.088-6.372l18.78-19.201L51.505,42.166L51.505,42.166z M24.386,24.386 C33.869,14.903,46.97,9.038,61.441,9.038c14.471,0,27.573,5.865,37.055,15.348c9.484,9.483,15.35,22.584,15.35,37.056 c0,14.471-5.865,27.572-15.35,37.055c-9.482,9.483-22.584,15.349-37.055,15.349c-14.471,0-27.572-5.865-37.055-15.349 C14.903,89.014,9.038,75.912,9.038,61.441C9.038,46.97,14.903,33.869,24.386,24.386L24.386,24.386z"/></g></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="column llms-wrapper"> <p class="llms-title"> AI-Compatible Docs </p> <div class="llms-options"> <a class="llms-link" href="/llms.txt">llms.txt</a> <a class="llms-link" href="/llms-full.txt">llms-full.txt</a> <a class="llms-link" href="/ai-resources/ai-resources/">LLMs By Topic</a> </div> </div> <div class="column social"> <div class="md-social"> <a href="https://discord.com/invite/PfpUATX" target="_blank" rel="noopener" title="Discord" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href="https://t.me/Moonbeam_Official" target="_blank" rel="noopener" title="Telegram" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M256 8a248 248 0 1 0 0 496 248 248 0 1 0 0-496m115 168.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7.2-.7.3-3.1-1.2-4.4s-3.6-.8-5.1-.5c-2.2.5-37.1 23.5-104.6 69.1-9.9 6.8-18.9 10.1-26.9 9.9-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3.6-4.5 6.7-9 18.4-13.7 72.3-31.5 120.5-52.3 144.6-62.3 68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6.5 9.6 2.9 2 1.7 3.2 4.1 3.5 6.7.5 3.2.6 6.5.4 9.8z"/></svg> </a> <a href="https://x.com/MoonbeamNetwork" target="_blank" rel="noopener" title="Twitter" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg> </a> <a href="https://www.youtube.com/c/MoonbeamNetwork" target="_blank" rel="noopener" title="YouTube" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"/></svg> </a> <a href="https://github.com/moonbeam-foundation/moonbeam" target="_blank" rel="noopener" title="GitHub" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> <div class="md-footer-copyright"> <div class="copyright-wrapper"> <div class="md-footer-copyright__highlight"> © 2026 Moonbeam Foundation. All Rights Reserved. </div> <div class="papermoon"> <span> Made with 🩵 by <a href="https://papermoon.io/" target="_blank">PaperMoon</a> </span> </div> <div class="policy-links"> <a href="https://moonbeam.network/terms-of-use" target="_blank">Terms of use</a> <a href="https://moonbeam.network/privacy-policy" target="_blank">Privacy policy</a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-consent" data-md-component="consent" id="__consent" hidden> <div class="md-consent__overlay"></div> <aside class="md-consent__inner"> <form class="md-consent__form md-grid md-typeset" name="consent"> <form class="md-consent__form md-grid md-typeset"><div class="cookie-logo"> <img src="../../../..assets/images/Moonbeam_Icon_White.webp" alt="Moonbeam logo for Cookie consent"> </div><div class="cookie-content"> <h4>This website uses cookies</h4> <p>We use essential cookies to make the website work. We would also like to use cookies to understand how you use the website and how you interact with certain features. We may share this information with our analytics partners. For further details, please see our <a href="https://moonbeam.network/cookie-policy" target="_blank" rel="noopener">cookie policy</a>. </p><input class="md-toggle" type="checkbox" id="__settings"><div class="md-consent__settings"> <ul class="task-list"> <li class="task-list-item"> <label class="task-list-control"> <input type="checkbox" name="analytics" checked> <span class="task-list-indicator"></span> Google Analytics </label> </li> </ul> </div> </div><div class="cookie-buttons md-consent__controls"> <button class="md-button md-button--primary">Accept</button> <label class="md-button" for="__settings">Manage settings</label> <button type="reset" class="md-button md-button--secondary">Reject</button> </div> </form> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.prune", "content.code.copy", "announce.dismiss", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script> <script src="../../../../js/connectMetaMask.min.js"></script> <script src="../../../../js/errorModal.min.js"></script> <script src="../../../../js/networkModal.min.js"></script> <script src="../../../../js/handleLanguageChange.min.js"></script> <script src="../../../../js/fixCreatedDate.min.js"></script> <script src="../../../../js/externalLinkModal.min.js"></script> <script src="../../../../js/cookbookInit.min.js"></script> <script src="../../../../js/clipboardCopyllms.min.js"></script> <script src="../../../../js/cookbookEventHandler.js"></script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      const copyTxtFile = async (url) => {
        try {
            const response = await fetch(url);
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const text = await response.text();
            await navigator.clipboard.writeText(text);

            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.add('md-dialog--active');

              const copiedToClipboardMessage =
                copiedToClipboard.querySelector('.md-dialog__inner');
              if (
                copiedToClipboardMessage &&
                copiedToClipboardMessage.textContent !==
                  "Copied to clipboard"
              ) {
                copiedToClipboardMessage.textContent =
                  "Copied to clipboard";
              }
              // Set a timer to remove the after 2 seconds (2000ms)
              setTimeout(() => {
                copiedToClipboard.classList.remove('md-dialog--active');
              }, 2000);
            }
          } catch (err) {
            console.error('Failed to copy:', err);
            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.remove('md-dialog--active');
            }
          }
      }

      document.querySelectorAll('.llms').forEach(button => {
        button.addEventListener('click', (event) => {
          event.preventDefault(); // Prevent default link behavior

          const action = button.getAttribute('data-action');
          const fileName = button.getAttribute('data-value');
          if (!fileName) return; // Exit if no file name is found

          // Add 'llms-files/' prefix except for root-level llms.txt and llms-full.txt
          const filePath = (fileName === "llms.txt" || fileName === "llms-full.txt") 
            ? fileName 
            : `llms-files/${fileName}`;
          const url = `https://docs.moonbeam.network/${filePath}`;

          if (action === 'copy') {
            copyTxtFile(url);
          }
        })
      })
    });
  </script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>