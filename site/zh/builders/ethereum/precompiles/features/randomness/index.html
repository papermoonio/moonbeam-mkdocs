<!doctype html><html lang="zh" class="no-js"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="了解 Moonbeam 上 VRF 随机性的来源，以及如何使用随机性预编译和消费者接口来生成链上随机性。"><link rel="canonical" href="https://docs.moonbeam.network/zh/builders/ethereum/precompiles/features/randomness/"><link rel="prev" href="../governance/referenda/"><link rel="next" href="../staking/"><link rel="icon" href="/assets/images/favicon.webp"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15"><meta name="keywords" content="solidity, ethereum, randomness, VRF, moonbeam, precompiled, contracts"><title>随机性预编译 | Moonbeam Docs</title><link rel="stylesheet" href="../../../../../../assets/stylesheets/main.342714a4.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js" as="script"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Banana+Grotesk:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Banana Grotesk";--md-code-font:"Roboto Mono"}</style><link rel="preconnect" href="https://fonts.googleapis.com"><link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel="stylesheet"><link rel="stylesheet" href="/assets/stylesheets/moonbeam.min.css"><link rel="stylesheet" href="/assets/stylesheets/termynal.min.css"><link rel="stylesheet" href="/assets/stylesheets/timeline-neoteroi.min.css"><script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-5ZBERCXWC3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-5ZBERCXWC3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-5ZBERCXWC3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><link href="../../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src="../../../../../../assets/javascripts/glightbox.min.js"></script><script>window.__externalLinkModalStrings={"zh": {"header": "external_link_modal.header", "message": "external_link_modal.message", "cancel": "external_link_modal.cancel", "continue": "external_link_modal.continue"}};</script></head> <body dir="ltr"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#_1" class="md-skip"> 跳转至 </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="标题"> <div class="md-header__left-nav"> <a href="https://docs.moonbeam.network/" title="Moonbeam Docs" class="md-header__button md-logo" aria-label="Moonbeam Docs"> <img src="/assets/images/logo.webp" alt="logo"> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> </div> <div class="md-header__buttons"> <nav class="md-tabs" aria-label="标签" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../">构建者</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../get-started/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/get-started.webp" alt="快速入门" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">快速入门</span> <p class="dropdown-desc">开始构建所需的一切</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../build/historical-updates/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/build.webp" alt="构建" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">构建</span> <p class="dropdown-desc"></p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/ethereum.webp" alt="以太坊工具包" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">以太坊工具包</span> <p class="dropdown-desc">Ethereum 库、工具和合约</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../substrate/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/substrate.webp" alt="Substrate 工具包" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Substrate 工具包</span> <p class="dropdown-desc">Substrate 库、工具和底层接口</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../interoperability/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/interoperability.webp" alt="互操作性" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">互操作性</span> <p class="dropdown-desc">用于跨链开发的 GMP 协议</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../integrations/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/integrations.webp" alt="集成" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">集成</span> <p class="dropdown-desc">要集成的工具和协议</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../node-operators/">节点运营商</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../node-operators/networks/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/networks.webp" alt="网络" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">网络</span> <p class="dropdown-desc">运行完整节点、追踪节点或收集人节点</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../tokens/">代币</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../tokens/connect/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/connect.webp" alt="连接" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">连接</span> <p class="dropdown-desc">将您的钱包连接到 Moonbeam</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../tokens/manage/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/manage.webp" alt="管理" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">管理</span> <p class="dropdown-desc">高级帐户和身份服务</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../tokens/staking/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/staking.webp" alt="质押" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">质押</span> <p class="dropdown-desc">通过委托给收集人来质押代币</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../tokens/governance/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/governance.webp" alt="治理" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">治理</span> <p class="dropdown-desc">提交和投票参与链上提案</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../learn/">学习</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../learn/core-concepts/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/core-concepts.webp" alt="核心概念" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">核心概念</span> <p class="dropdown-desc">了解 Moonbeam 的基础知识</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../learn/features/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/features.webp" alt="特性" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">特性</span> <p class="dropdown-desc"></p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../learn/dapp-directory/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/dapp-directory.webp" alt="DApp 目录" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">DApp 目录</span> <p class="dropdown-desc">浏览 DApp 目录和列表流程</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../tutorials/">教程</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../tutorials/eth-api/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/eth-api.webp" alt="以太坊 API" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">以太坊 API</span> <p class="dropdown-desc">从入门到专业的智能合约教程</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../tutorials/integrations/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/integrations.webp" alt="集成" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">集成</span> <p class="dropdown-desc">通过无缝集成教程深入了解</p> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class="language-picker" data-md-component="language"> <button class="language-picker__toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="选择当前语言"> <span class="language-picker__icon" aria-hidden="true"> <svg viewbox="0 0 24 24" role="img" focusable="false"> <path fill="currentColor" d="M12.87 15.07L10.33 12.5l.03-.03A19.79 19.79 0 0013.5 7h3V5h-7V3H8v2H1v2h11.17a17.77 17.77 0 01-2.64 4.49 17.91 17.91 0 01-3.11-4.49H3.62a19.91 19.91 0 003.95 5.61L2.1 19.37 3.5 20.8l4.9-4.9 3.57 3.55zM18.5 10h-2L12 22h2l1-2h6l1 2h2zm-2.62 8l2.12-4.67L20.12 18z"/> </svg> </span> <span class="language-picker__label">中文</span> <span class="language-picker__chevron" aria-hidden="true"> <svg viewbox="0 0 24 24" role="img" focusable="false"> <path fill="currentColor" d="M7 10l5 5 5-5z"/> </svg> </span> </button> <div class="language-picker__menu" role="menu"> <ul> <li> <a href="./" hreflang="zh" role="menuitem" aria-label="Chinese" class="is-active"> <span class="language-picker__code">中文</span> </a> </li> <li> <a href="../../../../../../builders/ethereum/precompiles/features/randomness/" hreflang="en" role="menuitem" aria-label="English" class> <span class="language-picker__code">EN</span> </a> </li> </ul> </div> </div> <a href="#" class="md-header__button md-button connectMetaMask-nav md-typeset"> 连接钱包 </a> <a class="md-header__button md-button faucet md-typeset" href="https://faucet.moonbeam.network/" target="_blank"> 水龙头 </a> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class="md-search__options" aria-label="搜索"> <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> 正在初始化搜索引擎 </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../../../../" title="Moonbeam Docs" class="md-nav__button md-logo" aria-label="Moonbeam Docs" data-md-component="logo"> <img src="/assets/images/logo.webp" alt="logo"> </a> </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../" class="md-nav__link"> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../../../">构建者</a> <label for="__nav_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../get-started/">快速入门</a> <label for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-get-started-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../get-started/quick-start/" class="md-nav__link"> 快速开始 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../get-started/networks/">网络</a> <label for="__nav_2_2_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_2_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-get-started-networks-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../get-started/networks/moonbeam-dev/" class="md-nav__link"> 本地 Moonbeam 开发节点 </a> </li> <li class="md-nav__item"> <a href="../../../../get-started/networks/moonbase/" class="md-nav__link"> Moonbase Alpha </a> </li> <li class="md-nav__item"> <a href="../../../../get-started/networks/moonriver/" class="md-nav__link"> Moonriver </a> </li> <li class="md-nav__item"> <a href="../../../../get-started/networks/moonbeam/" class="md-nav__link"> Moonbeam </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../get-started/endpoints/" class="md-nav__link"> 网络 RPC 端点 </a> </li> <li class="md-nav__item"> <a href="../../../../get-started/explorers/" class="md-nav__link"> 区块浏览器 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3"> <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0"> 构建 <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> </label> <li class="md-nav__item"> <a href="../../../../build/historical-updates/" class="md-nav__link"> 历史更新 </a> </li> <li class="md-nav__item"> <a href="../../../../build/runtime-upgrades/" class="md-nav__link"> 运行时升级 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../../">以太坊工具包</a> <label for="__nav_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../canonical-contracts/" class="md-nav__link"> 规范合约 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../">预编译合约</a> <label for="__nav_2_4_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_4_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../account/">账户管理</a> <label for="__nav_2_4_3_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-account-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../account/identity/" class="md-nav__link"> 身份 </a> </li> <li class="md-nav__item"> <a href="../../account/proxy/" class="md-nav__link"> 代理 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../ux/">用户体验</a> <label for="__nav_2_4_3_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-ux-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../ux/batch/" class="md-nav__link"> 批量 </a> </li> <li class="md-nav__item"> <a href="../../ux/call-permit/" class="md-nav__link"> 调用许可 </a> </li> <li class="md-nav__item"> <a href="../../ux/erc20/" class="md-nav__link"> 原生代币 ERC-20 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_5" checked> <div class="md-nav__link md-nav__link--index "> <a href="../">网络特性</a> <label for="__nav_2_4_3_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_5_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_4_3_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../governance/">Governance</a> <label for="__nav_2_4_3_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-features-governance-" data-md-scrollfix> <li class="md-nav__item"> <a href="../governance/collective/" class="md-nav__link"> Collective </a> </li> <li class="md-nav__item"> <a href="../governance/conviction-voting/" class="md-nav__link"> Conviction Voting </a> </li> <li class="md-nav__item"> <a href="../governance/preimage/" class="md-nav__link"> Preimage </a> </li> <li class="md-nav__item"> <a href="../governance/referenda/" class="md-nav__link"> Referenda </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> 随机性 <span class="md-nav__icon md-icon"></span> </label> <div class="md-nav__link-wrapper md-nav__item md-nav__item--active"> <a href="./" class="md-nav__link md-nav__link--active"> 随机性 </a> </div> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  material_overrides.partials.toc.permission_is_hereby_granted_free_of_charge_to_any_person_obtaining_a_copy_of_this_software_and_associated_documentation_files_the_software_to_deal_in_the_software_without_restriction_including_without_limitation_the_rights_to_use_copy_modify_merge_publish_distribute_sublicense_and_or_sell_copies_of_the_software_and_to_permit_persons_to_whom_the_software_is_furnished_to_do_so_subject_to_the_following_conditions_the_above_copyright_notice_and_this_permission_notice_shall_be_included_in_all_copies_or_substantial_portions_of_the_software_the_software_is_provided_as_is_without_warranty_of_any_kind_express_or_implied_including_but_not_limited_to_the_warranties_of_merchantability_fitness_for_a_particular_purpose_and_non_infringement_in_no_event_shall_the_authors_or_copyright_holders_be_liable_for_any_claim_damages_or_other_liability_whether_in_an_action_of_contract_tort_or_otherwise_arising_from_out_of_or_in_connection_with_the_software_or_the_use_or_other_dealings_in_the_software

<!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> <div class="toc-sections-title">Sections</div> </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#introduction" class="md-nav__link"> <span class="md-ellipsis"> 简介 </span> </a> </li> <li class="md-nav__item"> <a href="#the-randomness-interface" class="md-nav__link"> <span class="md-ellipsis"> 随机数Solidity接口 </span> </a> <nav class="md-nav" aria-label="随机数Solidity接口"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#functions" class="md-nav__link"> <span class="md-ellipsis"> 函数 </span> </a> </li> <li class="md-nav__item"> <a href="#constants" class="md-nav__link"> <span class="md-ellipsis"> 常量 </span> </a> </li> <li class="md-nav__item"> <a href="#events" class="md-nav__link"> <span class="md-ellipsis"> 事件 </span> </a> </li> <li class="md-nav__item"> <a href="#enums" class="md-nav__link"> <span class="md-ellipsis"> 枚举 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#randomness-consumer-solidity-interface" class="md-nav__link"> <span class="md-ellipsis"> 随机数消费者Solidity接口 </span> </a> </li> <li class="md-nav__item"> <a href="#request-and-fulfill-process" class="md-nav__link"> <span class="md-ellipsis"> 请求与完成过程 </span> </a> </li> <li class="md-nav__item"> <a href="#interact-with-the-solidity-interfaces" class="md-nav__link"> <span class="md-ellipsis"> 使用随机性预编译生成随机数 </span> </a> <nav class="md-nav" aria-label="使用随机性预编译生成随机数"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#checking-prerequisites" class="md-nav__link"> <span class="md-ellipsis"> 检查先决条件 </span> </a> </li> <li class="md-nav__item"> <a href="#create-random-generator-contract" class="md-nav__link"> <span class="md-ellipsis"> 创建随机数生成器合约 </span> </a> </li> <li class="md-nav__item"> <a href="#remix-set-up" class="md-nav__link"> <span class="md-ellipsis"> Remix设置 </span> </a> </li> <li class="md-nav__item"> <a href="#compile-deploy-random-number" class="md-nav__link"> <span class="md-ellipsis"> 编译和部署随机数生成器合约 </span> </a> </li> <li class="md-nav__item"> <a href="#request-randomness" class="md-nav__link"> <span class="md-ellipsis"> 提交生成随机数的请求 </span> </a> </li> <li class="md-nav__item"> <a href="#fulfill-request-save-number" class="md-nav__link"> <span class="md-ellipsis"> 履行请求并保存随机数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#interact-directly" class="md-nav__link"> <span class="md-ellipsis"> 使用 Remix 直接与随机数预编译合约交互 </span> </a> <nav class="md-nav" aria-label="使用 Remix 直接与随机数预编译合约交互"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#remix-set-up" class="md-nav__link"> <span class="md-ellipsis"> Remix 设置 </span> </a> </li> <li class="md-nav__item"> <a href="#compile-randomness" class="md-nav__link"> <span class="md-ellipsis"> 编译与访问随机数预编译 </span> </a> </li> <li class="md-nav__item"> <a href="#get-request-status-and-purge" class="md-nav__link"> <span class="md-ellipsis"> 获取请求状态和清除过期请求 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../staking/" class="md-nav__link"> 质押功能 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../interoperability/">互操作性</a> <label for="__nav_2_4_3_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-interoperability-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../interoperability/gmp/" class="md-nav__link"> GMP </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/" class="md-nav__link"> X 代币 </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xc20/send-xc20s/eth-api/" class="md-nav__link"> XCM 接口 </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/" class="md-nav__link"> XCM 转账器 </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xcm-utils/" class="md-nav__link"> XCM 实用工具 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../utility/">实用工具</a> <label for="__nav_2_4_3_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-utility-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../utility/eth-mainnet/" class="md-nav__link"> 以太坊原生 </a> </li> <li class="md-nav__item"> <a href="../../utility/registry/" class="md-nav__link"> 预编译注册表 </a> </li> <li class="md-nav__item"> <a href="../../utility/relay-data-verifier/" class="md-nav__link"> 中继数据验证器 </a> </li> <li class="md-nav__item"> <a href="../../utility/non-specific/" class="md-nav__link"> 非网络特定 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../libraries/">库</a> <label for="__nav_2_4_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-libraries-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../libraries/ethersjs/" class="md-nav__link"> Ethers.js </a> </li> <li class="md-nav__item"> <a href="../../../libraries/viem/" class="md-nav__link"> viem </a> </li> <li class="md-nav__item"> <a href="../../../libraries/web3py/" class="md-nav__link"> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../dev-env/">开发环境</a> <label for="__nav_2_4_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-dev-env-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../dev-env/foundry/" class="md-nav__link"> Foundry </a> </li> <li class="md-nav__item"> <a href="../../../dev-env/hardhat/" class="md-nav__link"> Hardhat </a> </li> <li class="md-nav__item"> <a href="../../../dev-env/remix/" class="md-nav__link"> Remix </a> </li> <li class="md-nav__item"> <a href="../../../dev-env/tenderly/" class="md-nav__link"> Tenderly </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../verify-contracts/">验证合约</a> <label for="__nav_2_4_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-verify-contracts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../verify-contracts/block-explorers/" class="md-nav__link"> 区块浏览器 </a> </li> <li class="md-nav__item"> <a href="../../../verify-contracts/etherscan-plugins/" class="md-nav__link"> Etherscan 插件 </a> </li> <li class="md-nav__item"> <a href="../../../verify-contracts/api-verification/" class="md-nav__link"> 基于 API 的验证 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../../json-rpc/">JSON-RPC 接口</a> <label for="__nav_2_4_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-json-rpc-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../json-rpc/eth-rpc/" class="md-nav__link"> 标准以太坊 </a> </li> <li class="md-nav__item"> <a href="../../../json-rpc/debug-trace/" class="md-nav__link"> 非标准以太坊: 追踪 </a> </li> <li class="md-nav__item"> <a href="../../../json-rpc/pubsub/" class="md-nav__link"> 非标准以太坊: 发布订阅 </a> </li> <li class="md-nav__item"> <a href="../../../json-rpc/moonbeam-custom-api/" class="md-nav__link"> 自定义 Moonbeam </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../substrate/">Substrate 工具包</a> <label for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-substrate-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../substrate/libraries/">库</a> <label for="__nav_2_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-substrate-libraries-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../substrate/libraries/polkadot-js-api/" class="md-nav__link"> Polkadot.js API </a> </li> <li class="md-nav__item"> <a href="../../../../substrate/libraries/py-substrate-interface/" class="md-nav__link"> Py Substrate Interface </a> </li> <li class="md-nav__item"> <a href="../../../../substrate/libraries/sidecar/" class="md-nav__link"> Sidecar </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../substrate/dev-env/">开发环境</a> <label for="__nav_2_5_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-substrate-dev-env-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../substrate/dev-env/chopsticks/" class="md-nav__link"> Chopsticks </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/">互操作性</a> <label for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/xcm/">XCM 互操作性</a> <label for="__nav_2_6_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/overview/" class="md-nav__link"> 概览 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/xcm/core-concepts/">核心概念</a> <label for="__nav_2_6_2_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-core-concepts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/core-concepts/instructions/" class="md-nav__link"> XCM 指令 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/core-concepts/multilocations/" class="md-nav__link"> 多位置 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/core-concepts/weights-fees/" class="md-nav__link"> 权重和费用 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/core-concepts/sovereign-accounts/" class="md-nav__link"> 主权账户 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/xcm/xc-registration/">XC 注册</a> <label for="__nav_2_6_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-xc-registration-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc-registration/forum-templates/" class="md-nav__link"> 论坛模板 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc-registration/xc-integration/" class="md-nav__link"> XC 通道注册 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc-registration/assets/" class="md-nav__link"> 通过治理的 XC 资产注册 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc-registration/self-serve-asset-registration/" class="md-nav__link"> 自助资产注册 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/xcm/xc20/">XC-20s</a> <label for="__nav_2_6_2_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-xc20-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc20/overview/" class="md-nav__link"> 概览 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc20/interact/" class="md-nav__link"> 与 XC-20s 交互 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_5_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/xcm/xc20/send-xc20s/">发送 XC-20s</a> <label for="__nav_2_6_2_5_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_6_2_5_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_5_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-xc20-send-xc20s-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc20/send-xc20s/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc20/send-xc20s/xcm-pallet/" class="md-nav__link"> 使用 Substrate API：Polkadot XCM Pallet </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc20/send-xc20s/xtokens-precompile/" class="md-nav__link"> 使用 Ethereum API：X-Tokens Precompile </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xc20/send-xc20s/eth-api/" class="md-nav__link"> 使用 Ethereum API：XCM Precompile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/xcm/remote-execution/">远程执行</a> <label for="__nav_2_6_2_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-remote-execution-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/remote-execution/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/remote-execution/computed-origins/" class="md-nav__link"> 计算来源账户 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_6_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/xcm/remote-execution/substrate-calls/">远程 Substrate 调用</a> <label for="__nav_2_6_2_6_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_6_2_6_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_6_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-remote-execution-substrate-calls-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/" class="md-nav__link"> 使用 Substrate API </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/" class="md-nav__link"> 使用以太坊 API </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/remote-execution/remote-evm-calls/" class="md-nav__link"> 远程 EVM 调用 </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="https://moonbeam-foundation.github.io/xcm-sdk/latest/" class="md-nav__link"> XCM SDK </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/send-execute-xcm/" class="md-nav__link"> 发送、执行和测试 XCM </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/xcm/xcm-utils/" class="md-nav__link"> XCM 实用工具 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../interoperability/protocols/">跨链协议</a> <label for="__nav_2_6_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-protocols-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../interoperability/protocols/axelar/" class="md-nav__link"> Axelar </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/protocols/hyperlane/" class="md-nav__link"> Hyperlane </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/protocols/layerzero/" class="md-nav__link"> LayerZero </a> </li> <li class="md-nav__item"> <a href="../../../../interoperability/protocols/wormhole/" class="md-nav__link"> Wormhole </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../interoperability/mrl/" class="md-nav__link"> Moonbeam 路由流动性 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../integrations/">集成</a> <label for="__nav_2_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../integrations/indexers/">索引器</a> <label for="__nav_2_7_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_7_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-integrations-indexers-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../integrations/indexers/covalent/" class="md-nav__link"> GoldRush API </a> </li> <li class="md-nav__item"> <a href="../../../../integrations/indexers/subquery/" class="md-nav__link"> SubQuery </a> </li> <li class="md-nav__item"> <a href="../../../../integrations/indexers/subsquid/" class="md-nav__link"> SQD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../integrations/oracles/">预言机</a> <label for="__nav_2_7_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_7_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-integrations-oracles-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../integrations/oracles/api3/" class="md-nav__link"> API3 </a> </li> <li class="md-nav__item"> <a href="../../../../integrations/oracles/dia/" class="md-nav__link"> DIA </a> </li> <li class="md-nav__item"> <a href="../../../../integrations/oracles/supra/" class="md-nav__link"> Supra </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../node-operators/">节点运营商</a> <label for="__nav_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../node-operators/networks/">网络</a> <label for="__nav_3_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-networks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../node-operators/networks/run-a-node/">运行一个节点</a> <label for="__nav_3_2_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-networks-run-a-node-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/run-a-node/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/run-a-node/docker/" class="md-nav__link"> 使用 Docker </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/run-a-node/systemd/" class="md-nav__link"> 使用 Systemd </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/run-a-node/flags/" class="md-nav__link"> 标志 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/run-a-node/compile-binary/" class="md-nav__link"> 编译二进制文件 </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/tracing-node/" class="md-nav__link"> 运行追踪节点 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../node-operators/networks/collators/">校对者</a> <label for="__nav_3_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-networks-collators-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/collators/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/collators/faq/" class="md-nav__link"> 常见问题 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/collators/requirements/" class="md-nav__link"> 要求 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/collators/account-management/" class="md-nav__link"> 账户管理 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/collators/author-mapping/" class="md-nav__link"> 作者映射预编译 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/collators/activities/" class="md-nav__link"> 校对者活动 </a> </li> <li class="md-nav__item"> <a href="../../../../../node-operators/networks/collators/orbiter/" class="md-nav__link"> 轨道器计划 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tokens/">代币</a> <label for="__nav_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tokens/connect/">连接</a> <label for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-connect-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../tokens/connect/ledger/" class="md-nav__link"> Ledger </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/connect/metamask/" class="md-nav__link"> MetaMask </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/connect/polkadotjs/" class="md-nav__link"> Polkadot.js 应用 </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/connect/subwallet/" class="md-nav__link"> SubWallet </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/connect/talisman/" class="md-nav__link"> Talisman </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/connect/trezor/" class="md-nav__link"> Trezor </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/connect/on-ramps/" class="md-nav__link"> 入金渠道 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tokens/manage/">管理</a> <label for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-manage-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../tokens/manage/proxy-accounts/" class="md-nav__link"> 代理账户 </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/manage/multisig-safe/" class="md-nav__link"> Moonbeam Safe </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/manage/identity/" class="md-nav__link"> 身份管理 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tokens/staking/">质押</a> <label for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-staking-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../tokens/staking/stake/" class="md-nav__link"> 如何质押 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tokens/governance/">治理</a> <label for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-governance-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../tokens/governance/proposals/" class="md-nav__link"> 提交民主提案 </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/governance/voting/" class="md-nav__link"> 对提案投票 </a> </li> <li class="md-nav__item"> <a href="../../../../../tokens/governance/treasury-spend/" class="md-nav__link"> 提交国库提案 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../learn/">学习</a> <label for="__nav_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../learn/core-concepts/">核心概念</a> <label for="__nav_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-learn-core-concepts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../learn/core-concepts/balances/" class="md-nav__link"> 账户余额 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/core-concepts/transfers-api/" class="md-nav__link"> 余额转账 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/core-concepts/consensus-finality/" class="md-nav__link"> 共识与最终性 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/core-concepts/tx-fees/" class="md-nav__link"> 交易费用 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/core-concepts/unified-accounts/" class="md-nav__link"> 统一账户 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/core-concepts/security/" class="md-nav__link"> 安全注意事项 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/core-concepts/glossary/" class="md-nav__link"> 术语表 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../learn/features/">特性</a> <label for="__nav_5_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-learn-features-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../learn/features/eth-compatibility/" class="md-nav__link"> 以太坊兼容性 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/features/governance/" class="md-nav__link"> 治理 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/features/randomness/" class="md-nav__link"> 随机性 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/features/staking/" class="md-nav__link"> 质押 </a> </li> <li class="md-nav__item"> <a href="../../../../../learn/features/treasury/" class="md-nav__link"> 国库 </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../../learn/dapp-directory/" class="md-nav__link"> DApp 目录 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tutorials/">教程</a> <label for="__nav_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tutorials-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tutorials/eth-api/">以太坊 API</a> <label for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tutorials-eth-api-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../tutorials/eth-api/using-tenderly/" class="md-nav__link"> [Tenderly] 使用 Tenderly 调试和模拟交易 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../tutorials/integrations/">集成</a> <label for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tutorials-integrations-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../tutorials/integrations/0xgasless/" class="md-nav__link"> 启用无 Gas 交易 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"><!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  material_overrides.partials.toc.permission_is_hereby_granted_free_of_charge_to_any_person_obtaining_a_copy_of_this_software_and_associated_documentation_files_the_software_to_deal_in_the_software_without_restriction_including_without_limitation_the_rights_to_use_copy_modify_merge_publish_distribute_sublicense_and_or_sell_copies_of_the_software_and_to_permit_persons_to_whom_the_software_is_furnished_to_do_so_subject_to_the_following_conditions_the_above_copyright_notice_and_this_permission_notice_shall_be_included_in_all_copies_or_substantial_portions_of_the_software_the_software_is_provided_as_is_without_warranty_of_any_kind_express_or_implied_including_but_not_limited_to_the_warranties_of_merchantability_fitness_for_a_particular_purpose_and_non_infringement_in_no_event_shall_the_authors_or_copyright_holders_be_liable_for_any_claim_damages_or_other_liability_whether_in_an_action_of_contract_tort_or_otherwise_arising_from_out_of_or_in_connection_with_the_software_or_the_use_or_other_dealings_in_the_software

<!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> <div class="toc-sections-title">Sections</div> </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#introduction" class="md-nav__link"> <span class="md-ellipsis"> 简介 </span> </a> </li> <li class="md-nav__item"> <a href="#the-randomness-interface" class="md-nav__link"> <span class="md-ellipsis"> 随机数Solidity接口 </span> </a> <nav class="md-nav" aria-label="随机数Solidity接口"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#functions" class="md-nav__link"> <span class="md-ellipsis"> 函数 </span> </a> </li> <li class="md-nav__item"> <a href="#constants" class="md-nav__link"> <span class="md-ellipsis"> 常量 </span> </a> </li> <li class="md-nav__item"> <a href="#events" class="md-nav__link"> <span class="md-ellipsis"> 事件 </span> </a> </li> <li class="md-nav__item"> <a href="#enums" class="md-nav__link"> <span class="md-ellipsis"> 枚举 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#randomness-consumer-solidity-interface" class="md-nav__link"> <span class="md-ellipsis"> 随机数消费者Solidity接口 </span> </a> </li> <li class="md-nav__item"> <a href="#request-and-fulfill-process" class="md-nav__link"> <span class="md-ellipsis"> 请求与完成过程 </span> </a> </li> <li class="md-nav__item"> <a href="#interact-with-the-solidity-interfaces" class="md-nav__link"> <span class="md-ellipsis"> 使用随机性预编译生成随机数 </span> </a> <nav class="md-nav" aria-label="使用随机性预编译生成随机数"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#checking-prerequisites" class="md-nav__link"> <span class="md-ellipsis"> 检查先决条件 </span> </a> </li> <li class="md-nav__item"> <a href="#create-random-generator-contract" class="md-nav__link"> <span class="md-ellipsis"> 创建随机数生成器合约 </span> </a> </li> <li class="md-nav__item"> <a href="#remix-set-up" class="md-nav__link"> <span class="md-ellipsis"> Remix设置 </span> </a> </li> <li class="md-nav__item"> <a href="#compile-deploy-random-number" class="md-nav__link"> <span class="md-ellipsis"> 编译和部署随机数生成器合约 </span> </a> </li> <li class="md-nav__item"> <a href="#request-randomness" class="md-nav__link"> <span class="md-ellipsis"> 提交生成随机数的请求 </span> </a> </li> <li class="md-nav__item"> <a href="#fulfill-request-save-number" class="md-nav__link"> <span class="md-ellipsis"> 履行请求并保存随机数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#interact-directly" class="md-nav__link"> <span class="md-ellipsis"> 使用 Remix 直接与随机数预编译合约交互 </span> </a> <nav class="md-nav" aria-label="使用 Remix 直接与随机数预编译合约交互"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#remix-set-up" class="md-nav__link"> <span class="md-ellipsis"> Remix 设置 </span> </a> </li> <li class="md-nav__item"> <a href="#compile-randomness" class="md-nav__link"> <span class="md-ellipsis"> 编译与访问随机数预编译 </span> </a> </li> <li class="md-nav__item"> <a href="#get-request-status-and-purge" class="md-nav__link"> <span class="md-ellipsis"> 获取请求状态和清除过期请求 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div><div class="feedback-actions-container"><div class="feedback-section"> <form class="md-feedback" name="feedback" data-md-component="feedback"> <fieldset> <legend class="md-feedback__title"> 这个页面有帮助吗？ </legend> <div class="md-feedback__inner"> <div class="md-feedback__list"> <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73zM1 21h4V9H1z"/></svg> </button> <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2"/></svg> </button> </div> <div class="md-feedback__note"> <div data-md-value="1" hidden> 感谢您的反馈！ </div> <div data-md-value="0" hidden> 感谢您的反馈！请提交 <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+%E9%9A%8F%E6%9C%BA%E6%80%A7%E9%A2%84%E7%BC%96%E8%AF%91+-+/zh/builders/ethereum/precompiles/features/randomness/" target="_blank" rel="noopener">更多反馈</a> 来帮助我们改进。 </div> </div> </div> </fieldset> <div class="divider"></div> </form> </div><div class="edit-section"> <a href="https://github.com/moonbeam-foundation/moonbeam-docs/edit/master/zh/builders/ethereum/precompiles/features/randomness.md" title="编辑" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> 编辑 </a> </div> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <h1 id="_1">与随机性预编译交互<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1> <h2 id="introduction">简介<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2> <p>Moonbeam 利用可验证随机函数 (VRF) 生成可在链上验证的随机性。VRF 是一种加密函数，它接受一些输入并生成随机值，以及证明这些随机值是由提交者生成的真实性证明。任何人都可以验证该证明，以确保正确计算了生成的随机值。</p> <p>目前有两种可用的随机性来源，它们根据区块生产者的 VRF 密钥和过去的随机性结果提供随机输入：<a href="/learn/features/randomness/#local-vrf">本地 VRF</a> 和 <a href="/learn/features/randomness/#babe-epoch-randomness">BABE 纪元随机性</a>。本地 VRF 直接在 Moonbeam 中确定，使用区块整理人的 VRF 密钥和上一个区块的 VRF 输出。另一方面，<a href="https://docs.polkadot.com/polkadot-protocol/architecture/polkadot-chain/pos-consensus/#block-production-babe" target="_blank">BABE</a> 纪元随机性基于中继链验证人在完整<a href="https://wiki.polkadot.com/general/glossary/#epoch" target="_blank">纪元</a>期间生成的所有 VRF。</p> <p>有关随机性的两种来源、请求和履行过程如何运作以及安全注意事项的更多信息，请参阅 <a href="/learn/features/randomness/" target="_blank">Moonbeam 上的随机性</a> 页面。</p> <p>Moonbeam 提供了一个随机性预编译合约，它是一个 Solidity 接口，使智能合约开发者能够使用 Ethereum API 通过本地 VRF 或 BABE 纪元随机性生成随机性。Moonbeam 还提供了一个随机性消费者 Solidity 合约，您的合约必须继承该合约才能使用已履行的随机性请求。</p> <p>本指南将向您展示如何使用随机性预编译合约和随机性消费者合约创建一个抽奖活动，其中获奖者将被随机选择。您还将学习如何直接与随机性预编译合约交互，以执行诸如清除过期的随机性请求之类的操作。</p> <p>随机性预编译合约位于以下地址：</p> <div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><input id="__tabbed_1_3" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Moonbeam</label><label for="__tabbed_1_2">Moonriver</label><label for="__tabbed_1_3">Moonbase Alpha</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <p><code>0x0000000000000000000000000000000000000809</code></p> </div> <div class="tabbed-block"> <p><code>0x0000000000000000000000000000000000000809</code></p> </div> <div class="tabbed-block"> <p><code>0x0000000000000000000000000000000000000809</code></p> </div> </div> </div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>There can be some unintended consequences when using the precompiled contracts on Moonbeam. Please refer to the <a href="/learn/core-concepts/security/" target="_blank">Security Considerations</a> page for more information.</p> </div> <h2 id="the-randomness-interface">随机数Solidity接口<a class="headerlink" href="#the-randomness-interface" title="Permanent link">&para;</a></h2> <p><a href="https://github.com/moonbeam-foundation/moonbeam/blob/master/precompiles/randomness/Randomness.sol" target="_blank">Randomness.sol</a> 是一个Solidity接口，允许开发者与预编译的方法进行交互。</p> <details class="code"> <summary>Randomness.sol</summary> <div class="highlight"><pre><span></span><code><span class="c1">// SPDX-License-Identifier: GPL-3.0-only</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.8.3</span><span class="p">;</span>

<span class="c1">/// @dev The Randomness contract&#39;s address.</span>
<span class="kt">address</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>RANDOMNESS_ADDRESS<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0000000000000000000000000000000000000809</span><span class="p">;</span>

<span class="c1">/// @dev The Randomness contract&#39;s instance.</span>
Randomness<span class="w"> </span><span class="kt">constant</span><span class="w"> </span>RANDOMNESS_CONTRACT<span class="w"> </span><span class="o">=</span><span class="w"> </span>Randomness<span class="p">(</span>RANDOMNESS_ADDRESS<span class="p">);</span>

<span class="c1">/// @dev Maximum number of random words being requested</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>MAX_RANDOM_WORDS<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">100</span><span class="p">;</span>
<span class="c1">/// @dev Minimum number of blocks before a request can be fulfilled for Local VRF Request</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>MIN_VRF_BLOCKS_DELAY<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span>
<span class="c1">/// @dev Maximum number of blocks before a request can be fulfilled for Local VRF Request</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>MAX_VRF_BLOCKS_DELAY<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2000</span><span class="p">;</span>
<span class="c1">/// @dev The deposit amount needed to request random words. There is 1 deposit per request</span>
<span class="kt">uint256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>REQUEST_DEPOSIT_AMOUNT<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1000000000000000000</span><span class="p">;</span>

<span class="c1">/// @author The Moonbeam Team</span>
<span class="c1">/// @title Pallet Randomness Interface</span>
<span class="c1">/// @dev The interface through which solidity contracts will interact with Randomness</span>
<span class="c1">/// @custom:address 0x0000000000000000000000000000000000000809</span>
interface<span class="w"> </span>Randomness<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">/// @notice Event emitted when the request has been successfully executed</span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">FulFillmentSucceeded</span><span class="p">();</span>
<span class="w">    </span><span class="c1">/// @notice Event emitted when the request has failed to execute fulfillment</span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">FulFillmentFailed</span><span class="p">();</span>

<span class="w">    </span><span class="c1">/// @notice The status of the request</span>
<span class="w">    </span><span class="c1">/// @param DoesNotExist The request doesn&#39;t exist</span>
<span class="w">    </span><span class="c1">/// @param Pending The request cannot be fulfilled yet</span>
<span class="w">    </span><span class="c1">/// @param Ready The request is ready to be fulfilled</span>
<span class="w">    </span><span class="c1">/// @param Expired The request has expired</span>
<span class="w">    </span><span class="kt">enum</span><span class="w"> </span><span class="nv">RequestStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>DoesNotExist<span class="p">,</span>
<span class="w">        </span>Pending<span class="p">,</span>
<span class="w">        </span>Ready<span class="p">,</span>
<span class="w">        </span>Expired
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">/// @notice The type of randomness source</span>
<span class="w">    </span><span class="c1">/// @param LocalVRF Randomness VRF using the parachain material as seed</span>
<span class="w">    </span><span class="c1">/// @param RelayBabeEpoch Randomness VRF using relay material from previous epoch</span>
<span class="w">    </span><span class="kt">enum</span><span class="w"> </span><span class="nv">RandomnessSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span>LocalVRF<span class="p">,</span>
<span class="w">        </span>RelayBabeEpoch
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">/// @notice The request details</span>
<span class="w">    </span><span class="c1">/// @param id The id of the request (is always &lt; 2**64)</span>
<span class="w">    </span><span class="c1">/// @param refundAddress The address receiving the left-over fees after the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param contractAddress The address of the contract being called back during fulfillment</span>
<span class="w">    </span><span class="c1">/// @param fee The amount to set aside to pay for the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param gasLimit The gas limit to use for the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param salt A string being mixed with the randomness seed to obtain different random words. This should be as unique as possible; using the same salt will lead to same randomness result.</span>
<span class="w">    </span><span class="c1">/// @param numWords The number of random words requested (from 1 to MAX_RANDOM_WORDS)</span>
<span class="w">    </span><span class="c1">/// @param randomnessSource The type of randomness source used to generate the random words</span>
<span class="w">    </span><span class="c1">/// @param fulfillmentBlock The parachain block number at which the request can be fulfilled (for LocalVRF only)</span>
<span class="w">    </span><span class="c1">/// @param fulfillmentEpochIndex The relay epoch index at which the request can be fulfilled (for RelayBabeEpoch)</span>
<span class="w">    </span><span class="c1">/// @param expirationBlock The parachain block number at which the request expires (for LocalVRF only)</span>
<span class="w">    </span><span class="c1">/// @param expirationEpochIndex The relay epoch index at which the request expires (for RelayBabeEpoch)</span>
<span class="w">    </span><span class="c1">/// @param status The current status of the request</span>
<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Request</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">id</span><span class="p">;</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">refundAddress</span><span class="p">;</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">contractAddress</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">fee</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">gasLimit</span><span class="p">;</span>
<span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">salt</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint32</span><span class="w"> </span><span class="nv">numWords</span><span class="p">;</span>
<span class="w">        </span>RandomnessSource<span class="w"> </span>randomnessSource<span class="p">;</span>
<span class="w">        </span><span class="kt">uint32</span><span class="w"> </span><span class="nv">fulfillmentBlock</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">fulfillmentEpochIndex</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint32</span><span class="w"> </span><span class="nv">expirationBlock</span><span class="p">;</span>
<span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">expirationEpochIndex</span><span class="p">;</span>
<span class="w">        </span>RequestStatus<span class="w"> </span>status<span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">/// Return the current relay epoch index</span>
<span class="w">    </span><span class="c1">/// @dev An epoch represents real time and not a block number</span>
<span class="w">    </span><span class="c1">/// @dev Currently, time between epoch changes cannot be longer than:</span>
<span class="w">    </span><span class="c1">/// @dev  - Kusama/Westend/Rococo: 600 relay blocks (1 hour)</span>
<span class="w">    </span><span class="c1">/// @dev  - Polkadot: 2400 relay blocks (4 hours)</span>
<span class="w">    </span><span class="c1">/// @custom:selector 81797566</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">relayEpochIndex</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint64</span><span class="p">);</span>

<span class="w">    </span><span class="c1">/// Return the deposit required to perform a request</span>
<span class="w">    </span><span class="c1">/// @dev Each request will need a deposit.</span>
<span class="w">    </span><span class="c1">/// @custom:selector fb7cfdd7</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">requiredDeposit</span><span class="p">()</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">);</span>

<span class="w">    </span><span class="c1">/// @notice Returns the request status</span>
<span class="w">    </span><span class="c1">/// @param requestId The id of the request to check (must be &lt; 2**64)</span>
<span class="w">    </span><span class="c1">/// @return status Status of the request</span>
<span class="w">    </span><span class="c1">/// @custom:selector d8a4676f</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getRequestStatus</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">requestId</span><span class="p">)</span>
<span class="w">        </span><span class="kt">external</span>
<span class="w">        </span>view
<span class="w">        </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>RequestStatus<span class="w"> </span>status<span class="p">);</span>

<span class="w">    </span><span class="c1">/// @notice Returns the request or revert</span>
<span class="w">    </span><span class="c1">/// @param requestId The id of the request to check (must be &lt; 2**64)</span>
<span class="w">    </span><span class="c1">/// @return request The request</span>
<span class="w">    </span><span class="c1">/// @custom:selector c58343ef</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getRequest</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">requestId</span><span class="p">)</span>
<span class="w">        </span><span class="kt">external</span>
<span class="w">        </span>view
<span class="w">        </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>Request<span class="w"> </span><span class="kt">memory</span><span class="w"> </span>request<span class="p">);</span>

<span class="w">    </span><span class="c1">/// @notice Request random words generated from the parachain VRF</span>
<span class="w">    </span><span class="c1">/// @dev This is using pseudo-random VRF executed by the collator at the fulfillment</span>
<span class="w">    </span><span class="c1">/// @dev Warning:</span>
<span class="w">    </span><span class="c1">/// @dev The collator in charge of producing the block at fulfillment can decide to skip</span>
<span class="w">    </span><span class="c1">/// @dev producing the block in order to have a different random word generated by the next</span>
<span class="w">    </span><span class="c1">/// @dev collator, at the cost of a block reward. It is therefore economically viable to use</span>
<span class="w">    </span><span class="c1">/// @dev this randomness source only if the financial reward at stake is lower than the block</span>
<span class="w">    </span><span class="c1">/// @dev reward.</span>
<span class="w">    </span><span class="c1">/// @dev In order to reduce the risk of a collator being able to predict the random words</span>
<span class="w">    </span><span class="c1">/// @dev when the request is performed, it is possible to increase the delay to multiple blocks</span>
<span class="w">    </span><span class="c1">/// @dev The higher the delay is, the less likely the collator will be able to know which</span>
<span class="w">    </span><span class="c1">/// @dev collator will be in charge of fulfilling the request.</span>
<span class="w">    </span><span class="c1">/// @dev Fulfillment is manual and can be executed by anyone (for free) after the given delay</span>
<span class="w">    </span><span class="c1">/// @param refundAddress The address receiving the left-over fees after the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param fee The amount to set aside to pay for the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param gasLimit The gas limit to use for the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param salt A string being mixed with the randomness seed to obtain different random words</span>
<span class="w">    </span><span class="c1">/// @param numWords The number of random words requested (from 1 to MAX_RANDOM_WORDS)</span>
<span class="w">    </span><span class="c1">/// @param delay The number of blocks until the request can be fulfilled (between MIN_DELAY_BLOCKS and MAX_DELAY_BLOCKS)</span>
<span class="w">    </span><span class="c1">/// @return requestId The id of the request requestLocalVRFRandomWords</span>
<span class="w">    </span><span class="c1">/// @custom:selector 9478430c</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">requestLocalVRFRandomWords</span><span class="p">(</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">refundAddress</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">fee</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">gasLimit</span><span class="p">,</span>
<span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">salt</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint8</span><span class="w"> </span><span class="nv">numWords</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">delay</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">);</span>

<span class="w">    </span><span class="c1">/// @notice Request random words generated from the relaychain Babe consensus</span>
<span class="w">    </span><span class="c1">/// @dev The random words are generated from the hash of the all the VRF provided by the</span>
<span class="w">    </span><span class="c1">/// @dev relaychain validator during 1 epoch.</span>
<span class="w">    </span><span class="c1">/// @dev It requires a delay of at least 1 epoch after the current epoch to be unpredictable</span>
<span class="w">    </span><span class="c1">/// @dev at the time the request is performed.</span>
<span class="w">    </span><span class="c1">/// @dev Warning:</span>
<span class="w">    </span><span class="c1">/// @dev The validator (on the relaychain) of the last block of an epoch can decide to skip</span>
<span class="w">    </span><span class="c1">/// @dev producing the block in order to choose the previous generated epoch random number</span>
<span class="w">    </span><span class="c1">/// @dev at the cost of a relaychain block rewards. It is therefore economically viable to use</span>
<span class="w">    </span><span class="c1">/// @dev this randomness source only if the financial reward at stake is lower than the relaychain</span>
<span class="w">    </span><span class="c1">/// @dev block reward.</span>
<span class="w">    </span><span class="c1">/// @dev (see https://crates.parity.io/pallet_babe/struct.RandomnessFromOneEpochAgo.html)</span>
<span class="w">    </span><span class="c1">/// @dev Fulfillment is manual and can be executed by anyone (for free) at</span>
<span class="w">    </span><span class="c1">/// @dev the beginning of the 2nd relay epoch following the current one</span>
<span class="w">    </span><span class="c1">/// @param refundAddress The address receiving the left-over fees after the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param fee Amount to set aside to pay for the fulfillment. Those fees are taken from the contract</span>
<span class="w">    </span><span class="c1">/// @param gasLimit Gas limit for the fulfillment</span>
<span class="w">    </span><span class="c1">/// @param salt Salt to be mixed with raw randomness to get output</span>
<span class="w">    </span><span class="c1">/// @param numWords Number of random words to be returned (limited to MAX_RANDOM_WORDS)</span>
<span class="w">    </span><span class="c1">/// @return requestId The id of the request</span>
<span class="w">    </span><span class="c1">/// @custom:selector 33c14a63</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">requestRelayBabeEpochRandomWords</span><span class="p">(</span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">refundAddress</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">fee</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint64</span><span class="w"> </span><span class="nv">gasLimit</span><span class="p">,</span>
<span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">salt</span><span class="p">,</span>
<span class="w">        </span><span class="kt">uint8</span><span class="w"> </span><span class="nv">numWords</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">);</span>

<span class="w">    </span><span class="c1">/// @dev fulFill the request which will call the contract method &quot;fulfillRandomWords&quot;</span>
<span class="w">    </span><span class="c1">/// @dev Fees of the caller are refunded if the request is fulfillable</span>
<span class="w">    </span><span class="c1">/// @param requestId Request to be fulfilled (must be &lt; 2**64)</span>
<span class="w">    </span><span class="c1">/// @custom:selector 9a91eb0d</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">fulfillRequest</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">requestId</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="p">;</span>

<span class="w">    </span><span class="c1">/// @param requestId Request receiving the additional fees (must be &lt; 2**64)</span>
<span class="w">    </span><span class="c1">/// @param feeIncrease Amount to increase</span>
<span class="w">    </span><span class="c1">/// @custom:selector d0408a7f</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">increaseRequestFee</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">requestId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">feeIncrease</span><span class="p">)</span>
<span class="w">        </span><span class="kt">external</span><span class="p">;</span>

<span class="w">    </span><span class="c1">/// @param requestId Request to be purged (must be &lt; 2**64)</span>
<span class="w">    </span><span class="c1">/// @custom:selector 1d26cbab</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">purgeExpiredRequest</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">requestId</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div> </details> <p>该接口包括函数、常量、事件和枚举，详见以下章节。</p> <h3 id="functions">函数<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h3> <p>该接口包括以下函数：</p> <details class="function"> <summary><strong>relayEpochIndex</strong>() - 返回当前的中继纪元索引，其中一个纪元代表实际时间，而不是区块号</summary> <div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">参数</label><label for="__tabbed_2_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <p>无。</p> </div> <div class="tabbed-block"> <ul> <li><code>uint256</code> 当前中继纪元索引</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>requiredDeposit</strong>() - 返回执行随机数请求所需的押金</summary> <div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">参数</label><label for="__tabbed_3_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <p>无。</p> </div> <div class="tabbed-block"> <ul> <li><code>uint256</code> 所需的押金金额</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>getRequestStatus</strong>(<em>uint256</em> requestId) - 返回给定随机数请求的请求状态</summary> <div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><input id="__tabbed_4_2" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">参数</label><label for="__tabbed_4_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>requestId</code> - 随机数请求的 uint256 ID</li> </ul> </div> <div class="tabbed-block"> <ul> <li><code>uint8</code> 请求的状态代码</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>getRequest</strong>(<em>uint256</em> requestId) - 返回给定随机数请求的请求详情</summary> <div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"><input id="__tabbed_5_2" name="__tabbed_5" type="radio"><div class="tabbed-labels"><label for="__tabbed_5_1">参数</label><label for="__tabbed_5_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>requestId</code> - 随机数请求的 uint256 ID</li> </ul> </div> <div class="tabbed-block"> <ul> <li><code>bool</code> 请求是否准备就绪</li> <li><code>bool</code> 请求是否已过期</li> <li><code>uint256</code> 押金金额</li> <li><code>uint256</code> 手续费金额</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>requestLocalVRFRandomWords</strong>(<em>address</em> refundAddress, <em>uint256</em> fee, <em>uint64</em> gasLimit, <em>bytes32</em> salt, <em>uint8</em> numWords, <em>uint64</em> delay) - 请求从平行链 VRF 生成的随机词</summary> <div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio"><input id="__tabbed_6_2" name="__tabbed_6" type="radio"><div class="tabbed-labels"><label for="__tabbed_6_1">参数</label><label for="__tabbed_6_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>refundAddress</code> - 接收完成后的剩余费用的地址</li> <li><code>fee</code> - uint256 金额，用于预留支付完成费用</li> <li><code>gasLimit</code> - 用于完成的 uint64 gas 限制</li> <li><code>salt</code> - 与随机种子混合以获得不同随机词的 bytes32 字符串</li> <li><code>numWords</code> - 请求的随机词数量的 uint8，最多为最大随机词数量</li> <li><code>delay</code> - 请求可以完成之前必须经过的区块数的 uint64。此值需要在本地 VRF 请求可以完成之前的最小和最大区块数之间</li> </ul> </div> <div class="tabbed-block"> <ul> <li><code>uint256</code> 创建的请求的 ID</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>requestRelayBabeEpochRandomWords</strong>(<em>address</em> refundAddress, <em>uint256</em> fee, <em>uint64</em> gasLimit, <em>bytes32</em> salt, <em>uint8</em> numWords) - 请求从中继链 BABE 共识生成的随机词</summary> <div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio"><input id="__tabbed_7_2" name="__tabbed_7" type="radio"><div class="tabbed-labels"><label for="__tabbed_7_1">参数</label><label for="__tabbed_7_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>refundAddress</code> - 接收完成后的剩余费用的地址</li> <li><code>fee</code> - uint256 金额，用于预留支付完成费用</li> <li><code>gasLimit</code> - 用于完成的 uint64 gas 限制</li> <li><code>salt</code> - 与随机种子混合以获得不同随机词的 bytes32 字符串</li> <li><code>numWords</code> - 请求的随机词数量的 uint8，最多为最大随机词数量</li> </ul> </div> <div class="tabbed-block"> <ul> <li><code>uint256</code> 创建的请求的 ID</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>fulfillRequest</strong>(<em>uint256</em> requestId) - 完成请求，这将调用消费者合约方法 <a href="#:~:text=rawFulfillRandomWords(uint256 requestId, uint256[] memory randomWords)"><code>fulfillRandomWords</code></a>。如果请求可以完成，则调用者的费用将被退还</summary> <div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio"><input id="__tabbed_8_2" name="__tabbed_8" type="radio"><div class="tabbed-labels"><label for="__tabbed_8_1">参数</label><label for="__tabbed_8_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>requestId</code> - 随机数请求的 uint256 ID</li> </ul> </div> <div class="tabbed-block"> <p>无。</p> </div> </div> </div> </details> <details class="function"> <summary><strong>increaseRequestFee</strong>(<em>uint256</em> requestId, <em>uint256</em> feeIncrease) - 增加与给定随机数请求关联的费用。如果在请求完成之前，gas 价格显著上涨，则需要这样做</summary> <div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio"><input id="__tabbed_9_2" name="__tabbed_9" type="radio"><div class="tabbed-labels"><label for="__tabbed_9_1">参数</label><label for="__tabbed_9_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>requestId</code> - 随机数请求的 uint256 ID</li> <li><code>feeIncrease</code> - 费用增加的 uint256 金额</li> </ul> </div> <div class="tabbed-block"> <p>无。</p> </div> </div> </div> </details> <details class="function"> <summary><strong>purgeExpiredRequest</strong>(<em>uint256</em> requestId) - 从存储中删除给定的过期请求，并将请求费用转移给调用者，并将押金返还给原始请求者</summary> <div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio"><input id="__tabbed_10_2" name="__tabbed_10" type="radio"><div class="tabbed-labels"><label for="__tabbed_10_1">参数</label><label for="__tabbed_10_2">返回值</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>requestId</code> - 随机数请求的 uint256 ID</li> </ul> </div> <div class="tabbed-block"> <p>无。</p> </div> </div> </div> </details> <h3 id="constants">常量<a class="headerlink" href="#constants" title="Permanent link">&para;</a></h3> <p>该接口包含以下常量：</p> <ul> <li><strong>maxRandomWords</strong> - 请求的最大随机字数</li> <li><strong>minBlockDelay</strong> - 本地 VRF 请求可以满足的最小区块数</li> <li><strong>maxBlockDelay</strong> - 本地 VRF 请求可以满足的最大区块数</li> <li><strong>deposit</strong> - 请求随机字所需的存款金额。 每个请求都有一笔存款</li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs="11:3"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio"><input id="__tabbed_11_2" name="__tabbed_11" type="radio"><input id="__tabbed_11_3" name="__tabbed_11" type="radio"><div class="tabbed-labels"><label for="__tabbed_11_1">Moonbeam</label><label for="__tabbed_11_2">Moonriver</label><label for="__tabbed_11_3">Moonbase Alpha</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <table> <thead> <tr> <th style="text-align: center;">Variable</th> <th style="text-align: center;">Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">MAX_RANDOM_WORDS</td> <td style="text-align: center;">100 words</td> </tr> <tr> <td style="text-align: center;">MIN_VRF_BLOCKS_DELAY</td> <td style="text-align: center;">2 blocks</td> </tr> <tr> <td style="text-align: center;">MAX_VRF_BLOCKS_DELAY</td> <td style="text-align: center;">2000 blocks</td> </tr> <tr> <td style="text-align: center;">REQUEST_DEPOSIT_AMOUNT</td> <td style="text-align: center;">100 GLMR</td> </tr> </tbody> </table> </div> <div class="tabbed-block"> <table> <thead> <tr> <th style="text-align: center;">Variable</th> <th style="text-align: center;">Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">MAX_RANDOM_WORDS</td> <td style="text-align: center;">100 words</td> </tr> <tr> <td style="text-align: center;">MIN_VRF_BLOCKS_DELAY</td> <td style="text-align: center;">2 blocks</td> </tr> <tr> <td style="text-align: center;">MAX_VRF_BLOCKS_DELAY</td> <td style="text-align: center;">2000 blocks</td> </tr> <tr> <td style="text-align: center;">REQUEST_DEPOSIT_AMOUNT</td> <td style="text-align: center;">1 MOVR</td> </tr> </tbody> </table> </div> <div class="tabbed-block"> <table> <thead> <tr> <th style="text-align: center;">Variable</th> <th style="text-align: center;">Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">MAX_RANDOM_WORDS</td> <td style="text-align: center;">100 words</td> </tr> <tr> <td style="text-align: center;">MIN_VRF_BLOCKS_DELAY</td> <td style="text-align: center;">2 blocks</td> </tr> <tr> <td style="text-align: center;">MAX_VRF_BLOCKS_DELAY</td> <td style="text-align: center;">2000 blocks</td> </tr> <tr> <td style="text-align: center;">REQUEST_DEPOSIT_AMOUNT</td> <td style="text-align: center;">1 DEV</td> </tr> </tbody> </table> </div> </div> </div> <h3 id="events">事件<a class="headerlink" href="#events" title="Permanent link">&para;</a></h3> <p>该接口包括以下事件：</p> <ul> <li><strong>FulfillmentSucceeded</strong>() - 请求已成功执行时发出</li> <li><strong>FulfillmentFailed</strong>() - 请求未能执行 fulfillment 时发出</li> </ul> <h3 id="enums">枚举<a class="headerlink" href="#enums" title="Permanent link">&para;</a></h3> <p>该接口包括以下枚举：</p> <ul> <li><strong>RequestStatus</strong> - 请求的状态，可以是 <code>DoesNotExist</code> (0)、<code>Pending</code> (1)、<code>Ready</code> (2) 或 <code>Expired</code> (3)</li> <li><strong>RandomnessSource</strong> - 随机源的类型，可以是 <code>LocalVRF</code> (0) 或 <code>RelayBabeEpoch</code> (1)</li> </ul> <h2 id="randomness-consumer-solidity-interface">随机数消费者Solidity接口<a class="headerlink" href="#randomness-consumer-solidity-interface" title="Permanent link">&para;</a></h2> <p><a href="https://github.com/moonbeam-foundation/moonbeam/blob/4e2a5785424be6faa01cd14e90155d9d2ec734ee/precompiles/randomness/RandomnessConsumer.sol" target="_blank"><code>RandomnessConsumer.sol</code></a> Solidity接口使智能合约可以轻松地与随机数预编译进行交互。使用随机数消费者可确保实现来自随机数预编译。</p> <details class="code"> <summary>RandomnessConsumer.sol</summary> <p>solidity // SPDX-License-Identifier: GPL-3.0-only pragma solidity &gt;=0.8.3;</p> <p>/// @dev The Randomness contract's address. address constant RANDOMNESS_ADDRESS = 0x0000000000000000000000000000000000000809;</p> <p>/// @dev The Randomness contract's instance. Randomness constant RANDOMNESS_CONTRACT = Randomness(RANDOMNESS_ADDRESS);</p> <p>/// @dev Maximum number of random words being requested uint32 constant MAX_RANDOM_WORDS = 100; /// @dev Minimum number of blocks before a request can be fulfilled for Local VRF Request uint32 constant MIN_VRF_BLOCKS_DELAY = 2; /// @dev Maximum number of blocks before a request can be fulfilled for Local VRF Request uint32 constant MAX_VRF_BLOCKS_DELAY = 2000; /// @dev The deposit amount needed to request random words. There is 1 deposit per request uint256 constant REQUEST_DEPOSIT_AMOUNT = 1000000000000000000;</p> <p>/// @author The Moonbeam Team /// @title Pallet Randomness Interface /// @dev The interface through which solidity contracts will interact with Randomness /// @custom:address 0x0000000000000000000000000000000000000809 interface Randomness { /// @notice Event emitted when the request has been successfully executed event FulFillmentSucceeded(); /// @notice Event emitted when the request has failed to execute fulfillment event FulFillmentFailed();</p> <div class="codehilite"><pre><span></span><code><span class="c1">/// @notice The status of the request</span>
<span class="c1">/// @param DoesNotExist The request doesn&#39;t exist</span>
<span class="c1">/// @param Pending The request cannot be fulfilled yet</span>
<span class="c1">/// @param Ready The request is ready to be fulfilled</span>
<span class="c1">/// @param Expired The request has expired</span>
<span class="nx">enum</span><span class="w"> </span><span class="nx">RequestStatus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">DoesNotExist</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Pending</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Ready</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Expired</span>
<span class="p">}</span>

<span class="c1">/// @notice The type of randomness source</span>
<span class="c1">/// @param LocalVRF Randomness VRF using the parachain material as seed</span>
<span class="c1">/// @param RelayBabeEpoch Randomness VRF using relay material from previous epoch</span>
<span class="nx">enum</span><span class="w"> </span><span class="nx">RandomnessSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">LocalVRF</span><span class="p">,</span>
<span class="w">    </span><span class="nx">RelayBabeEpoch</span>
<span class="p">}</span>

<span class="c1">/// @notice The request details</span>
<span class="c1">/// @param id The id of the request (is always &lt; 2**64)</span>
<span class="c1">/// @param refundAddress The address receiving the left-over fees after the fulfillment</span>
<span class="c1">/// @param contractAddress The address of the contract being called back during fulfillment</span>
<span class="c1">/// @param fee The amount to set aside to pay for the fulfillment</span>
<span class="c1">/// @param gasLimit The gas limit to use for the fulfillment</span>
<span class="c1">/// @param salt A string being mixed with the randomness seed to obtain different random words. This should be as unique as possible; using the same salt will lead to same randomness result.</span>
<span class="c1">/// @param numWords The number of random words requested (from 1 to MAX_RANDOM_WORDS)</span>
<span class="c1">/// @param randomnessSource The type of randomness source used to generate the random words</span>
<span class="c1">/// @param fulfillmentBlock The parachain block number at which the request can be fulfilled (for LocalVRF only)</span>
<span class="c1">/// @param fulfillmentEpochIndex The relay epoch index at which the request can be fulfilled (for RelayBabeEpoch)</span>
<span class="c1">/// @param expirationBlock The parachain block number at which the request expires (for LocalVRF only)</span>
<span class="c1">/// @param expirationEpochIndex The relay epoch index at which the request expires (for RelayBabeEpoch)</span>
<span class="c1">/// @param status The current status of the request</span>
<span class="nx">struct</span><span class="w"> </span><span class="nx">Request</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">id</span><span class="p">;</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">refundAddress</span><span class="p">;</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">contractAddress</span><span class="p">;</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">fee</span><span class="p">;</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">gasLimit</span><span class="p">;</span>
<span class="w">    </span><span class="nx">bytes32</span><span class="w"> </span><span class="nx">salt</span><span class="p">;</span>
<span class="w">    </span><span class="nx">uint32</span><span class="w"> </span><span class="nx">numWords</span><span class="p">;</span>
<span class="w">    </span><span class="nx">RandomnessSource</span><span class="w"> </span><span class="nx">randomnessSource</span><span class="p">;</span>
<span class="w">    </span><span class="nx">uint32</span><span class="w"> </span><span class="nx">fulfillmentBlock</span><span class="p">;</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">fulfillmentEpochIndex</span><span class="p">;</span>
<span class="w">    </span><span class="nx">uint32</span><span class="w"> </span><span class="nx">expirationBlock</span><span class="p">;</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">expirationEpochIndex</span><span class="p">;</span>
<span class="w">    </span><span class="nx">RequestStatus</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">/// Return the current relay epoch index</span>
<span class="c1">/// @dev An epoch represents real time and not a block number</span>
<span class="c1">/// @dev Currently, time between epoch changes cannot be longer than:</span>
<span class="c1">/// @dev  - Kusama/Westend/Rococo: 600 relay blocks (1 hour)</span>
<span class="c1">/// @dev  - Polkadot: 2400 relay blocks (4 hours)</span>
<span class="c1">/// @custom:selector 81797566</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">relayEpochIndex</span><span class="p">()</span><span class="w"> </span><span class="kd">external</span><span class="w"> </span><span class="nx">view</span><span class="w"> </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">uint64</span><span class="p">);</span>

<span class="c1">/// Return the deposit required to perform a request</span>
<span class="c1">/// @dev Each request will need a deposit.</span>
<span class="c1">/// @custom:selector fb7cfdd7</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">requiredDeposit</span><span class="p">()</span><span class="w"> </span><span class="kd">external</span><span class="w"> </span><span class="nx">view</span><span class="w"> </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">uint256</span><span class="p">);</span>

<span class="c1">/// @notice Returns the request status</span>
<span class="c1">/// @param requestId The id of the request to check (must be &lt; 2**64)</span>
<span class="c1">/// @return status Status of the request</span>
<span class="c1">/// @custom:selector d8a4676f</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">getRequestStatus</span><span class="p">(</span><span class="nx">uint256</span><span class="w"> </span><span class="nx">requestId</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">view</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">RequestStatus</span><span class="w"> </span><span class="nx">status</span><span class="p">);</span>

<span class="c1">/// @notice Returns the request or revert</span>
<span class="c1">/// @param requestId The id of the request to check (must be &lt; 2**64)</span>
<span class="c1">/// @return request The request</span>
<span class="c1">/// @custom:selector c58343ef</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">getRequest</span><span class="p">(</span><span class="nx">uint256</span><span class="w"> </span><span class="nx">requestId</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">view</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">Request</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">request</span><span class="p">);</span>

<span class="c1">/// @notice Request random words generated from the parachain VRF</span>
<span class="c1">/// @dev This is using pseudo-random VRF executed by the collator at the fulfillment</span>
<span class="c1">/// @dev Warning:</span>
<span class="c1">/// @dev The collator in charge of producing the block at fulfillment can decide to skip</span>
<span class="c1">/// @dev producing the block in order to have a different random word generated by the next</span>
<span class="c1">/// @dev collator, at the cost of a block reward. It is therefore economically viable to use</span>
<span class="c1">/// @dev this randomness source only if the financial reward at stake is lower than the block</span>
<span class="c1">/// @dev reward.</span>
<span class="c1">/// @dev In order to reduce the risk of a collator being able to predict the random words</span>
<span class="c1">/// @dev when the request is performed, it is possible to increase the delay to multiple blocks</span>
<span class="c1">/// @dev The higher the delay is, the less likely the collator will be able to know which</span>
<span class="c1">/// @dev collator will be in charge of fulfilling the request.</span>
<span class="c1">/// @dev Fulfillment is manual and can be executed by anyone (for free) after the given delay</span>
<span class="c1">/// @param refundAddress The address receiving the left-over fees after the fulfillment</span>
<span class="c1">/// @param fee The amount to set aside to pay for the fulfillment</span>
<span class="c1">/// @param gasLimit The gas limit to use for the fulfillment</span>
<span class="c1">/// @param salt A string being mixed with the randomness seed to obtain different random words</span>
<span class="c1">/// @param numWords The number of random words requested (from 1 to MAX_RANDOM_WORDS)</span>
<span class="c1">/// @param delay The number of blocks until the request can be fulfilled (between MIN_DELAY_BLOCKS and MAX_DELAY_BLOCKS)</span>
<span class="c1">/// @return requestId The id of the request requestLocalVRFRandomWords</span>
<span class="c1">/// @custom:selector 9478430c</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">requestLocalVRFRandomWords</span><span class="p">(</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">refundAddress</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">fee</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">gasLimit</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes32</span><span class="w"> </span><span class="nx">salt</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint8</span><span class="w"> </span><span class="nx">numWords</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">delay</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="w"> </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">uint256</span><span class="p">);</span>

<span class="c1">/// @notice Request random words generated from the relaychain Babe consensus</span>
<span class="c1">/// @dev The random words are generated from the hash of the all the VRF provided by the</span>
<span class="c1">/// @dev relaychain validator during 1 epoch.</span>
<span class="c1">/// @dev It requires a delay of at least 1 epoch after the current epoch to be unpredictable</span>
<span class="c1">/// @dev at the time the request is performed.</span>
<span class="c1">/// @dev Warning:</span>
<span class="c1">/// @dev The validator (on the relaychain) of the last block of an epoch can decide to skip</span>
<span class="c1">/// @dev producing the block in order to choose the previous generated epoch random number</span>
<span class="c1">/// @dev at the cost of a relaychain block rewards. It is therefore economically viable to use</span>
<span class="c1">/// @dev this randomness source only if the financial reward at stake is lower than the relaychain</span>
<span class="c1">/// @dev block reward.</span>
<span class="c1">/// @dev (see https://crates.parity.io/pallet_babe/struct.RandomnessFromOneEpochAgo.html)</span>
<span class="c1">/// @dev Fulfillment is manual and can be executed by anyone (for free) at</span>
<span class="c1">/// @dev the beginning of the 2nd relay epoch following the current one</span>
<span class="c1">/// @param refundAddress The address receiving the left-over fees after the fulfillment</span>
<span class="c1">/// @param fee Amount to set aside to pay for the fulfillment. Those fees are taken from the contract</span>
<span class="c1">/// @param gasLimit Gas limit for the fulfillment</span>
<span class="c1">/// @param salt Salt to be mixed with raw randomness to get output</span>
<span class="c1">/// @param numWords Number of random words to be returned (limited to MAX_RANDOM_WORDS)</span>
<span class="c1">/// @return requestId The id of the request</span>
<span class="c1">/// @custom:selector 33c14a63</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">requestRelayBabeEpochRandomWords</span><span class="p">(</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">refundAddress</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">fee</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">gasLimit</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes32</span><span class="w"> </span><span class="nx">salt</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint8</span><span class="w"> </span><span class="nx">numWords</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="w"> </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">uint256</span><span class="p">);</span>

<span class="c1">/// @dev fulFill the request which will call the contract method &quot;fulfillRandomWords&quot;</span>
<span class="c1">/// @dev Fees of the caller are refunded if the request is fulfillable</span>
<span class="c1">/// @param requestId Request to be fulfilled (must be &lt; 2**64)</span>
<span class="c1">/// @custom:selector 9a91eb0d</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">fulfillRequest</span><span class="p">(</span><span class="nx">uint256</span><span class="w"> </span><span class="nx">requestId</span><span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// @param requestId Request receiving the additional fees (must be &lt; 2**64)</span>
<span class="c1">/// @param feeIncrease Amount to increase</span>
<span class="c1">/// @custom:selector d0408a7f</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">increaseRequestFee</span><span class="p">(</span><span class="nx">uint256</span><span class="w"> </span><span class="nx">requestId</span><span class="p">,</span><span class="w"> </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feeIncrease</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// @param requestId Request to be purged (must be &lt; 2**64)</span>
<span class="c1">/// @custom:selector 1d26cbab</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">purgeExpiredRequest</span><span class="p">(</span><span class="nx">uint256</span><span class="w"> </span><span class="nx">requestId</span><span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>
</code></pre></div> <p>}</p> </details> <p>消费者接口包括以下函数：</p> <ul> <li><strong>fulfillRandomWords</strong>(<em>uint256</em> requestId, <em>uint256[] memory</em> randomWords) - 处理给定请求的VRF响应。此方法由对 <code>rawFulfillRandomWords</code> 的调用触发</li> <li><strong>rawFulfillRandomWords</strong>(<em>uint256</em> requestId, <em>uint256[] memory</em> randomWords) - 在调用随机数预编译的 <a href="#:~:text=fulfillRequest(uint256 requestId)"><code>fulfillRequest</code> 函数</a> 时执行。验证调用的来源，确保随机数预编译是来源，然后调用 <code>fulfillRandomWords</code> 方法</li> </ul> <h2 id="request-and-fulfill-process">请求与完成过程<a class="headerlink" href="#request-and-fulfill-process" title="Permanent link">&para;</a></h2> <p>要使用随机性，您必须拥有一个执行以下操作的合约：</p> <ul> <li>导入 <code>Randomness.sol</code> 预编译合约和 <code>RandomnessConsumer.sol</code> 接口</li> <li>继承自 <code>RandomnessConsumer.sol</code> 接口</li> <li>根据您要使用的随机性来源，通过预编译合约的 <a href="#:~:text=requestLocalVRFRandomWords"><code>requestLocalVRFRandomWords</code> 方法</a> 或 <a href="#:~:text=requestRelayBabeEpochRandomWords"><code>requestRelayBabeEpochRandomWords</code> 方法</a> 请求随机性</li> <li>通过预编译合约的 <a href="#:~:text=fulfillRequest"><code>fulfillRequest</code> 方法</a> 请求完成</li> <li>通过具有与 <code>RandomnessConsumer.sol</code> 合约的 <a href="#:~:text=fulfillRandomWords(uint256 requestId, uint256[] memory randomWords)"><code>fulfillRandomWords</code> 方法</a> 相同<a href="#:~:text=fulfillRandomWords(uint256 requestId, uint256[] memory randomWords)">签名的 <code>fulfillRandomWords</code> 方法</a> 使用随机性</li> </ul> <p>通过预编译合约的 <code>requestLocalVRFRandomWords</code> 或 <code>requestRelayBabeEpochRandomWords</code> 方法请求随机性时，会预留一笔费用来支付请求的完成费用。使用本地 VRF 时，为了提高不可预测性，必须经过指定的延迟期（以区块为单位），然后才能完成请求。至少，延迟期必须大于一个区块。对于 BABE epoch 随机性，您无需指定延迟，但可以在当前 epoch 之后的第二个 epoch 开始时完成请求。</p> <p>延迟后，任何人都可以通过 <code>fulfillRequest</code> 方法手动执行请求的完成，费用是最初为请求预留的费用。</p> <p>通过预编译合约的 <code>fulfillRequest</code> 方法完成随机性请求时，将调用 <code>RandomnessConsumer.sol</code> 合约中的 <a href="#:~:text=rawFulfillRandomWords(uint256 requestId, uint256[] memory randomWords)"><code>rawFulfillRandomWords</code></a> 函数，该函数将验证发送者是否为随机性预编译合约。然后，调用 <a href="#:~:text=fulfillRandomWords(uint256 requestId, uint256[] memory randomWords)"><code>fulfillRandomWords</code></a>，并使用当前区块的随机性结果和给定的 salt 计算请求的随机词数并返回。如果完成成功，将发出 <a href="#:~:text=FulfillmentSucceeded"><code>FulfillmentSucceeded</code> 事件</a>；否则，将发出 <a href="#:~:text=FulfillmentFailed"><code>FulfillmentFailed</code> 事件</a>。</p> <p>对于已完成的请求，执行成本将从请求费用中退还给 <code>fulfillRequest</code> 的调用者。然后，任何多余的费用和请求保证金将转入指定的退款地址。</p> <p>您的合约的 <code>fulfillRandomWords</code> 回调负责处理完成。例如，在彩票合约中，回调将使用随机词来选择获胜者并支付奖金。</p> <p>如果请求过期，可以通过预编译合约的 <a href="/builders/ethereum/precompiles/features/randomness/#:~:text=purgeExpiredRequest" target="_blank"><code>purgeExpiredRequest</code> 函数</a> 清除它。调用此函数时，请求费用将支付给调用者，保证金将退还给原始请求者。</p> <p>以下图表显示了随机性请求的理想路径：</p> <p><a class="glightbox" href="/images/learn/features/randomness/randomness-1.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="随机性请求的理想路径图" src="/images/learn/features/randomness/randomness-1.webp"></a></p> <h2 id="interact-with-the-solidity-interfaces">使用随机性预编译生成随机数<a class="headerlink" href="#interact-with-the-solidity-interfaces" title="Permanent link">&para;</a></h2> <p>在本教程的以下部分中，您将学习如何创建使用随机性预编译和随机性消费者生成随机数的智能合约。如果您只想了解随机性预编译的一些功能，您可以跳到<a href="#interact-directly">使用 Remix 直接与随机性预编译交互</a>部分。</p> <h3 id="checking-prerequisites">检查先决条件<a class="headerlink" href="#checking-prerequisites" title="Permanent link">&para;</a></h3> <p>在本指南中，您需要具备以下条件：</p> <ul> <li><a href="/tokens/connect/metamask/" target="_blank">已安装MetaMask并连接到Moonbase Alpha</a></li> <li>一个有DEV代币的账户。 You can get DEV tokens for testing on Moonbase Alpha once every 24 hours from the <a href="https://faucet.moonbeam.network" target="_blank">Moonbase Alpha Faucet</a></li> </ul> <h3 id="create-random-generator-contract">创建随机数生成器合约<a class="headerlink" href="#create-random-generator-contract" title="Permanent link">&para;</a></h3> <p>本节将要创建的合约包含您请求随机性以及使用满足随机性请求的结果所需的最低限度的函数。</p> <p><strong>此合约仅用于教育目的，不适用于生产用途。</strong></p> <p>此合约将包含以下函数：</p> <ul> <li>接受请求随机性所需的存款的构造函数</li> <li>提交随机性请求的函数。在此示例中，随机性来源将是本地 VRF，但您可以轻松修改合约以使用 BABE 时间片随机性</li> <li>通过调用 Randomness Precompile 的 <code>fulfillRequest</code> 函数来满足请求的函数。此函数将是 <code>payable</code>，因为履行费用需要在请求随机性时提交</li> <li>使用履行结果的函数。此函数的签名必须与 <a href="#:~:text=fulfillRandomWords(uint256 requestId, uint256[] memory randomWords)">Randomness Consumer 合约的 <code>fulfillRandomWords</code> 方法的签名</a> 匹配</li> </ul> <p>事不宜迟，合约如下：</p> <p>solidity // SPDX-License-Identifier: GPL-3.0-only pragma solidity ^0.8.30;</p> <p>import "https://github.com/moonbeam-foundation/moonbeam/blob/master/precompiles/randomness/Randomness.sol"; import {RandomnessConsumer} from "https://github.com/moonbeam-foundation/moonbeam/blob/master/precompiles/randomness/RandomnessConsumer.sol";</p> <p>contract RandomNumber is RandomnessConsumer { // The Randomness Precompile Interface Randomness public randomness = Randomness(0x0000000000000000000000000000000000000809);</p> <div class="codehilite"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">Variables</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">randomness</span><span class="w"> </span><span class="n">requests</span>
<span class="n">uint256</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">requiredDeposit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomness</span><span class="o">.</span><span class="n">requiredDeposit</span><span class="p">();</span>
<span class="n">uint64</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">FULFILLMENT_GAS_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100000</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">enough</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">cover</span>
<span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fulfillment</span><span class="w"> </span><span class="n">costs</span><span class="o">.</span><span class="w"> </span><span class="n">Any</span><span class="w"> </span><span class="n">leftover</span><span class="w"> </span><span class="n">fees</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">refunded</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span>
<span class="o">//</span><span class="w"> </span><span class="n">refund</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">requestRandomness</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">below</span><span class="o">.</span>
<span class="o">//</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class="n">Gwei</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sufficient</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">networks</span><span class="o">.</span>
<span class="o">//</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">Moonbase</span><span class="w"> </span><span class="n">Alpha</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Moonriver</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">Gwei</span><span class="w"> </span>
<span class="n">uint256</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">MIN_FEE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FULFILLMENT_GAS_LIMIT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class="n">gwei</span><span class="p">;</span><span class="w"> </span>
<span class="n">uint32</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">VRF_BLOCKS_DELAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MIN_VRF_BLOCKS_DELAY</span><span class="p">;</span>
<span class="n">bytes32</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">SALT_PREFIX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;INSERT_ANY_STRING_FOR_SALT&quot;</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="n">Storage</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">request</span>
<span class="n">uint256</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">requestId</span><span class="p">;</span>
<span class="n">uint256</span><span class="p">[]</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">random</span><span class="p">;</span>

<span class="n">constructor</span><span class="p">()</span><span class="w"> </span><span class="n">payable</span><span class="w"> </span><span class="n">RandomnessConsumer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Because</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">time</span><span class="p">,</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">deposit</span>
<span class="w">    </span><span class="n">require</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">requiredDeposit</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">requestRandomness</span><span class="p">()</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">payable</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">enough</span>
<span class="w">    </span><span class="n">require</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">MIN_FEE</span><span class="p">);</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Request</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">VRF</span><span class="w"> </span><span class="n">randomness</span>
<span class="w">    </span><span class="n">requestId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomness</span><span class="o">.</span><span class="n">requestLocalVRFRandomWords</span><span class="p">(</span>
<span class="w">        </span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Refund</span><span class="w"> </span><span class="n">address</span>
<span class="w">        </span><span class="n">msg</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Fulfillment</span><span class="w"> </span><span class="n">fee</span>
<span class="w">        </span><span class="n">FULFILLMENT_GAS_LIMIT</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Gas</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fulfillment</span>
<span class="w">        </span><span class="n">SALT_PREFIX</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">bytes32</span><span class="p">(</span><span class="n">requestId</span><span class="o">++</span><span class="p">),</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">salt</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">results</span>
<span class="w">        </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">words</span>
<span class="w">        </span><span class="n">VRF_BLOCKS_DELAY</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Delay</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">fulfilled</span>
<span class="w">    </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">fulfillRequest</span><span class="p">()</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">randomness</span><span class="o">.</span><span class="n">fulfillRequest</span><span class="p">(</span><span class="n">requestId</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">fulfillRandomWords</span><span class="p">(</span>
<span class="w">    </span><span class="n">uint256</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">requestId</span>
<span class="w">    </span><span class="n">uint256</span><span class="p">[]</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">randomWords</span>
<span class="p">)</span><span class="w"> </span><span class="n">internal</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Save</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">randomness</span><span class="w"> </span><span class="n">results</span>
<span class="w">    </span><span class="n">random</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">randomWords</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div> <p>}</p> <p>如您所见，合约中还有一些常量可以根据您的需要进行编辑，尤其是 <code>SALT_PREFIX</code>，它可以用于生成唯一的结果。</p> <p>在以下各节中，您将使用 Remix 来部署合约并与之交互。</p> <h3 id="remix-set-up">Remix设置<a class="headerlink" href="#remix-set-up" title="Permanent link">&para;</a></h3> <p>若要将合约添加到Remix并遵循本教程的这一部分，您需要在Remix中创建一个名为 <code>RandomnessNumber.sol</code> 的新文件，并将 <code>RandomNumber</code> 合约粘贴到该文件中。</p> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-2.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="将随机数生成器合约添加到Remix。" src="/images/builders/ethereum/precompiles/features/randomness/randomness-2.webp"></a></p> <h3 id="compile-deploy-random-number">编译和部署随机数生成器合约<a class="headerlink" href="#compile-deploy-random-number" title="Permanent link">&para;</a></h3> <p>要在 Remix 中编译 <code>RandomNumber.sol</code> 合约，您需要执行以下步骤：</p> <ol> <li>点击从顶部数第二个的 <strong>Compile（编译）</strong> 选项卡</li> <li>点击 <strong>Compile RandomNumber.sol（编译 RandomNumber.sol）</strong> 按钮</li> </ol> <p>如果合约编译成功，您将在 <strong>Compile（编译）</strong> 选项卡旁边看到一个绿色复选标记。</p> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-3.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="在 Remix 中编译随机数生成器合约。" src="/images/builders/ethereum/precompiles/features/randomness/randomness-3.webp"></a></p> <p>现在，您可以按照以下步骤继续部署合约：</p> <ol> <li>点击 <strong>Compile（编译）</strong> 选项卡正下方的 <strong>Deploy and Run（部署和运行）</strong> 选项卡</li> <li>确保在 <strong>ENVIRONMENT（环境）</strong> 下拉菜单中选择了 <strong>Injected Provider - Metamask（注入提供程序 - Metamask）</strong>。选择 <strong>Injected Provider - Metamask（注入提供程序 - Metamask）</strong> 后，MetaMask 可能会提示您将您的帐户连接到 Remix</li> <li>确保在 <strong>ACCOUNT（帐户）</strong> 下显示了正确的帐户</li> <li>在 <strong>VALUE（值）</strong> 字段中输入存款金额，即 <code>1000000000000000000</code> Wei（<code>1</code> 以太币）</li> <li>确保在 <strong>CONTRACT（合约）</strong> 下拉菜单中选择了 <strong>RandomNumber - RandomNumber.sol</strong></li> <li>点击 <strong>Deploy（部署）</strong></li> <li>点击 <strong>Confirm（确认）</strong> 以确认出现的 MetaMask 交易</li> </ol> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-4.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="在 Remix 中部署随机数生成器合约。" src="/images/builders/ethereum/precompiles/features/randomness/randomness-4.webp"></a></p> <p><strong>RANDOMNUMBER</strong> 合约将出现在 <strong>Deployed Contracts（已部署的合约）</strong> 列表中。</p> <h3 id="request-randomness">提交生成随机数的请求<a class="headerlink" href="#request-randomness" title="Permanent link">&para;</a></h3> <p>要请求随机数，您需要使用合约的 <code>requestRandomness</code> 函数，这将要求您提交由随机数预编译定义的押金。您可以通过以下步骤提交随机数请求并支付押金：</p> <ol> <li>在 <strong>VALUE</strong> 字段中输入履行费的金额，它必须等于或大于 <code>RandomNumber</code> 合约中指定的最低费用，即 <code>15000000</code> Gwei。</li> <li>展开 <strong>RANDOMNUMBER</strong> 合约</li> <li>单击 <strong>requestRandomness</strong> 按钮</li> <li>在 MetaMask 中确认交易</li> </ol> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-5.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="使用 Remix 中的随机数生成器合约请求随机数。" src="/images/builders/ethereum/precompiles/features/randomness/randomness-5.webp"></a></p> <p>提交交易后，<code>requestId</code> 将使用请求的 ID 进行更新。您可以使用随机数合约的 <code>requestId</code> 调用来获取请求 ID，并使用随机数预编译的 <code>getRequestStatus</code> 函数来检查此请求 ID 的状态。</p> <h3 id="fulfill-request-save-number">履行请求并保存随机数<a class="headerlink" href="#fulfill-request-save-number" title="Permanent link">&para;</a></h3> <p>提交随机性请求后，您需要等待延迟时间才能履行请求。对于 <code>RandomNumber.sol</code> 合约，延迟设置为随机性预编译中定义的最小区块延迟，即 2 个区块。您还必须在为时过晚之前履行请求。对于本地 VRF，请求在 10000 个区块后过期，对于 BABE epoch 随机性，请求在 10000 个 epoch 后过期。</p> <p>假设您已等待了最小区块数（如果您使用的是 BABE epoch 随机性，则为 epoch 数）并且请求尚未过期，您可以按照以下步骤履行请求：</p> <ol> <li>点击 <strong>fulfillRequest</strong> 按钮</li> <li>在 MetaMask 中确认交易</li> </ol> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-6.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="使用 Remix 中随机数生成器合约履行随机性请求。" src="/images/builders/ethereum/precompiles/features/randomness/randomness-6.webp"></a></p> <p>一旦请求被履行，您可以检查生成的随机数：</p> <ol> <li>展开 <strong>random</strong> 函数</li> <li>由于合约只请求了一个随机词，您可以通过访问 <code>random</code> 数组的 <code>0</code> 索引来获取随机数</li> <li>点击 <strong>call</strong></li> <li>随机数将出现在 <strong>call</strong> 按钮下方</li> </ol> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-7.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="检索由 Remix 中随机数合约生成的随机数。" src="/images/builders/ethereum/precompiles/features/randomness/randomness-7.webp"></a></p> <p>成功履行后，多余的费用和存款将发送到指定的退款地址。</p> <p>如果请求在可以履行之前过期，您可以直接与 Randomness Precompile 交互以清除请求并解锁存款和费用。请参阅以下部分，了解如何执行此操作的说明。</p> <h2 id="interact-directly">使用 Remix 直接与随机数预编译合约交互<a class="headerlink" href="#interact-directly" title="Permanent link">&para;</a></h2> <p>除了通过智能合约与随机数预编译合约交互之外，您还可以在 Remix 中直接与它交互，以执行诸如创建随机数请求、检查请求状态和清除过期请求等操作。请记住，您需要有一个继承自消费者合约的合约才能满足请求，因此，如果您使用预编译合约直接满足请求，将无法使用结果。</p> <h3 id="remix-set-up">Remix 设置<a class="headerlink" href="#remix-set-up" title="Permanent link">&para;</a></h3> <p>要将接口添加到 Remix 并按照本教程的这一部分进行操作，您需要：</p> <ol> <li>获取 <a href="https://github.com/moonbeam-foundation/moonbeam/blob/master/precompiles/randomness/Randomness.sol" target="_blank"><code>Randomness.sol</code></a> 的副本</li> <li>将文件内容粘贴到名为 <strong>Randomness.sol</strong> 的 Remix 文件中</li> </ol> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-8.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="将预编译添加到 Remix" src="/images/builders/ethereum/precompiles/features/randomness/randomness-8.webp"></a></p> <h3 id="compile-randomness">编译与访问随机数预编译<a class="headerlink" href="#compile-randomness" title="Permanent link">&para;</a></h3> <p>接下来，您需要在 Remix 中编译 <code>Randomness.sol</code> 文件。首先，请确保您已打开 <strong>Randomness.sol</strong> 文件，并按照以下步骤操作：</p> <ol> <li>点击从上往下的第二个 <strong>Compile</strong> 选项卡</li> <li>要编译合约，请点击 <strong>Compile Randomness.sol</strong></li> </ol> <p>如果合约编译成功，您将在 <strong>Compile</strong> 选项卡旁边看到一个绿色对勾。</p> <p>您将通过预编译合约的地址访问接口，而不是部署随机数预编译：</p> <ol> <li>点击 Remix 中 <strong>Compile</strong> 选项卡正下方的 <strong>Deploy and Run</strong> 选项卡。请注意，预编译合约已经部署</li> <li>确保在 <strong>ENVIRONMENT</strong> 下拉菜单中选中 <strong>Injected Provider - Metamask</strong>。选择后，MetaMask 可能会提示您将您的帐户连接到 Remix</li> <li>确保在 <strong>ACCOUNT</strong> 下显示正确的帐户</li> <li>确保在 <strong>CONTRACT</strong> 下拉菜单中选中 <strong>Randomness - Randomness.sol</strong>。由于这是一个预编译合约，因此无需部署任何代码。相反，我们将在 <strong>At Address</strong> 字段中提供预编译的地址</li> <li>提供批量预编译的地址：<code>0x0000000000000000000000000000000000000809</code>，然后点击 <strong>At Address</strong></li> </ol> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-9.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="访问地址" src="/images/builders/ethereum/precompiles/features/randomness/randomness-9.webp"></a></p> <p><strong>RANDOMNESS</strong> 预编译将显示在 <strong>Deployed Contracts</strong> 列表中。您将使用它来满足本教程后面从彩票合约发出的随机性请求。</p> <h3 id="get-request-status-and-purge">获取请求状态和清除过期请求<a class="headerlink" href="#get-request-status-and-purge" title="Permanent link">&para;</a></h3> <p>任何人都可以清除过期的请求。您不需要是请求随机数的人就可以清除它。当您清除过期的请求时，请求费用将转移给您，并且请求的存款将退还给原始请求者。</p> <p>要清除请求，首先必须确保请求已过期。为此，您可以使用预编译的 <code>getRequestStatus</code> 函数来验证请求的状态。从该调用返回的数字对应于 <a href="#enums"><code>RequestStatus</code></a> 枚举中值的索引。因此，您需要验证返回的数字是否为 <code>3</code>，表示 <code>Expired</code>（已过期）。</p> <p>验证请求已过期后，您可以调用 <code>purgeExpiredRequest</code> 函数来清除该请求。</p> <p>要验证和清除请求，您可以采取以下步骤：</p> <ol> <li>展开 <strong>RANDOMNESS</strong> 合约</li> <li>输入您要验证是否过期的请求的请求 ID，然后单击 <strong>getRequestStatus</strong></li> <li>响应将显示在函数正下方。验证您是否收到 <code>3</code></li> <li>展开 <strong>purgeExpiredRequest</strong> 函数并输入请求 ID</li> <li>点击 <strong>transact</strong></li> <li>MetaMask 将弹出，您可以确认交易</li> </ol> <p><a class="glightbox" href="/images/builders/ethereum/precompiles/features/randomness/randomness-10.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="清除已过期的请求" src="/images/builders/ethereum/precompiles/features/randomness/randomness-10.webp"></a></p> <p>交易完成后，您可以通过使用相同的请求 ID 再次调用 <strong>getRequestStatus</strong> 函数来验证请求是否已被清除。您应该收到状态 <code>0</code>，即 <code>DoesNotExist</code>（不存在）。您还可以期望请求费用的金额转移到您的帐户。</p> <div class="md-source-file"> <small> <span class="source-file-label">更新时间:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2026年1月20日 16:04:43">2026年1月20日</span> <br> <span class="source-file-seperator">|</span> <span class="source-file-label">创建时间:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2026年1月14日 21:07:51">2026年1月14日</span> </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class="md-footer"> <nav class="md-footer__inner md-grid" aria-label="标题"> <a href="../governance/referenda/" class="md-footer__link md-footer__link--prev" rel="prev"> <div class="md-footer__button md-icon"> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="122.883px" height="122.882px" viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M61.441,0c16.967,0,32.327,6.877,43.446,17.996c11.119,11.119,17.996,26.479,17.996,43.445 c0,16.966-6.877,32.326-17.996,43.445c-11.119,11.118-26.479,17.995-43.446,17.995c-16.966,0-32.326-6.877-43.445-17.995 C6.877,93.768,0,78.407,0,61.441c0-16.967,6.877-32.327,17.996-43.445C29.115,6.877,44.475,0,61.441,0L61.441,0z M71.377,42.166 c1.736-1.784,1.695-4.637-0.088-6.372s-4.637-1.696-6.373,0.088L43.078,58.402l3.23,3.142l-3.244-3.146 c-1.737,1.792-1.693,4.652,0.099,6.39c0.052,0.05,0.104,0.099,0.158,0.146l21.595,22.082c1.736,1.784,4.59,1.823,6.373,0.088 c1.783-1.734,1.824-4.588,0.088-6.372L52.598,61.531L71.377,42.166L71.377,42.166z M98.496,24.386 C89.014,14.903,75.912,9.038,61.441,9.038s-27.572,5.865-37.055,15.348C14.903,33.869,9.038,46.97,9.038,61.441 c0,14.471,5.865,27.572,15.349,37.055c9.482,9.483,22.583,15.349,37.055,15.349s27.573-5.865,37.055-15.349 c9.484-9.482,15.35-22.584,15.35-37.055C113.846,46.97,107.98,33.869,98.496,24.386L98.496,24.386z"/></g></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> 上一个 </span> <span class="md-footer__page-name"> Referenda </span> </div> </a> <a href="../staking/" class="md-footer__link md-footer__link--next" rel="next"> <div class="md-footer__title"> <span class="md-footer__direction"> 下一个 </span> <span class="md-footer__page-name"> 质押功能 </span> </div> <div class="md-footer__button md-icon"> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="122.883px" height="122.882px" viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M61.441,0C44.475,0,29.115,6.877,17.996,17.996C6.877,29.115,0,44.475,0,61.441c0,16.966,6.877,32.326,17.996,43.445 c11.119,11.118,26.479,17.995,43.445,17.995c16.967,0,32.327-6.877,43.446-17.995c11.119-11.119,17.996-26.479,17.996-43.445 c0-16.967-6.877-32.327-17.996-43.445C93.768,6.877,78.408,0,61.441,0L61.441,0z M51.505,42.166 c-1.735-1.784-1.696-4.637,0.088-6.372c1.784-1.735,4.637-1.696,6.373,0.088l21.839,22.521l-3.23,3.142l3.244-3.146 c1.738,1.792,1.693,4.652-0.098,6.39c-0.053,0.05-0.105,0.099-0.158,0.146L57.966,87.017c-1.735,1.784-4.588,1.823-6.373,0.088 c-1.784-1.734-1.823-4.588-0.088-6.372l18.78-19.201L51.505,42.166L51.505,42.166z M24.386,24.386 C33.869,14.903,46.97,9.038,61.441,9.038c14.471,0,27.573,5.865,37.055,15.348c9.484,9.483,15.35,22.584,15.35,37.056 c0,14.471-5.865,27.572-15.35,37.055c-9.482,9.483-22.584,15.349-37.055,15.349c-14.471,0-27.572-5.865-37.055-15.349 C14.903,89.014,9.038,75.912,9.038,61.441C9.038,46.97,14.903,33.869,24.386,24.386L24.386,24.386z"/></g></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="column llms-wrapper"> <p class="llms-title"> AI 兼容文档 </p> <div class="llms-options"> <a class="llms-link" href="/llms.txt">法学硕士文本</a> <a class="llms-link" href="/llms-full.txt">法学硕士全文</a> <a class="llms-link" href="../../../../../../ai-resources/ai-resources/">按主题分类的法学硕士</a> </div> </div> <div class="column social"> <div class="md-social"> <a href="https://discord.com/invite/PfpUATX" target="_blank" rel="noopener" title="Discord" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href="https://t.me/Moonbeam_Official" target="_blank" rel="noopener" title="Telegram" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg> </a> <a href="https://x.com/MoonbeamNetwork" target="_blank" rel="noopener" title="Twitter" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href="https://www.youtube.com/c/MoonbeamNetwork" target="_blank" rel="noopener" title="YouTube" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href="https://github.com/moonbeam-foundation/moonbeam" target="_blank" rel="noopener" title="GitHub" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> <div class="md-footer-copyright"> <div class="copyright-wrapper"> <div class="md-footer-copyright__highlight"> © 2026 Moonbeam Foundation. All Rights Reserved. </div> <div class="papermoon"> <span> 由 <a href="https://papermoon.io/" target="_blank">PaperMoon</a> with 🩵 制作 </span> </div> <div class="policy-links"> <a href="https://moonbeam.network/terms-of-use" target="_blank">使用条款</a> <a href="https://moonbeam.network/privacy-policy" target="_blank">隐私政策</a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-consent" data-md-component="consent" id="__consent" hidden> <div class="md-consent__overlay"></div> <aside class="md-consent__inner"> <form class="md-consent__form md-grid md-typeset" name="consent"> <form class="md-consent__form md-grid md-typeset"> 左侧区域徽标 <div class="cookie-logo"> <img src="../../../../../../assets/images/Moonbeam_Icon_White.webp" alt="用于 Cookie 同意的 Moonbeam 徽标"> </div> 中心区域标题和描述 <div class="cookie-content"> <h4>This website uses cookies</h4> <p>We use essential cookies to make the website work. We would also like to use cookies to understand how you use the website and how you interact with certain features. We may share this information with our analytics partners. For further details, please see our <a href="https://moonbeam.network/cookie-policy" target="_blank" rel="noopener">cookie policy</a>. </p> 管理设置切换 <input class="md-toggle" type="checkbox" id="__settings"> 同意设置 <div class="md-consent__settings"> <ul class="task-list"> <li class="task-list-item"> <label class="task-list-control"> <input type="checkbox" name="analytics" checked> <span class="task-list-indicator"></span> Google Analytics </label> </li> </ul> </div> </div> 右侧区域按钮 <div class="cookie-buttons md-consent__controls"> <button class="md-button md-button--primary">同意</button> <label class="md-button" for="__settings">管理设定</label> <button type="reset" class="md-button md-button--secondary">拒绝</button> </div> </form> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id="__config" type="application/json">{"base":"../../../../../","features":["navigation.tabs","navigation.tabs.sticky","navigation.sections","navigation.indexes","navigation.prune","content.code.copy","announce.dismiss","content.action.edit"],"search":"../../../../../../assets/javascripts/workers/search.d50fe291.min.js","tags":null,"translations":{"clipboard.copied":"\u5df2\u590d\u5236","clipboard.copy":"\u590d\u5236","search.result.more.one":"\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.more.other":"\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.none":"\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.one":"\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.other":"# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.placeholder":"\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22","search.result.term.missing":"\u7f3a\u5c11","select.version":"\u9009\u62e9\u5f53\u524d\u7248\u672c"},"version":null}</script> <script src="../../../../../../assets/javascripts/bundle.56ea9cef.min.js"></script> <script src="../../../../../../js/connectMetaMask.js"></script> <script src="../../../../../../js/errorModal.js"></script> <script src="../../../../../../js/networkModal.js"></script> <script src="../../../../../../js/lang-toggle.js"></script> <script src="../../../../../../js/fixCreatedDate.js"></script> <script src="../../../../../../js/externalLinkModal.js"></script> <script src="../../../../../../js/cookbookInit.js"></script> <script src="../../../../../../js/clipboardCopyllms.js"></script> <script src="../../../../../../js/cookbookEventHandler.js"></script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      const copyTxtFile = async (url) => {
        try {
            const response = await fetch(url);
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const text = await response.text();
            await navigator.clipboard.writeText(text);

            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.add('md-dialog--active');

              const copiedToClipboardMessage =
                copiedToClipboard.querySelector('.md-dialog__inner');
              if (
                copiedToClipboardMessage &&
                copiedToClipboardMessage.textContent !==
                  "已复制"
              ) {
                copiedToClipboardMessage.textContent =
                  "已复制";
              }
              // Set a timer to remove the after 2 seconds (2000ms)
              setTimeout(() => {
                copiedToClipboard.classList.remove('md-dialog--active');
              }, 2000);
            }
          } catch (err) {
            console.error('Failed to copy:', err);
            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.remove('md-dialog--active');
            }
          }
      }

      document.querySelectorAll('.llms').forEach(button => {
        button.addEventListener('click', (event) => {
          event.preventDefault(); // Prevent default link behavior

          const action = button.getAttribute('data-action');
          const fileName = button.getAttribute('data-value');
          if (!fileName) return; // Exit if no file name is found

          // Add 'llms-files/' prefix except for root-level llms.txt and llms-full.txt
          const filePath = (fileName === "llms.txt" || fileName === "llms-full.txt") 
            ? fileName 
            : `llms-files/${fileName}`;
          const url = `https://docs.moonbeam.network/${filePath}`;

          if (action === 'copy') {
            copyTxtFile(url);
          }
        })
      })
    });
  </script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>