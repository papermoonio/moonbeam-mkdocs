<!doctype html><html lang="zh" class="no-js"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="本指南介绍了XCM交易器预编译，并展示了如何使用它的一些功能，通过以太坊库向其他链发送远程调用。"><link rel="canonical" href="https://docs.moonbeam.network/zh/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/"><link rel="prev" href="../xcm-transactor-pallet/"><link rel="next" href="../../remote-evm-calls/"><link rel="icon" href="/assets/images/favicon.webp"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15"><title>XCM交易器预编译 | Moonbeam Docs</title><link rel="stylesheet" href="../../../../../../../assets/stylesheets/main.342714a4.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js" as="script"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Banana+Grotesk:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Banana Grotesk";--md-code-font:"Roboto Mono"}</style><link rel="preconnect" href="https://fonts.googleapis.com"><link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel="stylesheet"><link rel="stylesheet" href="/assets/stylesheets/moonbeam.min.css"><link rel="stylesheet" href="/assets/stylesheets/termynal.min.css"><link rel="stylesheet" href="/assets/stylesheets/timeline-neoteroi.min.css"><script>__md_scope=new URL("../../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-5ZBERCXWC3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-5ZBERCXWC3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-5ZBERCXWC3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><link href="../../../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src="../../../../../../../assets/javascripts/glightbox.min.js"></script><script>window.__externalLinkModalStrings={"zh": {"header": "external_link_modal.header", "message": "external_link_modal.message", "cancel": "external_link_modal.cancel", "continue": "external_link_modal.continue"}};</script></head> <body dir="ltr"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#xcm-transactor" class="md-skip"> 跳转至 </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="标题"> <div class="md-header__left-nav"> <a href="https://docs.moonbeam.network/" title="Moonbeam Docs" class="md-header__button md-logo" aria-label="Moonbeam Docs"> <img src="/assets/images/logo.webp" alt="logo"> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> </div> <div class="md-header__buttons"> <nav class="md-tabs" aria-label="标签" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../">构建者</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../get-started/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/get-started.webp" alt="快速入门" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">快速入门</span> <p class="dropdown-desc">开始构建所需的一切</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../build/historical-updates/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/build.webp" alt="构建" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">构建</span> <p class="dropdown-desc"></p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../ethereum/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/ethereum.webp" alt="以太坊工具包" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">以太坊工具包</span> <p class="dropdown-desc">Ethereum 库、工具和合约</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../substrate/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/substrate.webp" alt="Substrate 工具包" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Substrate 工具包</span> <p class="dropdown-desc">Substrate 库、工具和底层接口</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/interoperability.webp" alt="互操作性" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">互操作性</span> <p class="dropdown-desc">用于跨链开发的 GMP 协议</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../integrations/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/integrations.webp" alt="集成" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">集成</span> <p class="dropdown-desc">要集成的工具和协议</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../../node-operators/">节点运营商</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../../node-operators/networks/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/networks.webp" alt="网络" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">网络</span> <p class="dropdown-desc">运行完整节点、追踪节点或收集人节点</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../../tokens/">代币</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../../tokens/connect/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/connect.webp" alt="连接" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">连接</span> <p class="dropdown-desc">将您的钱包连接到 Moonbeam</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../../tokens/manage/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/manage.webp" alt="管理" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">管理</span> <p class="dropdown-desc">高级帐户和身份服务</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../../tokens/staking/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/staking.webp" alt="质押" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">质押</span> <p class="dropdown-desc">通过委托给收集人来质押代币</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../../tokens/governance/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/governance.webp" alt="治理" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">治理</span> <p class="dropdown-desc">提交和投票参与链上提案</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../../learn/">学习</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../../learn/core-concepts/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/core-concepts.webp" alt="核心概念" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">核心概念</span> <p class="dropdown-desc">了解 Moonbeam 的基础知识</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../../learn/features/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/features.webp" alt="特性" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">特性</span> <p class="dropdown-desc"></p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../../learn/dapp-directory/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/dapp-directory.webp" alt="DApp 目录" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">DApp 目录</span> <p class="dropdown-desc">浏览 DApp 目录和列表流程</p> </div> </a> </li> </ul> </li> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="../../../../../../tutorials/">教程</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="../../../../../../tutorials/eth-api/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/eth-api.webp" alt="以太坊 API" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">以太坊 API</span> <p class="dropdown-desc">从入门到专业的智能合约教程</p> </div> </a> </li> <li class="md-tab__item"> <a href="../../../../../../tutorials/integrations/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/integrations.webp" alt="集成" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">集成</span> <p class="dropdown-desc">通过无缝集成教程深入了解</p> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class="language-picker" data-md-component="language"> <button class="language-picker__toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="选择当前语言"> <span class="language-picker__icon" aria-hidden="true"> <svg viewbox="0 0 24 24" role="img" focusable="false"> <path fill="currentColor" d="M12.87 15.07L10.33 12.5l.03-.03A19.79 19.79 0 0013.5 7h3V5h-7V3H8v2H1v2h11.17a17.77 17.77 0 01-2.64 4.49 17.91 17.91 0 01-3.11-4.49H3.62a19.91 19.91 0 003.95 5.61L2.1 19.37 3.5 20.8l4.9-4.9 3.57 3.55zM18.5 10h-2L12 22h2l1-2h6l1 2h2zm-2.62 8l2.12-4.67L20.12 18z"/> </svg> </span> <span class="language-picker__label">中文</span> <span class="language-picker__chevron" aria-hidden="true"> <svg viewbox="0 0 24 24" role="img" focusable="false"> <path fill="currentColor" d="M7 10l5 5 5-5z"/> </svg> </span> </button> <div class="language-picker__menu" role="menu"> <ul> <li> <a href="./" hreflang="zh" role="menuitem" aria-label="Chinese" class="is-active"> <span class="language-picker__code">中文</span> </a> </li> <li> <a href="../../../../../../../builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/" hreflang="en" role="menuitem" aria-label="English" class> <span class="language-picker__code">EN</span> </a> </li> </ul> </div> </div> <a href="#" class="md-header__button md-button connectMetaMask-nav md-typeset"> 连接钱包 </a> <a class="md-header__button md-button faucet md-typeset" href="https://faucet.moonbeam.network/" target="_blank"> 水龙头 </a> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class="md-search__options" aria-label="搜索"> <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> 正在初始化搜索引擎 </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../../../../../" title="Moonbeam Docs" class="md-nav__button md-logo" aria-label="Moonbeam Docs" data-md-component="logo"> <img src="/assets/images/logo.webp" alt="logo"> </a> </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../" class="md-nav__link"> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../">构建者</a> <label for="__nav_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../get-started/">快速入门</a> <label for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-get-started-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../get-started/quick-start/" class="md-nav__link"> 快速开始 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../get-started/networks/">网络</a> <label for="__nav_2_2_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_2_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-get-started-networks-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../get-started/networks/moonbeam-dev/" class="md-nav__link"> 本地 Moonbeam 开发节点 </a> </li> <li class="md-nav__item"> <a href="../../../../../get-started/networks/moonbase/" class="md-nav__link"> Moonbase Alpha </a> </li> <li class="md-nav__item"> <a href="../../../../../get-started/networks/moonriver/" class="md-nav__link"> Moonriver </a> </li> <li class="md-nav__item"> <a href="../../../../../get-started/networks/moonbeam/" class="md-nav__link"> Moonbeam </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../../get-started/endpoints/" class="md-nav__link"> 网络 RPC 端点 </a> </li> <li class="md-nav__item"> <a href="../../../../../get-started/explorers/" class="md-nav__link"> 区块浏览器 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3"> <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0"> 构建 <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> </label> <li class="md-nav__item"> <a href="../../../../../build/historical-updates/" class="md-nav__link"> 历史更新 </a> </li> <li class="md-nav__item"> <a href="../../../../../build/runtime-upgrades/" class="md-nav__link"> 运行时升级 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/">以太坊工具包</a> <label for="__nav_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/canonical-contracts/" class="md-nav__link"> 规范合约 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/precompiles/">预编译合约</a> <label for="__nav_2_4_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/precompiles/account/">账户管理</a> <label for="__nav_2_4_3_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-account-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/account/identity/" class="md-nav__link"> 身份 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/account/proxy/" class="md-nav__link"> 代理 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/precompiles/ux/">用户体验</a> <label for="__nav_2_4_3_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-ux-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/ux/batch/" class="md-nav__link"> 批量 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/ux/call-permit/" class="md-nav__link"> 调用许可 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/ux/erc20/" class="md-nav__link"> 原生代币 ERC-20 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/precompiles/features/">网络特性</a> <label for="__nav_2_4_3_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/precompiles/features/governance/">Governance</a> <label for="__nav_2_4_3_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-features-governance-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/features/governance/collective/" class="md-nav__link"> Collective </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/features/governance/conviction-voting/" class="md-nav__link"> Conviction Voting </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/features/governance/preimage/" class="md-nav__link"> Preimage </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/features/governance/referenda/" class="md-nav__link"> Referenda </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/features/randomness/" class="md-nav__link"> 随机性 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/features/staking/" class="md-nav__link"> 质押功能 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/precompiles/interoperability/">互操作性</a> <label for="__nav_2_4_3_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-interoperability-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/interoperability/gmp/" class="md-nav__link"> GMP </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/" class="md-nav__link"> X 代币 </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xc20/send-xc20s/eth-api/" class="md-nav__link"> XCM 接口 </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/" class="md-nav__link"> XCM 转账器 </a> </li> <li class="md-nav__item"> <a href="/builders/interoperability/xcm/xcm-utils/" class="md-nav__link"> XCM 实用工具 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/precompiles/utility/">实用工具</a> <label for="__nav_2_4_3_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_3_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-precompiles-utility-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/utility/eth-mainnet/" class="md-nav__link"> 以太坊原生 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/utility/registry/" class="md-nav__link"> 预编译注册表 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/utility/relay-data-verifier/" class="md-nav__link"> 中继数据验证器 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/precompiles/utility/non-specific/" class="md-nav__link"> 非网络特定 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/libraries/">库</a> <label for="__nav_2_4_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-libraries-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/libraries/ethersjs/" class="md-nav__link"> Ethers.js </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/libraries/viem/" class="md-nav__link"> viem </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/libraries/web3py/" class="md-nav__link"> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/dev-env/">开发环境</a> <label for="__nav_2_4_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-dev-env-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/dev-env/foundry/" class="md-nav__link"> Foundry </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/dev-env/hardhat/" class="md-nav__link"> Hardhat </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/dev-env/remix/" class="md-nav__link"> Remix </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/dev-env/tenderly/" class="md-nav__link"> Tenderly </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/verify-contracts/">验证合约</a> <label for="__nav_2_4_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-verify-contracts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/verify-contracts/block-explorers/" class="md-nav__link"> 区块浏览器 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/verify-contracts/etherscan-plugins/" class="md-nav__link"> Etherscan 插件 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/verify-contracts/api-verification/" class="md-nav__link"> 基于 API 的验证 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../ethereum/json-rpc/">JSON-RPC 接口</a> <label for="__nav_2_4_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_4_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-ethereum-json-rpc-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../ethereum/json-rpc/eth-rpc/" class="md-nav__link"> 标准以太坊 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/json-rpc/debug-trace/" class="md-nav__link"> 非标准以太坊: 追踪 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/json-rpc/pubsub/" class="md-nav__link"> 非标准以太坊: 发布订阅 </a> </li> <li class="md-nav__item"> <a href="../../../../../ethereum/json-rpc/moonbeam-custom-api/" class="md-nav__link"> 自定义 Moonbeam </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../substrate/">Substrate 工具包</a> <label for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-substrate-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../substrate/libraries/">库</a> <label for="__nav_2_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-substrate-libraries-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../substrate/libraries/polkadot-js-api/" class="md-nav__link"> Polkadot.js API </a> </li> <li class="md-nav__item"> <a href="../../../../../substrate/libraries/py-substrate-interface/" class="md-nav__link"> Py Substrate Interface </a> </li> <li class="md-nav__item"> <a href="../../../../../substrate/libraries/sidecar/" class="md-nav__link"> Sidecar </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../substrate/dev-env/">开发环境</a> <label for="__nav_2_5_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-substrate-dev-env-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../substrate/dev-env/chopsticks/" class="md-nav__link"> Chopsticks </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../../../">互操作性</a> <label for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../../">XCM 互操作性</a> <label for="__nav_2_6_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_2_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_6_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../overview/" class="md-nav__link"> 概览 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../core-concepts/">核心概念</a> <label for="__nav_2_6_2_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-core-concepts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../core-concepts/instructions/" class="md-nav__link"> XCM 指令 </a> </li> <li class="md-nav__item"> <a href="../../../core-concepts/multilocations/" class="md-nav__link"> 多位置 </a> </li> <li class="md-nav__item"> <a href="../../../core-concepts/weights-fees/" class="md-nav__link"> 权重和费用 </a> </li> <li class="md-nav__item"> <a href="../../../core-concepts/sovereign-accounts/" class="md-nav__link"> 主权账户 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../xc-registration/">XC 注册</a> <label for="__nav_2_6_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-xc-registration-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../xc-registration/forum-templates/" class="md-nav__link"> 论坛模板 </a> </li> <li class="md-nav__item"> <a href="../../../xc-registration/xc-integration/" class="md-nav__link"> XC 通道注册 </a> </li> <li class="md-nav__item"> <a href="../../../xc-registration/assets/" class="md-nav__link"> 通过治理的 XC 资产注册 </a> </li> <li class="md-nav__item"> <a href="../../../xc-registration/self-serve-asset-registration/" class="md-nav__link"> 自助资产注册 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../xc20/">XC-20s</a> <label for="__nav_2_6_2_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-xc20-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../xc20/overview/" class="md-nav__link"> 概览 </a> </li> <li class="md-nav__item"> <a href="../../../xc20/interact/" class="md-nav__link"> 与 XC-20s 交互 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_5_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../xc20/send-xc20s/">发送 XC-20s</a> <label for="__nav_2_6_2_5_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_6_2_5_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_2_5_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-xc20-send-xc20s-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../xc20/send-xc20s/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../../xc20/send-xc20s/xcm-pallet/" class="md-nav__link"> 使用 Substrate API：Polkadot XCM Pallet </a> </li> <li class="md-nav__item"> <a href="../../../xc20/send-xc20s/xtokens-precompile/" class="md-nav__link"> 使用 Ethereum API：X-Tokens Precompile </a> </li> <li class="md-nav__item"> <a href="../../../xc20/send-xc20s/eth-api/" class="md-nav__link"> 使用 Ethereum API：XCM Precompile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_6" checked> <div class="md-nav__link md-nav__link--index "> <a href="../../">远程执行</a> <label for="__nav_2_6_2_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_6_2_6_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_6_2_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-remote-execution-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../computed-origins/" class="md-nav__link"> 计算来源账户 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_2_6_4" checked> <div class="md-nav__link md-nav__link--index "> <a href="../">远程 Substrate 调用</a> <label for="__nav_2_6_2_6_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_6_2_6_4_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_2_6_2_6_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-xcm-remote-execution-substrate-calls-" data-md-scrollfix> <li class="md-nav__item"> <a href="../xcm-transactor-pallet/" class="md-nav__link"> 使用 Substrate API </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> 使用以太坊 API <span class="md-nav__icon md-icon"></span> </label> <div class="md-nav__link-wrapper md-nav__item md-nav__item--active"> <a href="./" class="md-nav__link md-nav__link--active"> 使用以太坊 API </a> </div> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  material_overrides.partials.toc.permission_is_hereby_granted_free_of_charge_to_any_person_obtaining_a_copy_of_this_software_and_associated_documentation_files_the_software_to_deal_in_the_software_without_restriction_including_without_limitation_the_rights_to_use_copy_modify_merge_publish_distribute_sublicense_and_or_sell_copies_of_the_software_and_to_permit_persons_to_whom_the_software_is_furnished_to_do_so_subject_to_the_following_conditions_the_above_copyright_notice_and_this_permission_notice_shall_be_included_in_all_copies_or_substantial_portions_of_the_software_the_software_is_provided_as_is_without_warranty_of_any_kind_express_or_implied_including_but_not_limited_to_the_warranties_of_merchantability_fitness_for_a_particular_purpose_and_non_infringement_in_no_event_shall_the_authors_or_copyright_holders_be_liable_for_any_claim_damages_or_other_liability_whether_in_an_action_of_contract_tort_or_otherwise_arising_from_out_of_or_in_connection_with_the_software_or_the_use_or_other_dealings_in_the_software

<!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> <div class="toc-sections-title">Sections</div> </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#precompile-address" class="md-nav__link"> <span class="md-ellipsis"> XCM Transactor 预编译合约地址 </span> </a> </li> <li class="md-nav__item"> <a href="#xcmtrasactor-solidity-interface" class="md-nav__link"> <span class="md-ellipsis"> XCM Transactor Solidity 接口 </span> </a> </li> <li class="md-nav__item"> <a href="#xcm-instructions-for-remote-execution" class="md-nav__link"> <span class="md-ellipsis"> 用于远程执行的 XCM 指令 </span> </a> </li> <li class="md-nav__item"> <a href="#building-the-precompile-multilocation" class="md-nav__link"> <span class="md-ellipsis"> 构建预编译多重定位 </span> </a> </li> <li class="md-nav__item"> <a href="#xcmtransactor-transact-through-signed" class="md-nav__link"> <span class="md-ellipsis"> 通过计算来源账户进行交易 </span> </a> <nav class="md-nav" aria-label="通过计算来源账户进行交易"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#xcmtransactor-signed-check-prerequisites" class="md-nav__link"> <span class="md-ellipsis"> 检查先决条件 </span> </a> </li> <li class="md-nav__item"> <a href="#xcm-transact-through-signed" class="md-nav__link"> <span class="md-ellipsis"> 构建 XCM </span> </a> </li> <li class="md-nav__item"> <a href="#transact-through-computed-origin-fees" class="md-nav__link"> <span class="md-ellipsis"> 通过计算 Origin 费用进行 XCM 交易 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../remote-evm-calls/" class="md-nav__link"> 远程 EVM 调用 </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="https://moonbeam-foundation.github.io/xcm-sdk/latest/" class="md-nav__link"> XCM SDK </a> </li> <li class="md-nav__item"> <a href="../../../send-execute-xcm/" class="md-nav__link"> 发送、执行和测试 XCM </a> </li> <li class="md-nav__item"> <a href="../../../xcm-utils/" class="md-nav__link"> XCM 实用工具 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../protocols/">跨链协议</a> <label for="__nav_2_6_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-interoperability-protocols-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../protocols/axelar/" class="md-nav__link"> Axelar </a> </li> <li class="md-nav__item"> <a href="../../../../protocols/hyperlane/" class="md-nav__link"> Hyperlane </a> </li> <li class="md-nav__item"> <a href="../../../../protocols/layerzero/" class="md-nav__link"> LayerZero </a> </li> <li class="md-nav__item"> <a href="../../../../protocols/wormhole/" class="md-nav__link"> Wormhole </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../mrl/" class="md-nav__link"> Moonbeam 路由流动性 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../integrations/">集成</a> <label for="__nav_2_7"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_7"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../integrations/indexers/">索引器</a> <label for="__nav_2_7_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_7_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-integrations-indexers-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../integrations/indexers/covalent/" class="md-nav__link"> GoldRush API </a> </li> <li class="md-nav__item"> <a href="../../../../../integrations/indexers/subquery/" class="md-nav__link"> SubQuery </a> </li> <li class="md-nav__item"> <a href="../../../../../integrations/indexers/subsquid/" class="md-nav__link"> SQD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../integrations/oracles/">预言机</a> <label for="__nav_2_7_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_7_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-builders-integrations-oracles-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../integrations/oracles/api3/" class="md-nav__link"> API3 </a> </li> <li class="md-nav__item"> <a href="../../../../../integrations/oracles/dia/" class="md-nav__link"> DIA </a> </li> <li class="md-nav__item"> <a href="../../../../../integrations/oracles/supra/" class="md-nav__link"> Supra </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../node-operators/">节点运营商</a> <label for="__nav_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../node-operators/networks/">网络</a> <label for="__nav_3_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-networks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../node-operators/networks/run-a-node/">运行一个节点</a> <label for="__nav_3_2_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-networks-run-a-node-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/run-a-node/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/run-a-node/docker/" class="md-nav__link"> 使用 Docker </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/run-a-node/systemd/" class="md-nav__link"> 使用 Systemd </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/run-a-node/flags/" class="md-nav__link"> 标志 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/run-a-node/compile-binary/" class="md-nav__link"> 编译二进制文件 </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/tracing-node/" class="md-nav__link"> 运行追踪节点 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../node-operators/networks/collators/">校对者</a> <label for="__nav_3_2_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-node-operators-networks-collators-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/collators/overview/" class="md-nav__link"> 概述 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/collators/faq/" class="md-nav__link"> 常见问题 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/collators/requirements/" class="md-nav__link"> 要求 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/collators/account-management/" class="md-nav__link"> 账户管理 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/collators/author-mapping/" class="md-nav__link"> 作者映射预编译 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/collators/activities/" class="md-nav__link"> 校对者活动 </a> </li> <li class="md-nav__item"> <a href="../../../../../../node-operators/networks/collators/orbiter/" class="md-nav__link"> 轨道器计划 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tokens/">代币</a> <label for="__nav_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tokens/connect/">连接</a> <label for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-connect-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../tokens/connect/ledger/" class="md-nav__link"> Ledger </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/connect/metamask/" class="md-nav__link"> MetaMask </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/connect/polkadotjs/" class="md-nav__link"> Polkadot.js 应用 </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/connect/subwallet/" class="md-nav__link"> SubWallet </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/connect/talisman/" class="md-nav__link"> Talisman </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/connect/trezor/" class="md-nav__link"> Trezor </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/connect/on-ramps/" class="md-nav__link"> 入金渠道 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tokens/manage/">管理</a> <label for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-manage-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../tokens/manage/proxy-accounts/" class="md-nav__link"> 代理账户 </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/manage/multisig-safe/" class="md-nav__link"> Moonbeam Safe </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/manage/identity/" class="md-nav__link"> 身份管理 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tokens/staking/">质押</a> <label for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-staking-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../tokens/staking/stake/" class="md-nav__link"> 如何质押 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tokens/governance/">治理</a> <label for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tokens-governance-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../tokens/governance/proposals/" class="md-nav__link"> 提交民主提案 </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/governance/voting/" class="md-nav__link"> 对提案投票 </a> </li> <li class="md-nav__item"> <a href="../../../../../../tokens/governance/treasury-spend/" class="md-nav__link"> 提交国库提案 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../learn/">学习</a> <label for="__nav_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../learn/core-concepts/">核心概念</a> <label for="__nav_5_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-learn-core-concepts-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../learn/core-concepts/balances/" class="md-nav__link"> 账户余额 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/core-concepts/transfers-api/" class="md-nav__link"> 余额转账 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/core-concepts/consensus-finality/" class="md-nav__link"> 共识与最终性 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/core-concepts/tx-fees/" class="md-nav__link"> 交易费用 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/core-concepts/unified-accounts/" class="md-nav__link"> 统一账户 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/core-concepts/security/" class="md-nav__link"> 安全注意事项 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/core-concepts/glossary/" class="md-nav__link"> 术语表 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../learn/features/">特性</a> <label for="__nav_5_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-learn-features-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../learn/features/eth-compatibility/" class="md-nav__link"> 以太坊兼容性 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/features/governance/" class="md-nav__link"> 治理 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/features/randomness/" class="md-nav__link"> 随机性 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/features/staking/" class="md-nav__link"> 质押 </a> </li> <li class="md-nav__item"> <a href="../../../../../../learn/features/treasury/" class="md-nav__link"> 国库 </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../../../../../learn/dapp-directory/" class="md-nav__link"> DApp 目录 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tutorials/">教程</a> <label for="__nav_6"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tutorials-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tutorials/eth-api/">以太坊 API</a> <label for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tutorials-eth-api-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../tutorials/eth-api/using-tenderly/" class="md-nav__link"> [Tenderly] 使用 Tenderly 调试和模拟交易 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3"> <div class="md-nav__link md-nav__link--index "> <a href="../../../../../../tutorials/integrations/">集成</a> <label for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list zh-tutorials-integrations-" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../../../tutorials/integrations/0xgasless/" class="md-nav__link"> 启用无 Gas 交易 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"><!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  material_overrides.partials.toc.permission_is_hereby_granted_free_of_charge_to_any_person_obtaining_a_copy_of_this_software_and_associated_documentation_files_the_software_to_deal_in_the_software_without_restriction_including_without_limitation_the_rights_to_use_copy_modify_merge_publish_distribute_sublicense_and_or_sell_copies_of_the_software_and_to_permit_persons_to_whom_the_software_is_furnished_to_do_so_subject_to_the_following_conditions_the_above_copyright_notice_and_this_permission_notice_shall_be_included_in_all_copies_or_substantial_portions_of_the_software_the_software_is_provided_as_is_without_warranty_of_any_kind_express_or_implied_including_but_not_limited_to_the_warranties_of_merchantability_fitness_for_a_particular_purpose_and_non_infringement_in_no_event_shall_the_authors_or_copyright_holders_be_liable_for_any_claim_damages_or_other_liability_whether_in_an_action_of_contract_tort_or_otherwise_arising_from_out_of_or_in_connection_with_the_software_or_the_use_or_other_dealings_in_the_software

<!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> <div class="toc-sections-title">Sections</div> </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#precompile-address" class="md-nav__link"> <span class="md-ellipsis"> XCM Transactor 预编译合约地址 </span> </a> </li> <li class="md-nav__item"> <a href="#xcmtrasactor-solidity-interface" class="md-nav__link"> <span class="md-ellipsis"> XCM Transactor Solidity 接口 </span> </a> </li> <li class="md-nav__item"> <a href="#xcm-instructions-for-remote-execution" class="md-nav__link"> <span class="md-ellipsis"> 用于远程执行的 XCM 指令 </span> </a> </li> <li class="md-nav__item"> <a href="#building-the-precompile-multilocation" class="md-nav__link"> <span class="md-ellipsis"> 构建预编译多重定位 </span> </a> </li> <li class="md-nav__item"> <a href="#xcmtransactor-transact-through-signed" class="md-nav__link"> <span class="md-ellipsis"> 通过计算来源账户进行交易 </span> </a> <nav class="md-nav" aria-label="通过计算来源账户进行交易"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#xcmtransactor-signed-check-prerequisites" class="md-nav__link"> <span class="md-ellipsis"> 检查先决条件 </span> </a> </li> <li class="md-nav__item"> <a href="#xcm-transact-through-signed" class="md-nav__link"> <span class="md-ellipsis"> 构建 XCM </span> </a> </li> <li class="md-nav__item"> <a href="#transact-through-computed-origin-fees" class="md-nav__link"> <span class="md-ellipsis"> 通过计算 Origin 费用进行 XCM 交易 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div><div class="feedback-actions-container"><div class="feedback-section"> <form class="md-feedback" name="feedback" data-md-component="feedback"> <fieldset> <legend class="md-feedback__title"> 这个页面有帮助吗？ </legend> <div class="md-feedback__inner"> <div class="md-feedback__list"> <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73zM1 21h4V9H1z"/></svg> </button> <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2"/></svg> </button> </div> <div class="md-feedback__note"> <div data-md-value="1" hidden> 感谢您的反馈！ </div> <div data-md-value="0" hidden> 感谢您的反馈！请提交 <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+XCM%E4%BA%A4%E6%98%93%E5%99%A8%E9%A2%84%E7%BC%96%E8%AF%91+-+/zh/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/" target="_blank" rel="noopener">更多反馈</a> 来帮助我们改进。 </div> </div> </div> </fieldset> <div class="divider"></div> </form> </div><div class="edit-section"> <a href="https://github.com/moonbeam-foundation/moonbeam-docs/edit/master/zh/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile.md" title="编辑" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> 编辑 </a> </div> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <h1 id="xcm-transactor">使用 XCM Transactor 预编译进行远程执行<a class="headerlink" href="#xcm-transactor" title="Permanent link">&para;</a></h1> <p>XCM 消息由一系列由跨共识虚拟机 (XCVM) 执行的<a href="/builders/interoperability/xcm/core-concepts/instructions/" target="_blank">指令</a>组成。这些指令的组合会产生预定的操作，例如跨链代币转移，更有趣的是，远程跨链执行。远程执行涉及从一个区块链在另一个区块链上执行操作或动作，同时保持发送者身份和权限的完整性。</p> <p>通常，XCM 消息是从根源（即 SUDO 或通过治理）发送的，这对于希望通过简单交易利用远程跨链调用的项目来说并不理想。<a href="https://github.com/moonbeam-foundation/moonbeam/blob/master/pallets/xcm-transactor/src/lib.rs" target="_blank">XCM Transactor Pallet</a> 可以通过<a href="/builders/interoperability/xcm/overview/#general-xcm-definitions" target="_blank">主权账户</a>（应仅允许通过治理）或通过来自源链的简单交易的<a href="/builders/interoperability/xcm/remote-execution/computed-origins/" target="_blank">计算来源账户</a>，轻松地在远程链上进行交易。</p> <p>但是，XCM Transactor Pallet 是用 Rust 编写的，通常无法从 Moonbeam 的 Ethereum API 端访问。因此，Moonbeam 引入了 XCM Transactor 预编译，它是一个 Solidity 接口，允许您使用 Ethereum API 直接与 Substrate pallet 交互。</p> <p>本指南将向您展示如何使用 XCM Transactor 预编译将 XCM 消息从基于 Moonbeam 的网络发送到生态系统中的其他链。</p> <p><strong>请注意，通过 XCM 消息远程执行的操作仍然存在限制</strong>。</p> <p><strong>开发人员必须了解，发送不正确的 XCM 消息可能会导致资金损失。</strong> 因此，在转移到生产环境之前，必须在测试网上测试 XCM 功能。</p> <h2 id="precompile-address">XCM Transactor 预编译合约地址<a class="headerlink" href="#precompile-address" title="Permanent link">&para;</a></h2> <p>XCM Transactor 预编译有多个版本。<strong>V1 将在不久的将来被弃用</strong>，因此所有实现都必须迁移到更新的接口。</p> <p>XCM Transactor 预编译位于以下地址：</p> <p>===</p> <div class="codehilite"><pre><span></span><code><span class="p">|</span> <span class="s s-Atom">版本</span>  <span class="p">|</span>                                <span class="s s-Atom">地址</span>                                 <span class="p">|</span>
<span class="p">|</span><span class="o">:-</span><span class="s s-Atom">------:</span><span class="p">|</span><span class="o">:-</span><span class="s s-Atom">---------------------------------------------------------------------:</span><span class="p">|</span>
<span class="p">|</span>   <span class="nv">V1</span>    <span class="p">|</span> <span class="o">&lt;</span><span class="s s-Atom">pre</span><span class="o">&gt;</span><span class="mh">0x0000000000000000000000000000000000000806</span><span class="s s-Atom">&lt;/pre</span><span class="o">&gt;</span> <span class="p">|</span>
<span class="p">|</span>   <span class="nv">V2</span>    <span class="p">|</span> <span class="o">&lt;</span><span class="s s-Atom">pre</span><span class="o">&gt;</span><span class="mh">0x000000000000000000000000000000000000080d</span><span class="s s-Atom">&lt;/pre</span><span class="o">&gt;</span> <span class="p">|</span>
<span class="p">|</span>   <span class="nv">V3</span>    <span class="p">|</span> <span class="o">&lt;</span><span class="s s-Atom">pre</span><span class="o">&gt;</span><span class="mh">0x0000000000000000000000000000000000000817</span><span class="s s-Atom">&lt;/pre</span><span class="o">&gt;</span> <span class="p">|</span>
</code></pre></div> <p>=== | 版本 | 地址 | |:-------:|:-----------------------------------------------------------------------:| | V1 | <pre>0x0000000000000000000000000000000000000806</pre> | | V2 | <pre>0x000000000000000000000000000000000000080d</pre> | | V3 | <pre>0x0000000000000000000000000000000000000817</pre> |</p> <p>===</p> <div class="codehilite"><pre><span></span><code><span class="p">|</span> <span class="s s-Atom">版本</span>  <span class="p">|</span>                                <span class="s s-Atom">地址</span>                                 <span class="p">|</span>
<span class="p">|</span><span class="o">:-</span><span class="s s-Atom">------:</span><span class="p">|</span><span class="o">:-</span><span class="s s-Atom">---------------------------------------------------------------------:</span><span class="p">|</span>
<span class="p">|</span>   <span class="nv">V1</span>    <span class="p">|</span> <span class="o">&lt;</span><span class="s s-Atom">pre</span><span class="o">&gt;</span><span class="mh">0x0000000000000000000000000000000000000806</span><span class="s s-Atom">&lt;/pre</span><span class="o">&gt;</span> <span class="p">|</span>
<span class="p">|</span>   <span class="nv">V2</span>    <span class="p">|</span> <span class="o">&lt;</span><span class="s s-Atom">pre</span><span class="o">&gt;</span><span class="mh">0x000000000000000000000000000000000000080d</span><span class="s s-Atom">&lt;/pre</span><span class="o">&gt;</span> <span class="p">|</span>
<span class="p">|</span>   <span class="nv">V3</span>    <span class="p">|</span> <span class="o">&lt;</span><span class="s s-Atom">pre</span><span class="o">&gt;</span><span class="mh">0x0000000000000000000000000000000000000817</span><span class="s s-Atom">&lt;/pre</span><span class="o">&gt;</span> <span class="p">|</span>
</code></pre></div> <div class="admonition note"> <p class="admonition-title">Note</p> <p>There can be some unintended consequences when using the precompiled contracts on Moonbeam. Please refer to the <a href="/learn/core-concepts/security/" target="_blank">Security Considerations</a> page for more information.</p> </div> <h2 id="xcmtrasactor-solidity-interface">XCM Transactor Solidity 接口<a class="headerlink" href="#xcmtrasactor-solidity-interface" title="Permanent link">&para;</a></h2> <p>XCM Transactor 预编译合约是一个 Solidity 接口，开发者可以通过它使用 Ethereum API 与 XCM Transactor Pallet 交互。</p> <details class="code"> <summary>XcmTransactorV1.sol</summary> <p>solidity // SPDX-License-Identifier: GPL-3.0-only pragma solidity &gt;=0.8.3;</p> <p>/// @dev The XcmTransactorV1 contract's address. address constant XCM_TRANSACTOR_V1_ADDRESS = 0x0000000000000000000000000000000000000806;</p> <p>/// @dev The XcmTransactorV1 contract's instance. XcmTransactorV1 constant XCM_TRANSACTOR_V1_CONTRACT = XcmTransactorV1( XCM_TRANSACTOR_V1_ADDRESS );</p> <p>/// @author The Moonbeam Team /// @title Xcm Transactor Interface /// @dev The interface through which solidity contracts will interact with xcm transactor pallet /// @custom:address 0x0000000000000000000000000000000000000806 interface XcmTransactorV1 { // A multilocation is defined by its number of parents and the encoded junctions (interior) struct Multilocation { uint8 parents; bytes[] interior; }</p> <div class="codehilite"><pre><span></span><code><span class="c1">/// Get index of an account in xcm transactor</span>
<span class="c1">/// @custom:selector 3fdc4f36</span>
<span class="c1">/// @param index The index of which we want to retrieve the account</span>
<span class="c1">/// @return owner The owner of the derivative index</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">indexToAccount</span><span class="p">(</span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="w"> </span><span class="nx">view</span><span class="w"> </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">address</span><span class="w"> </span><span class="nx">owner</span><span class="p">);</span>

<span class="c1">/// DEPRECATED, replaced by transactInfoWithSigned</span>
<span class="c1">/// Get transact info of a multilocation</span>
<span class="c1">/// @custom:selector d07d87c3</span>
<span class="c1">/// @param multilocation The location for which we want to know the transact info</span>
<span class="c1">/// @return transactExtraWeight The extra weight involved in the XCM message of using derivative</span>
<span class="c1">/// @return feePerSecond The amount of fee charged for a second of execution in the dest</span>
<span class="c1">/// @return maxWeight Maximum allowed weight for a single message in dest</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactInfo</span><span class="p">(</span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">multilocation</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">view</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactExtraWeight</span><span class="p">,</span>
<span class="w">        </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feePerSecond</span><span class="p">,</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">maxWeight</span>
<span class="w">    </span><span class="p">);</span>

<span class="c1">/// Get transact info of a multilocation</span>
<span class="c1">/// @custom:selector b689e20c</span>
<span class="c1">/// @param multilocation The location for which we want to know the transact info</span>
<span class="c1">/// @return transactExtraWeight The extra weight involved in the XCM message of using derivative</span>
<span class="c1">/// @return transactExtraWeightSigned The extra weight involved in the XCM message of using signed</span>
<span class="c1">/// @return maxWeight Maximum allowed weight for a single message in dest</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactInfoWithSigned</span><span class="p">(</span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">multilocation</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">view</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactExtraWeight</span><span class="p">,</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactExtraWeightSigned</span><span class="p">,</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">maxWeight</span>
<span class="w">    </span><span class="p">);</span>

<span class="c1">/// Get fee per second charged in its reserve chain for an asset</span>
<span class="c1">/// @custom:selector 906c9990</span>
<span class="c1">/// @param multilocation The asset location for which we want to know the fee per second value</span>
<span class="c1">/// @return feePerSecond The fee per second that the reserve chain charges for this asset</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">feePerSecond</span><span class="p">(</span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">multilocation</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">view</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feePerSecond</span><span class="p">);</span>

<span class="c1">/// Transact through XCM using fee based on its multilocation</span>
<span class="c1">/// @custom:selector 94a63c54</span>
<span class="c1">/// @dev The token transfer burns/transfers the corresponding amount before sending</span>
<span class="c1">/// @param transactor The transactor to be used</span>
<span class="c1">/// @param index The index to be used</span>
<span class="c1">/// @param feeAsset The asset in which we want to pay fees.</span>
<span class="c1">/// It has to be a reserve of the destination chain</span>
<span class="c1">/// @param weight The weight we want to buy in the destination chain</span>
<span class="c1">/// @param innerCall The inner call to be executed in the destination chain</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughDerivativeMultilocation</span><span class="p">(</span>
<span class="w">    </span><span class="nx">uint8</span><span class="w"> </span><span class="nx">transactor</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">feeAsset</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">weight</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">innerCall</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// Transact through XCM using fee based on its currencyId</span>
<span class="c1">/// @custom:selector 02ae072d</span>
<span class="c1">/// @dev The token transfer burns/transfers the corresponding amount before sending</span>
<span class="c1">/// @param transactor The transactor to be used</span>
<span class="c1">/// @param index The index to be used</span>
<span class="c1">/// @param currencyId Address of the currencyId of the asset to be used for fees</span>
<span class="c1">/// It has to be a reserve of the destination chain</span>
<span class="c1">/// @param weight The weight we want to buy in the destination chain</span>
<span class="c1">/// @param innerCall The inner call to be executed in the destination chain</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughDerivative</span><span class="p">(</span>
<span class="w">    </span><span class="nx">uint8</span><span class="w"> </span><span class="nx">transactor</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">currencyId</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">weight</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">innerCall</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// Transact through XCM using fee based on its multilocation through signed origins</span>
<span class="c1">/// @custom:selector 71d31587</span>
<span class="c1">/// @dev No token is burnt before sending the message. The caller must ensure the destination</span>
<span class="c1">/// is able to understand the DescendOrigin message, and create a unique account from which</span>
<span class="c1">/// dispatch the call</span>
<span class="c1">/// @param dest The destination chain (as multilocation) where to send the message</span>
<span class="c1">/// @param feeLocation The asset multilocation that indentifies the fee payment currency</span>
<span class="c1">/// It has to be a reserve of the destination chain</span>
<span class="c1">/// @param weight The weight we want to buy in the destination chain for the call to be made</span>
<span class="c1">/// @param call The call to be executed in the destination chain</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughSignedMultilocation</span><span class="p">(</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">dest</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">feeLocation</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">weight</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">call</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// Transact through XCM using fee based on its erc20 address through signed origins</span>
<span class="c1">/// @custom:selector 42ca339d</span>
<span class="c1">/// @dev No token is burnt before sending the message. The caller must ensure the destination</span>
<span class="c1">/// is able to understand the DescendOrigin message, and create a unique account from which</span>
<span class="c1">/// dispatch the call</span>
<span class="c1">/// @param dest The destination chain (as multilocation) where to send the message</span>
<span class="c1">/// @param feeLocationAddress The ERC20 address of the token we want to use to pay for fees</span>
<span class="c1">/// only callable if such an asset has been BRIDGED to our chain</span>
<span class="c1">/// @param weight The weight we want to buy in the destination chain for the call to be made</span>
<span class="c1">/// @param call The call to be executed in the destination chain</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughSigned</span><span class="p">(</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">dest</span><span class="p">,</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">feeLocationAddress</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">weight</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">call</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// @dev Encode &#39;utility.as_derivative&#39; relay call</span>
<span class="c1">/// @custom:selector ff86378d</span>
<span class="c1">/// @param transactor The transactor to be used</span>
<span class="c1">/// @param index: The derivative index to use</span>
<span class="c1">/// @param innerCall: The inner call to be executed from the derivated address</span>
<span class="c1">/// @return result The bytes associated with the encoded call</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">encodeUtilityAsDerivative</span><span class="p">(</span><span class="nx">uint8</span><span class="w"> </span><span class="nx">transactor</span><span class="p">,</span><span class="w"> </span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">innerCall</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">pure</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
</code></pre></div> <p>}</p> </details> <details class="code"> <summary>XcmTransactorV2.sol</summary> <p>solidity // SPDX-License-Identifier: GPL-3.0-only pragma solidity &gt;=0.8.0;</p> <p>/// @dev The XcmTransactorV2 contract's address. address constant XCM_TRANSACTOR_V2_ADDRESS = 0x000000000000000000000000000000000000080D;</p> <p>/// @dev The XcmTransactorV2 contract's instance. XcmTransactorV2 constant XCM_TRANSACTOR_V2_CONTRACT = XcmTransactorV2( XCM_TRANSACTOR_V2_ADDRESS );</p> <p>/// @author The Moonbeam Team /// @title Xcm Transactor Interface /// The interface through which solidity contracts will interact with xcm transactor pallet /// @custom:address 0x000000000000000000000000000000000000080D interface XcmTransactorV2 { // A multilocation is defined by its number of parents and the encoded junctions (interior) struct Multilocation { uint8 parents; bytes[] interior; }</p> <div class="codehilite"><pre><span></span><code><span class="c1">/// Get index of an account in xcm transactor</span>
<span class="c1">/// @custom:selector 3fdc4f36</span>
<span class="c1">/// @param index The index of which we want to retrieve the account</span>
<span class="c1">/// @return owner The owner of the derivative index</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">indexToAccount</span><span class="p">(</span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="w"> </span><span class="nx">view</span><span class="w"> </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">address</span><span class="w"> </span><span class="nx">owner</span><span class="p">);</span>

<span class="c1">/// Get transact info of a multilocation</span>
<span class="c1">/// @custom:selector b689e20c</span>
<span class="c1">/// @param multilocation The location for which we want to know the transact info</span>
<span class="c1">/// @return transactExtraWeight The extra weight involved in the XCM message of using derivative</span>
<span class="c1">/// @return transactExtraWeightSigned The extra weight involved in the XCM message of using signed</span>
<span class="c1">/// @return maxWeight Maximum allowed weight for a single message in dest</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactInfoWithSigned</span><span class="p">(</span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">multilocation</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">view</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactExtraWeight</span><span class="p">,</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactExtraWeightSigned</span><span class="p">,</span>
<span class="w">        </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">maxWeight</span>
<span class="w">    </span><span class="p">);</span>

<span class="c1">/// Get fee per second charged in its reserve chain for an asset</span>
<span class="c1">/// @custom:selector 906c9990</span>
<span class="c1">/// @param multilocation The asset location for which we want to know the fee per second value</span>
<span class="c1">/// @return feePerSecond The fee per second that the reserve chain charges for this asset</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">feePerSecond</span><span class="p">(</span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">multilocation</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">view</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feePerSecond</span><span class="p">);</span>

<span class="c1">/// Transact through XCM using fee based on its multilocation</span>
<span class="c1">/// @custom:selector fe430475</span>
<span class="c1">/// @dev The token transfer burns/transfers the corresponding amount before sending</span>
<span class="c1">/// @param transactor The transactor to be used</span>
<span class="c1">/// @param index The index to be used</span>
<span class="c1">/// @param feeAsset The asset in which we want to pay fees.</span>
<span class="c1">/// It has to be a reserve of the destination chain</span>
<span class="c1">/// @param transactRequiredWeightAtMost The weight we want to buy in the destination chain</span>
<span class="c1">/// @param innerCall The inner call to be executed in the destination chain</span>
<span class="c1">/// @param feeAmount Amount to be used as fee.</span>
<span class="c1">/// @param overallWeight Overall weight to be used for the xcm message.</span>
<span class="c1">///</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughDerivativeMultilocation</span><span class="p">(</span>
<span class="w">    </span><span class="nx">uint8</span><span class="w"> </span><span class="nx">transactor</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">feeAsset</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">innerCall</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">overallWeight</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// Transact through XCM using fee based on its currency_id</span>
<span class="c1">/// @custom:selector 185de2ae</span>
<span class="c1">/// @dev The token transfer burns/transfers the corresponding amount before sending</span>
<span class="c1">/// @param transactor The transactor to be used</span>
<span class="c1">/// @param index The index to be used</span>
<span class="c1">/// @param currencyId Address of the currencyId of the asset to be used for fees</span>
<span class="c1">/// It has to be a reserve of the destination chain</span>
<span class="c1">/// @param transactRequiredWeightAtMost The weight we want to buy in the destination chain</span>
<span class="c1">/// @param innerCall The inner call to be executed in the destination chain</span>
<span class="c1">/// @param feeAmount Amount to be used as fee.</span>
<span class="c1">/// @param overallWeight Overall weight to be used for the xcm message.</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughDerivative</span><span class="p">(</span>
<span class="w">    </span><span class="nx">uint8</span><span class="w"> </span><span class="nx">transactor</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">currencyId</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">innerCall</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">overallWeight</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// Transact through XCM using fee based on its multilocation through signed origins</span>
<span class="c1">/// @custom:selector d7ab340c</span>
<span class="c1">/// @dev No token is burnt before sending the message. The caller must ensure the destination</span>
<span class="c1">/// is able to understand the DescendOrigin message, and create a unique account from which</span>
<span class="c1">/// dispatch the call</span>
<span class="c1">/// @param dest The destination chain (as multilocation) where to send the message</span>
<span class="c1">/// @param feeLocation The asset multilocation that indentifies the fee payment currency</span>
<span class="c1">/// It has to be a reserve of the destination chain</span>
<span class="c1">/// @param transactRequiredWeightAtMost The weight we want to buy in the destination chain for the call to be made</span>
<span class="c1">/// @param call The call to be executed in the destination chain</span>
<span class="c1">/// @param feeAmount Amount to be used as fee.</span>
<span class="c1">/// @param overallWeight Overall weight to be used for the xcm message.</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughSignedMultilocation</span><span class="p">(</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">dest</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">feeLocation</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">call</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">overallWeight</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// Transact through XCM using fee based on its erc20 address through signed origins</span>
<span class="c1">/// @custom:selector b648f3fe</span>
<span class="c1">/// @dev No token is burnt before sending the message. The caller must ensure the destination</span>
<span class="c1">/// is able to understand the DescendOrigin message, and create a unique account from which</span>
<span class="c1">/// dispatch the call</span>
<span class="c1">/// @param dest The destination chain (as multilocation) where to send the message</span>
<span class="c1">/// @param feeLocationAddress The ERC20 address of the token we want to use to pay for fees</span>
<span class="c1">/// only callable if such an asset has been BRIDGED to our chain</span>
<span class="c1">/// @param transactRequiredWeightAtMost The weight we want to buy in the destination chain for the call to be made</span>
<span class="c1">/// @param call The call to be executed in the destination chain</span>
<span class="c1">/// @param feeAmount Amount to be used as fee.</span>
<span class="c1">/// @param overallWeight Overall weight to be used for the xcm message.</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">transactThroughSigned</span><span class="p">(</span>
<span class="w">    </span><span class="nx">Multilocation</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">dest</span><span class="p">,</span>
<span class="w">    </span><span class="nx">address</span><span class="w"> </span><span class="nx">feeLocationAddress</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">call</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint256</span><span class="w"> </span><span class="nx">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uint64</span><span class="w"> </span><span class="nx">overallWeight</span>
<span class="p">)</span><span class="w"> </span><span class="kd">external</span><span class="p">;</span>

<span class="c1">/// @dev Encode &#39;utility.as_derivative&#39; relay call</span>
<span class="c1">/// @custom:selector ff86378d</span>
<span class="c1">/// @param transactor The transactor to be used</span>
<span class="c1">/// @param index: The derivative index to use</span>
<span class="c1">/// @param innerCall: The inner call to be executed from the derivated address</span>
<span class="c1">/// @return result The bytes associated with the encoded call</span>
<span class="nx">function</span><span class="w"> </span><span class="nx">encodeUtilityAsDerivative</span><span class="p">(</span><span class="nx">uint8</span><span class="w"> </span><span class="nx">transactor</span><span class="p">,</span><span class="w"> </span><span class="nx">uint16</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">innerCall</span><span class="p">)</span>
<span class="w">    </span><span class="kd">external</span>
<span class="w">    </span><span class="nx">pure</span>
<span class="w">    </span><span class="nx">returns</span><span class="w"> </span><span class="p">(</span><span class="nx">bytes</span><span class="w"> </span><span class="nx">memory</span><span class="w"> </span><span class="nx">result</span><span class="p">);</span>
</code></pre></div> <p>}</p> </details> <details class="code"> <summary>XcmTransactorV3.sol</summary> <p>solidity // SPDX-License-Identifier: GPL-3.0-only pragma solidity &gt;=0.8.0;</p> <p>/// @dev The XcmTransactorV3 contract's address. address constant XCM_TRANSACTOR_V3_ADDRESS = 0x0000000000000000000000000000000000000817;</p> <p>/// @dev The XcmTransactorV3 contract's instance. XcmTransactorV3 constant XCM_TRANSACTOR_V3_CONTRACT = XcmTransactorV3( XCM_TRANSACTOR_V3_ADDRESS );</p> <p>/// @author The Moonbeam Team /// @title Xcm Transactor Interface /// The interface through which solidity contracts will interact with xcm transactor pallet /// @custom:address 0x0000000000000000000000000000000000000817 interface XcmTransactorV3 { // A multilocation is defined by its number of parents and the encoded junctions (interior) struct Multilocation { uint8 parents; bytes[] interior; }</p> <div class="codehilite"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">Support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Weights</span><span class="w"> </span><span class="n">V2</span>
<span class="n">struct</span><span class="w"> </span><span class="n">Weight</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">uint64</span><span class="w"> </span><span class="n">refTime</span><span class="p">;</span>
<span class="w">    </span><span class="n">uint64</span><span class="w"> </span><span class="n">proofSize</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">///</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">xcm</span><span class="w"> </span><span class="n">transactor</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="mi">3</span><span class="n">fdc4f36</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">account</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">derivative</span><span class="w"> </span><span class="n">index</span>
<span class="o">///</span>
<span class="n">function</span><span class="w"> </span><span class="n">indexToAccount</span><span class="p">(</span><span class="n">uint16</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="n">external</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="p">(</span><span class="n">address</span><span class="w"> </span><span class="n">owner</span><span class="p">);</span>

<span class="o">///</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">transact</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">multilocation</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="n">b689e20c</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">multilocation</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">transact</span><span class="w"> </span><span class="n">info</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="n">transactExtraWeight</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">involved</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">XCM</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">derivative</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="n">transactExtraWeightSigned</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">involved</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">XCM</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">signed</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="n">maxWeight</span><span class="w"> </span><span class="n">Maximum</span><span class="w"> </span><span class="n">allowed</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">dest</span>
<span class="o">///</span>
<span class="n">function</span><span class="w"> </span><span class="n">transactInfoWithSigned</span><span class="p">(</span><span class="n">Multilocation</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">multilocation</span><span class="p">)</span>
<span class="w">    </span><span class="n">external</span>
<span class="w">    </span><span class="n">view</span>
<span class="w">    </span><span class="n">returns</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">transactExtraWeight</span><span class="p">,</span>
<span class="w">        </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">transactExtraWeightSigned</span><span class="p">,</span>
<span class="w">        </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">maxWeight</span>
<span class="w">    </span><span class="p">);</span>

<span class="o">///</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">charged</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">reserve</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">asset</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="mi">906</span><span class="n">c9990</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">multilocation</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">asset</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">value</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="n">feePerSecond</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reserve</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="n">charges</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">asset</span>
<span class="o">///</span>
<span class="n">function</span><span class="w"> </span><span class="n">feePerSecond</span><span class="p">(</span><span class="n">Multilocation</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">multilocation</span><span class="p">)</span>
<span class="w">    </span><span class="n">external</span>
<span class="w">    </span><span class="n">view</span>
<span class="w">    </span><span class="n">returns</span><span class="w"> </span><span class="p">(</span><span class="n">uint256</span><span class="w"> </span><span class="n">feePerSecond</span><span class="p">);</span>

<span class="o">///</span><span class="w"> </span><span class="n">Transact</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">XCM</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">multilocation</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="n">bdacc26b</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">dev</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="n">transfer</span><span class="w"> </span><span class="n">burns</span><span class="o">/</span><span class="n">transfers</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">corresponding</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">sending</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">transactor</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">transactor</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">feeAsset</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">asset</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pay</span><span class="w"> </span><span class="n">fees</span><span class="o">.</span>
<span class="o">///</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reserve</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">buy</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">innerCall</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">feeAmount</span><span class="w"> </span><span class="n">Amount</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">fee</span><span class="o">.</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">overallWeight</span><span class="w"> </span><span class="n">Overall</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">xcm</span><span class="w"> </span><span class="n">message</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">uint64</span><span class="p">:</span><span class="n">MAX</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">refTime</span><span class="w"> </span><span class="n">field</span><span class="p">,</span><span class="w"> </span><span class="n">Unlimited</span><span class="w"> </span><span class="n">variant</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">refund</span><span class="w"> </span><span class="n">Indicates</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">RefundSurplus</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">appended</span>
<span class="n">function</span><span class="w"> </span><span class="n">transactThroughDerivativeMultilocation</span><span class="p">(</span>
<span class="w">    </span><span class="n">uint8</span><span class="w"> </span><span class="n">transactor</span><span class="p">,</span>
<span class="w">    </span><span class="n">uint16</span><span class="w"> </span><span class="n">index</span><span class="p">,</span>
<span class="w">    </span><span class="n">Multilocation</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">feeAsset</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="n">bytes</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">innerCall</span><span class="p">,</span>
<span class="w">    </span><span class="n">uint256</span><span class="w"> </span><span class="n">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">overallWeight</span><span class="p">,</span>
<span class="w">    </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">refund</span>
<span class="p">)</span><span class="w"> </span><span class="n">external</span><span class="p">;</span>

<span class="o">///</span><span class="w"> </span><span class="n">Transact</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">XCM</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">currency_id</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="n">ca8c82d8</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">dev</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="n">transfer</span><span class="w"> </span><span class="n">burns</span><span class="o">/</span><span class="n">transfers</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">corresponding</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">sending</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">transactor</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">transactor</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">currencyId</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">currencyId</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">asset</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">fees</span>
<span class="o">///</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reserve</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">buy</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">innerCall</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">feeAmount</span><span class="w"> </span><span class="n">Amount</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">fee</span><span class="o">.</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">overallWeight</span><span class="w"> </span><span class="n">Overall</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">xcm</span><span class="w"> </span><span class="n">message</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">uint64</span><span class="p">:</span><span class="n">MAX</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">refTime</span><span class="w"> </span><span class="n">field</span><span class="p">,</span><span class="w"> </span><span class="n">Unlimited</span><span class="w"> </span><span class="n">variant</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">refund</span><span class="w"> </span><span class="n">Indicates</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">RefundSurplus</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">appended</span>
<span class="n">function</span><span class="w"> </span><span class="n">transactThroughDerivative</span><span class="p">(</span>
<span class="w">    </span><span class="n">uint8</span><span class="w"> </span><span class="n">transactor</span><span class="p">,</span>
<span class="w">    </span><span class="n">uint16</span><span class="w"> </span><span class="n">index</span><span class="p">,</span>
<span class="w">    </span><span class="n">address</span><span class="w"> </span><span class="n">currencyId</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="n">bytes</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">innerCall</span><span class="p">,</span>
<span class="w">    </span><span class="n">uint256</span><span class="w"> </span><span class="n">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">overallWeight</span><span class="p">,</span>
<span class="w">    </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">refund</span>
<span class="p">)</span><span class="w"> </span><span class="n">external</span><span class="p">;</span>

<span class="o">///</span><span class="w"> </span><span class="n">Transact</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">XCM</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">multilocation</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">signed</span><span class="w"> </span><span class="n">origins</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="mi">27</span><span class="n">b1d492</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">dev</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">burnt</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">sending</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span><span class="o">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">caller</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span>
<span class="o">///</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">understand</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">DescendOrigin</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">which</span>
<span class="o">///</span><span class="w"> </span><span class="n">dispatch</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">call</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">dest</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="p">(</span><span class="k">as</span><span class="w"> </span><span class="n">multilocation</span><span class="p">)</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">feeLocation</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">asset</span><span class="w"> </span><span class="n">multilocation</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">indentifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">payment</span><span class="w"> </span><span class="n">currency</span>
<span class="o">///</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reserve</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">buy</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">made</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">feeAmount</span><span class="w"> </span><span class="n">Amount</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">fee</span><span class="o">.</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">overallWeight</span><span class="w"> </span><span class="n">Overall</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">xcm</span><span class="w"> </span><span class="n">message</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">uint64</span><span class="p">:</span><span class="n">MAX</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">refTime</span><span class="w"> </span><span class="n">field</span><span class="p">,</span><span class="w"> </span><span class="n">Unlimited</span><span class="w"> </span><span class="n">variant</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">refund</span><span class="w"> </span><span class="n">Indicates</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">RefundSurplus</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">appended</span>
<span class="n">function</span><span class="w"> </span><span class="n">transactThroughSignedMultilocation</span><span class="p">(</span>
<span class="w">    </span><span class="n">Multilocation</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span>
<span class="w">    </span><span class="n">Multilocation</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">feeLocation</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="n">bytes</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">call</span><span class="p">,</span>
<span class="w">    </span><span class="n">uint256</span><span class="w"> </span><span class="n">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">overallWeight</span><span class="p">,</span>
<span class="w">    </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">refund</span>
<span class="p">)</span><span class="w"> </span><span class="n">external</span><span class="p">;</span>

<span class="o">///</span><span class="w"> </span><span class="n">Transact</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">XCM</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">fee</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">erc20</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">signed</span><span class="w"> </span><span class="n">origins</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="n">b18270cf</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">dev</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">burnt</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">sending</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span><span class="o">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">caller</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span>
<span class="o">///</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">understand</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">DescendOrigin</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">which</span>
<span class="o">///</span><span class="w"> </span><span class="n">dispatch</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">call</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">dest</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="p">(</span><span class="k">as</span><span class="w"> </span><span class="n">multilocation</span><span class="p">)</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">feeLocationAddress</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">ERC20</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pay</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">fees</span>
<span class="o">///</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">callable</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">asset</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">BRIDGED</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">buy</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">made</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="n">chain</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">feeAmount</span><span class="w"> </span><span class="n">Amount</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">fee</span><span class="o">.</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">overallWeight</span><span class="w"> </span><span class="n">Overall</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">xcm</span><span class="w"> </span><span class="n">message</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">uint64</span><span class="p">:</span><span class="n">MAX</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">refTime</span><span class="w"> </span><span class="n">field</span><span class="p">,</span><span class="w"> </span><span class="n">Unlimited</span><span class="w"> </span><span class="n">variant</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w"> </span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">refund</span><span class="w"> </span><span class="n">Indicates</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">RefundSurplus</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">appended</span>
<span class="n">function</span><span class="w"> </span><span class="n">transactThroughSigned</span><span class="p">(</span>
<span class="w">    </span><span class="n">Multilocation</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span>
<span class="w">    </span><span class="n">address</span><span class="w"> </span><span class="n">feeLocationAddress</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">transactRequiredWeightAtMost</span><span class="p">,</span>
<span class="w">    </span><span class="n">bytes</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">call</span><span class="p">,</span>
<span class="w">    </span><span class="n">uint256</span><span class="w"> </span><span class="n">feeAmount</span><span class="p">,</span>
<span class="w">    </span><span class="n">Weight</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">overallWeight</span><span class="p">,</span>
<span class="w">    </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">refund</span>
<span class="p">)</span><span class="w"> </span><span class="n">external</span><span class="p">;</span>

<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">dev</span><span class="w"> </span><span class="n">Encode</span><span class="w"> </span><span class="s1">&#39;utility.as_derivative&#39;</span><span class="w"> </span><span class="n">relay</span><span class="w"> </span><span class="n">call</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">custom</span><span class="p">:</span><span class="n">selector</span><span class="w"> </span><span class="n">ff86378d</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">transactor</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">transactor</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">index</span><span class="p">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">derivative</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">innerCall</span><span class="p">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">derivated</span><span class="w"> </span><span class="n">address</span>
<span class="o">///</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">associated</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="n">call</span>
<span class="n">function</span><span class="w"> </span><span class="n">encodeUtilityAsDerivative</span><span class="p">(</span><span class="n">uint8</span><span class="w"> </span><span class="n">transactor</span><span class="p">,</span><span class="w"> </span><span class="n">uint16</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">innerCall</span><span class="p">)</span>
<span class="w">    </span><span class="n">external</span>
<span class="w">    </span><span class="n">pure</span>
<span class="w">    </span><span class="n">returns</span><span class="w"> </span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
</code></pre></div> <p>}</p> </details> <div class="admonition note"> <p class="admonition-title">Note</p> <p><a href="https://github.com/moonbeam-foundation/moonbeam/blob/master/precompiles/xcm-transactor/src/v1/XcmTransactorV1.sol" target="_blank">XCM Transactor Precompile V1</a> 将在不久的将来被弃用，因此所有实现都必须迁移到更新的接口。</p> </div> <p>该接口在不同版本之间略有不同。您可以在下面找到每个版本的接口概述。</p> <div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">V2</label><label for="__tabbed_1_2">V3</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <p>V2 接口包括以下函数：</p> <details class="function"> <summary><strong>transactInfoWithSigned</strong>(<em>Multilocation</em> <em>memory</em> multilocation) — 一个只读函数，返回给定链的事务信息</summary> <div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Parameters</label><label for="__tabbed_2_2">Returns</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>multilocation</code> - 要获取事务信息的链的 multilocation</li> </ul> </div> <div class="tabbed-block"> <p>以下事务信息：</p> <ul> <li>与外部调用执行相关的三个 XCM 指令 (<code>transactExtraWeight</code>)</li> <li>与通过签名 extrinsic 进行事务的 <code>DescendOrigin</code> XCM 指令相关的额外权重信息 (<code>transactExtraWeightSigned</code>)</li> <li>给定链中消息允许的最大权重</li> </ul> <p>js [ 173428000n, 0n, 20000000000n ]</p> </div> </div> </div> </details> <details class="function"> <summary><strong>feePerSecond</strong>(<em>Multilocation</em> <em>memory</em> multilocation) — 一个只读函数，返回每秒 XCM 执行的 token 单位数，该值作为给定资产的 XCM 执行费用收取。当对于给定链，有多个资产可用于支付费用时，这非常有用</summary> <div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Parameters</label><label for="__tabbed_3_2">Returns</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>multilocation</code> - 要获取每秒单位值的资产的 multilocation</li> </ul> </div> <div class="tabbed-block"> <p>储备链对给定资产收取的每秒费用。</p> <p>js 13764626000000n</p> </div> </div> </div> </details> <details class="function"> <summary><strong>transactThroughSignedMultilocation</strong>(<em>Multilocation</em> <em>memory</em> dest, <em>Multilocation</em> <em>memory</em> feeLocation, <em>uint64</em> transactRequiredWeightAtMost, <em>bytes</em> <em>memory</em> call, <em>uint256</em> feeAmount, <em>uint64</em> overallWeight) — 发送一条 XCM 消息，其中包含在目标链中远程执行调用的指令。远程调用将由一个新账户签名并执行，该账户称为 <a href="/builders/interoperability/xcm/remote-execution/computed-origins/" target="_blank">Computed Origin</a> 账户，目标平行链必须计算该账户。基于 Moonbeam 的网络遵循 <a href="https://github.com/paritytech/polkadot-sdk/blob/polkadot-v1.17.1/polkadot/xcm/xcm-builder/src/location_conversion.rs" target="_blank">Polkadot 设定的 Computed Origins 标准</a>。您需要提供用于支付费用的 token 的资产 multilocation，而不是 XC-20 token 的地址</summary> <div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">Parameters</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>dest</code> - 生态系统中一条链的 multilocation，XCM 消息将发送到该链（目标链）。multilocation 必须以特定方式格式化，这在 <a href="#building-the-precompile-multilocation">构建预编译 Multilocation</a> 部分中描述</li> <li><code>feeLocation</code> - 用于支付费用的资产的 multilocation。multilocation 必须以特定方式格式化，这在 <a href="#building-the-precompile-multilocation">构建预编译 Multilocation</a> 部分中描述</li> <li><code>transactRequiredWeightAtMost</code> - 在目标链中购买的权重，用于执行在 <code>Transact</code> 指令中定义的调用</li> <li><code>call</code> - 在目标链中执行的调用，如 <code>Transact</code> 指令中定义</li> <li><code>feeAmount</code> - 用作费用的金额</li> <li><code>overallWeight</code> - extrinsic 可以用来执行所有 XCM 指令的总权重，加上 <code>Transact</code> 调用的权重 (<code>transactRequiredWeightAtMost</code>)。<code>overallWeight</code> 结构还包含 <code>refTime</code> 和 <code>proofSize</code>。如果您为 <code>refTime</code> 传递一个 uint64 的最大值，您将允许购买无限量的权重，从而无需确切知道目标链执行 XCM 需要多少权重</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>transactThroughSigned</strong>(<em>Multilocation</em> <em>memory</em> dest, <em>address</em> feeLocationAddress, <em>uint64</em> transactRequiredWeightAtMost, <em>bytes</em> <em>memory</em> call, <em>uint256</em> feeAmount, <em>uint64</em> overallWeight) — 发送一条 XCM 消息，其中包含在目标链中远程执行调用的指令。远程调用将由一个新账户签名并执行，该账户称为 <a href="/builders/interoperability/xcm/remote-execution/computed-origins/" target="_blank">Computed Origin</a> 账户，目标平行链必须计算该账户。基于 Moonbeam 的网络遵循 <a href="https://github.com/paritytech/polkadot-sdk/blob/polkadot-v1.17.1/polkadot/xcm/xcm-builder/src/location_conversion.rs" target="_blank">Polkadot 设定的 Computed Origins 标准</a>。您需要提供 XC-20 资产的地址以用于支付费用</summary> <div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"><div class="tabbed-labels"><label for="__tabbed_5_1">Parameters</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>dest</code> - 生态系统中一条链的 multilocation，XCM 消息将发送到该链（目标链）。multilocation 必须以特定方式格式化，这在 <a href="#building-the-precompile-multilocation">构建预编译 Multilocation</a> 部分中描述</li> <li><code>feeLocationAddress</code> - 用于支付费用的资产的 <a href="/builders/interoperability/xcm/xc20/overview/#current-xc20-assets" target="_blank">XC-20 地址</a></li> <li><code>transactRequiredWeightAtMost</code> - 在目标链中购买的权重，用于执行在 <code>Transact</code> 指令中定义的调用</li> <li><code>call</code> - 在目标链中执行的调用，如 <code>Transact</code> 指令中定义</li> <li><code>feeAmount</code> - 用作费用的金额</li> <li><code>overallWeight</code> - extrinsic 可以用来执行所有 XCM 指令的总权重，加上 <code>Transact</code> 调用的权重 (<code>transactRequiredWeightAtMost</code>)。<code>overallWeight</code> 结构还包含 <code>refTime</code> 和 <code>proofSize</code>。如果您为 <code>refTime</code> 传递一个 uint64 的最大值，您将允许购买无限量的权重，从而无需确切知道目标链执行 XCM 需要多少权重</li> </ul> </div> </div> </div> </details> </div> <div class="tabbed-block"> <p>V3 接口增加了对 Weights V2 的支持，该版本更新了 <code>Weight</code> 类型，以表示除了计算时间之外的 proof size。因此，这要求定义 <code>refTime</code> 和 <code>proofSize</code>，其中 <code>refTime</code> 是可用于执行的计算时间量，<code>proofSize</code> 是可以使用的存储量（以字节为单位）。</p> <p>以下结构已添加到 XCM Transactor Precompile 中以支持 Weights V2：</p> <p>solidity struct Weight { uint64 refTime; uint65 proofSize; }</p> <p>此外，还增加了对 <a href="/builders/interoperability/xcm/core-concepts/instructions/#refund-surplus" target="_blank"><code>RefundSurplus</code></a> 和 <a href="/builders/interoperability/xcm/core-concepts/instructions/#deposit-asset" target="_blank"><code>DepositAsset</code></a> 指令的支持。要将 <code>RefundSurplus</code> 指令附加到 XCM 消息，您可以使用 <code>refund</code> 参数，如果设置为 <code>true</code>，该参数将退还未用于 <code>Transact</code> 的任何剩余资金。</p> <p>V3 接口包括以下函数：</p> <details class="function"> <summary><strong>transactInfoWithSigned</strong>(<em>Multilocation</em> <em>memory</em> multilocation) — 一个只读函数，返回给定链的事务信息</summary> <div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio"><input id="__tabbed_6_2" name="__tabbed_6" type="radio"><div class="tabbed-labels"><label for="__tabbed_6_1">Parameters</label><label for="__tabbed_6_2">Returns</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>multilocation</code> - 要获取事务信息的链的 multilocation</li> </ul> </div> <div class="tabbed-block"> <p>以下事务信息：</p> <ul> <li>与外部调用执行相关的三个 XCM 指令 (<code>transactExtraWeight</code>)</li> <li>与通过签名 extrinsic 进行事务的 <code>DescendOrigin</code> XCM 指令相关的额外权重信息 (<code>transactExtraWeightSigned</code>)</li> <li>给定链中消息允许的最大权重</li> </ul> <p>js [ 173428000n, 0n, 20000000000n ]</p> </div> </div> </div> </details> <details class="function"> <summary><strong>feePerSecond</strong>(<em>Multilocation</em> <em>memory</em> multilocation) — 一个只读函数，返回每秒 XCM 执行的 token 单位数，该值作为给定资产的 XCM 执行费用收取。当对于给定链，有多个资产可用于支付费用时，这非常有用</summary> <div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio"><input id="__tabbed_7_2" name="__tabbed_7" type="radio"><div class="tabbed-labels"><label for="__tabbed_7_1">Parameters</label><label for="__tabbed_7_2">Returns</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>multilocation</code> - 要获取每秒单位值的资产的 multilocation</li> </ul> </div> <div class="tabbed-block"> <p>储备链对给定资产收取的每秒费用。</p> <p>js 13764626000000n</p> </div> </div> </div> </details> <details class="function"> <summary><strong>transactThroughSignedMultilocation</strong>(<em>Multilocation</em> <em>memory</em> dest, <em>Multilocation</em> <em>memory</em> feeLocation, <em>Weight</em> transactRequiredWeightAtMost, <em>bytes</em> <em>memory</em> call, <em>uint256</em> feeAmount, <em>Weight</em> overallWeight, <em>bool</em> refund) — 发送一条 XCM 消息，其中包含在目标链中远程执行调用的指令。远程调用将由一个新账户签名并执行，该账户称为 <a href="/builders/interoperability/xcm/remote-execution/computed-origins/" target="_blank">Computed Origin</a> 账户，目标平行链必须计算该账户。基于 Moonbeam 的网络遵循 <a href="https://github.com/paritytech/polkadot-sdk/blob/polkadot-v1.17.1/polkadot/xcm/xcm-builder/src/location_conversion.rs" target="_blank">Polkadot 设定的 Computed Origins 标准</a>。您需要提供用于支付费用的 token 的资产 multilocation，而不是 XC-20 token 的地址</summary> <div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio"><div class="tabbed-labels"><label for="__tabbed_8_1">Parameters</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>dest</code> - 生态系统中一条链的 multilocation，XCM 消息将发送到该链（目标链）。multilocation 必须以特定方式格式化，这在 <a href="#building-the-precompile-multilocation">构建预编译 Multilocation</a> 部分中描述</li> <li><code>feeLocation</code> - 用于支付费用的资产的 multilocation。multilocation 必须以特定方式格式化，这在 <a href="#building-the-precompile-multilocation">以下部分</a> 中描述</li> <li> <p><code>transactRequiredWeightAtMost</code> - 在目标链中购买的权重，用于执行在 <code>Transact</code> 指令中定义的调用。<code>transactRequiredWeightAtMost</code> 结构包含以下内容：</p> <ul> <li><code>refTime</code> - 可用于执行的计算时间量</li> <li><code>proofSize</code> - 可以使用的存储量（以字节为单位） 它应格式化如下： js [ INSERT_REF_TIME, INSERT_PROOF_SIZE ]</li> </ul> </li> <li> <p><code>call</code> - 在目标链中执行的调用，如 <code>Transact</code> 指令中定义</p> </li> <li><code>feeAmount</code> - 用作费用的金额</li> <li><code>overallWeight</code> - extrinsic 可以用来执行所有 XCM 指令的总权重，加上 <code>Transact</code> 调用的权重 (<code>transactRequiredWeightAtMost</code>)。<code>overallWeight</code> 结构还包含 <code>refTime</code> 和 <code>proofSize</code>。如果您为 <code>refTime</code> 传递一个 uint64 的最大值，您将允许购买无限量的权重，从而无需确切知道目标链执行 XCM 需要多少权重</li> <li><code>refund</code> - 一个布尔值，指示是否将 <code>RefundSurplus</code> 和 <code>DepositAsset</code> 指令添加到 XCM 消息中，以退还任何剩余费用</li> </ul> </div> </div> </div> </details> <details class="function"> <summary><strong>transactThroughSigned</strong>(<em>Multilocation</em> <em>memory</em> dest, <em>address</em> feeLocationAddress, <em>Weight</em> transactRequiredWeightAtMost, <em>bytes</em> <em>memory</em> call, <em>uint256</em> feeAmount, <em>Weight</em> overallWeight, <em>bool</em> refund) — 发送一条 XCM 消息，其中包含在目标链中远程执行调用的指令。远程调用将由一个新账户签名并执行，该账户称为 <a href="/builders/interoperability/xcm/remote-execution/computed-origins/" target="_blank">Computed Origin</a> 账户，目标平行链必须计算该账户。基于 Moonbeam 的网络遵循 <a href="https://github.com/paritytech/polkadot-sdk/blob/polkadot-v1.17.1/polkadot/xcm/xcm-builder/src/location_conversion.rs" target="_blank">Polkadot 设定的 Computed Origins 标准</a>。您需要提供 XC-20 资产的地址以用于支付费用</summary> <div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio"><div class="tabbed-labels"><label for="__tabbed_9_1">Parameters</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <ul> <li><code>dest</code> - 生态系统中一条链的 multilocation，XCM 消息将发送到该链（目标链）。multilocation 必须以特定方式格式化，这在 <a href="#building-the-precompile-multilocation">构建预编译 Multilocation</a> 部分中描述</li> <li><code>feeLocationAddress</code> - 用于支付费用的资产的 <a href="/builders/interoperability/xcm/xc20/overview/#current-xc20-assets" target="_blank">XC-20 地址</a></li> <li> <p><code>transactRequiredWeightAtMost</code> - 在目标链中购买的权重，用于执行在 <code>Transact</code> 指令中定义的调用。<code>transactRequiredWeightAtMost</code> 结构包含以下内容：</p> <ul> <li><code>refTime</code> - 可用于执行的计算时间量</li> <li><code>proofSize</code> - 可以使用的存储量（以字节为单位） 它应格式化如下： js [ INSERT_REF_TIME, INSERT_PROOF_SIZE ]</li> </ul> </li> <li> <p><code>call</code> - 在目标链中执行的调用，如 <code>Transact</code> 指令中定义</p> </li> <li><code>feeAmount</code> - 用作费用的金额</li> <li><code>overallWeight</code> - extrinsic 可以用来执行所有 XCM 指令的总权重，加上 <code>Transact</code> 调用的权重 (<code>transactRequiredWeightAtMost</code>)。<code>overallWeight</code> 结构还包含 <code>refTime</code> 和 <code>proofSize</code>。如果您为 <code>refTime</code> 传递一个 uint64 的最大值，您将允许购买无限量的权重，从而无需确切知道目标链执行 XCM 需要多少权重</li> <li><code>refund</code> - 一个布尔值，指示是否将 <code>RefundSurplus</code> 和 <code>DepositAsset</code> 指令添加到 XCM 消息中，以退还任何剩余费用</li> </ul> </div> </div> </div> </details> </div> </div> </div> <h2 id="xcm-instructions-for-remote-execution">用于远程执行的 XCM 指令<a class="headerlink" href="#xcm-instructions-for-remote-execution" title="Permanent link">&para;</a></h2> <p>通过 XCM 执行远程执行的相关 <a href="/builders/interoperability/xcm/core-concepts/instructions/" target="_blank">XCM 指令</a> 包括但不限于：</p> <ul> <li><a href="/builders/interoperability/xcm/core-concepts/instructions/#descend-origin" target="_blank"><code>DescendOrigin</code></a> - 在目标链中执行。它会改变目标链上的来源，以匹配源链上的来源，确保目标链上的执行代表在源链上发起 XCM 消息的同一实体</li> <li><a href="/builders/interoperability/xcm/core-concepts/instructions/#withdraw-asset" target="_blank"><code>WithdrawAsset</code></a> - 在目标链中执行。移除资产并将其放入持有注册表</li> <li><a href="/builders/interoperability/xcm/core-concepts/instructions/#buy-execution" target="_blank"><code>BuyExecution</code></a> - 在目标链中执行。从持有注册表中获取资产以支付执行费用。要支付的费用由目标链确定</li> <li><a href="/builders/interoperability/xcm/core-concepts/instructions/#transact" target="_blank"><code>Transact</code></a> - 在目标链中执行。从给定的来源分派编码的调用数据，从而可以执行特定的操作或函数</li> </ul> <h2 id="building-the-precompile-multilocation">构建预编译多重定位<a class="headerlink" href="#building-the-precompile-multilocation" title="Permanent link">&para;</a></h2> <p>在 XCM 交易器预编译接口中，<code>Multilocation</code> 结构定义如下：</p> <div class="highlight"><pre><span></span><code><span class="w"> </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Multilocation</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint8</span><span class="w"> </span><span class="nv">parents</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bytes</span><span class="p">[]</span><span class="w"> </span>interior<span class="p">;</span>
<span class="p">}</span>
</code></pre></div> <p>As with a standard <a href="/builders/interoperability/xcm/core-concepts/multilocations/" target="_blank">multilocation</a>, there are <code>parents</code> and <code>interior</code> elements. However, instead of defining the multilocation as an object, with Ethereum libraries, the struct is defined as an array, which contains a <code>uint8</code> for the <code>parents</code> as the first element and a bytes array for the <code>interior</code> as the second element.</p> <p>The normal values you would see for the <code>parents</code> element are:</p> <table> <thead> <tr> <th style="text-align: center;">Origin</th> <th style="text-align: center;">Destination</th> <th style="text-align: center;">Parents Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">Parachain A</td> <td style="text-align: center;">Parachain A</td> <td style="text-align: center;">0</td> </tr> <tr> <td style="text-align: center;">Parachain A</td> <td style="text-align: center;">Relay Chain</td> <td style="text-align: center;">1</td> </tr> <tr> <td style="text-align: center;">Parachain A</td> <td style="text-align: center;">Parachain B</td> <td style="text-align: center;">1</td> </tr> </tbody> </table> <p>For the <code>interior</code> element, the number of fields you need to drill down to in the target chain to reach the exact location of the target, such as the specific asset or account, represents the size of the bytes array:</p> <table> <thead> <tr> <th style="text-align: center;">Array</th> <th style="text-align: center;">Size</th> <th style="text-align: center;">Interior Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">[]</td> <td style="text-align: center;">0</td> <td style="text-align: center;">Here</td> </tr> <tr> <td style="text-align: center;">[XYZ]</td> <td style="text-align: center;">1</td> <td style="text-align: center;">X1</td> </tr> <tr> <td style="text-align: center;">[XYZ, ABC]</td> <td style="text-align: center;">2</td> <td style="text-align: center;">X2</td> </tr> <tr> <td style="text-align: center;">[XYZ, ... N]</td> <td style="text-align: center;">N</td> <td style="text-align: center;">XN</td> </tr> </tbody> </table> <div class="admonition note"> <p class="admonition-title">Note</p> <p>Interior value <code>Here</code> is often used for the relay chain (either as a destination or to target the relay chain asset).</p> </div> <p>Each field required to reach the exact location of the target needs to be defined as a hex string. The first byte (2 hexadecimal characters) corresponds to the selector of the field. For example:</p> <table> <thead> <tr> <th style="text-align: center;">Byte Value</th> <th style="text-align: center;">Selector</th> <th>Data Type</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">0x00</td> <td style="text-align: center;">Parachain</td> <td>bytes4</td> </tr> <tr> <td style="text-align: center;">0x01</td> <td style="text-align: center;">AccountId32</td> <td>bytes32</td> </tr> <tr> <td style="text-align: center;">0x02</td> <td style="text-align: center;">AccountIndex64</td> <td>u64</td> </tr> <tr> <td style="text-align: center;">0x03</td> <td style="text-align: center;">AccountKey20</td> <td>bytes20</td> </tr> <tr> <td style="text-align: center;">0x04</td> <td style="text-align: center;">PalletInstance</td> <td>byte</td> </tr> <tr> <td style="text-align: center;">0x05</td> <td style="text-align: center;">GeneralIndex</td> <td>u128</td> </tr> <tr> <td style="text-align: center;">0x06</td> <td style="text-align: center;">GeneralKey</td> <td>bytes[]</td> </tr> </tbody> </table> <p>Next, depending on the selector and its data type, the following bytes correspond to the actual data being provided. Note that for <code>AccountId32</code>, <code>AccountIndex64</code>, and <code>AccountKey20</code>, the optional <code>network</code> field is appended at the end. For example:</p> <table> <thead> <tr> <th style="text-align: center;">Selector</th> <th style="text-align: center;">Data Value</th> <th style="text-align: center;">Represents</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">Parachain</td> <td style="text-align: center;">"0x00+000007E7"</td> <td style="text-align: center;">Parachain ID 2023</td> </tr> <tr> <td style="text-align: center;">AccountId32</td> <td style="text-align: center;">"0x01+AccountId32+00"</td> <td style="text-align: center;">AccountId32, Network(Option) Null</td> </tr> <tr> <td style="text-align: center;">AccountId32</td> <td style="text-align: center;">"0x01+AccountId32+03"</td> <td style="text-align: center;">AccountId32, Network Polkadot</td> </tr> <tr> <td style="text-align: center;">AccountKey20</td> <td style="text-align: center;">"0x03+AccountKey20+00"</td> <td style="text-align: center;">AccountKey20, Network(Option) Null</td> </tr> <tr> <td style="text-align: center;">PalletInstance</td> <td style="text-align: center;">"0x04+03"</td> <td style="text-align: center;">Pallet Instance 3</td> </tr> </tbody> </table> <div class="admonition note"> <p class="admonition-title">Note</p> <p>The <code>interior</code> data usually needs to be wrapped around quotes, or you might get an <code>invalid tuple value</code> error.</p> </div> <p>以下代码片段介绍了一些 <code>Multilocation</code> 结构的示例，因为它们需要馈送到 XCM 交易器预编译函数中：</p> <p>js // Multilocation targeting the relay chain asset from a parachain [ 1, // parents = 1 [], // interior = here ]</p> <p>// Multilocation targeting Moonbase Alpha DEV token from another parachain [ 1, // parents = 1 [ // interior = X2 (the array has a length of 2) "0x00000003E8", // Parachain selector + Parachain ID 1000 (Moonbase Alpha) "0x0403", // Pallet Instance selector + Pallet Instance 3 (Balances Pallet) ], ]</p> <p>// Multilocation targeting aUSD asset on Acala [ 1, // parents = 1 [ // interior = X2 (the array has a length of 2) "0x00000007D0", // Parachain selector + Parachain ID 2000 (Acala) "0x060001", // General Key selector + Asset Key ], ]</p> <h2 id="xcmtransactor-transact-through-signed">通过计算来源账户进行交易<a class="headerlink" href="#xcmtransactor-transact-through-signed" title="Permanent link">&para;</a></h2> <p>本节介绍了如何构建 XCM 消息，以便使用 XCM Transactor Pallet 进行远程执行，特别是使用 <code>transactThroughSigned</code> 函数。此函数使用目标链上的<a href="/builders/interoperability/xcm/remote-execution/computed-origins/" target="_blank">计算来源</a>账户来分派远程调用。</p> <p>本节中的示例使用了一个不可公开访问的目标平行链，因此您无法完全按照示例进行操作。您可以根据自己的用例修改示例。</p> <div class="admonition note"> <p class="admonition-title">Note</p> <p>您需要确保您要远程执行的调用在目标链中是允许的！</p> </div> <h3 id="xcmtransactor-signed-check-prerequisites">检查先决条件<a class="headerlink" href="#xcmtransactor-signed-check-prerequisites" title="Permanent link">&para;</a></h3> <p>要能够发送本节中的外部交易，您需要具备：</p> <ul> <li>原始链中的一个拥有<a href="/builders/get-started/networks/moonbase/#get-tokens" target="_blank">资金</a>的帐户</li> <li>目标链上的计算原始帐户中的资金。要了解如何计算计算原始帐户的地址，请参阅<a href="/builders/interoperability/xcm/remote-execution/computed-origins/" target="_blank">如何计算计算原始</a>文档。</li> </ul> <p>在本示例中，将使用以下帐户：</p> <ul> <li>原始平行链（Moonbase Alpha）中的 Alice 帐户：<code>0x44236223aB4291b93EEd10E4B511B37a398DEE55</code></li> <li>目标平行链（Parachain 888）中她的计算原始地址：<code>0x5c27c4bb7047083420eddff9cddac4a0a120b45c</code></li> </ul> <h3 id="xcm-transact-through-signed">构建 XCM<a class="headerlink" href="#xcm-transact-through-signed" title="Permanent link">&para;</a></h3> <p>在此示例中，您将与 XCM 交易器预编译 V3 的 <code>transactThroughSigned</code> 函数交互。要使用此函数，您需要执行以下常规步骤：</p> <ol> <li>使用 Moonbase Alpha RPC 终结点创建提供程序</li> <li>创建签名者以发送交易。此示例使用私钥创建签名者，仅用于演示目的。<strong>切勿将您的私钥存储在 JavaScript 文件中</strong></li> <li> <p>使用预编译的地址和 ABI 创建 XCM 交易器 V3 预编译的合约实例</p> <details class="code"> <summary>XCM 交易器 V3 ABI</summary> <p>js [ { inputs: [ { internalType: 'uint8', name: 'transactor', type: 'uint8', }, { internalType: 'uint16', name: 'index', type: 'uint16', }, { internalType: 'bytes', name: 'innerCall', type: 'bytes', }, ], name: 'encodeUtilityAsDerivative', outputs: [ { internalType: 'bytes', name: 'result', type: 'bytes', }, ], stateMutability: 'pure', type: 'function', }, { inputs: [ { components: [ { internalType: 'uint8', name: 'parents', type: 'uint8', }, { internalType: 'bytes[]', name: 'interior', type: 'bytes[]', }, ], internalType: 'struct XcmTransactorV3.Multilocation', name: 'multilocation', type: 'tuple', }, ], name: 'feePerSecond', outputs: [ { internalType: 'uint256', name: 'feePerSecond', type: 'uint256', }, ], stateMutability: 'view', type: 'function', }, { inputs: [ { internalType: 'uint16', name: 'index', type: 'uint16', }, ], name: 'indexToAccount', outputs: [ { internalType: 'address', name: 'owner', type: 'address', }, ], stateMutability: 'view', type: 'function', }, { inputs: [ { components: [ { internalType: 'uint8', name: 'parents', type: 'uint8', }, { internalType: 'bytes[]', name: 'interior', type: 'bytes[]', }, ], internalType: 'struct XcmTransactorV3.Multilocation', name: 'multilocation', type: 'tuple', }, ], name: 'transactInfoWithSigned', outputs: [ { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'transactExtraWeight', type: 'tuple', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'transactExtraWeightSigned', type: 'tuple', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'maxWeight', type: 'tuple', }, ], stateMutability: 'view', type: 'function', }, { inputs: [ { internalType: 'uint8', name: 'transactor', type: 'uint8', }, { internalType: 'uint16', name: 'index', type: 'uint16', }, { internalType: 'address', name: 'currencyId', type: 'address', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'transactRequiredWeightAtMost', type: 'tuple', }, { internalType: 'bytes', name: 'innerCall', type: 'bytes', }, { internalType: 'uint256', name: 'feeAmount', type: 'uint256', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'overallWeight', type: 'tuple', }, { internalType: 'bool', name: 'refund', type: 'bool', }, ], name: 'transactThroughDerivative', outputs: [], stateMutability: 'nonpayable', type: 'function', }, { inputs: [ { internalType: 'uint8', name: 'transactor', type: 'uint8', }, { internalType: 'uint16', name: 'index', type: 'uint16', }, { components: [ { internalType: 'uint8', name: 'parents', type: 'uint8', }, { internalType: 'bytes[]', name: 'interior', type: 'bytes[]', }, ], internalType: 'struct XcmTransactorV3.Multilocation', name: 'feeAsset', type: 'tuple', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'transactRequiredWeightAtMost', type: 'tuple', }, { internalType: 'bytes', name: 'innerCall', type: 'bytes', }, { internalType: 'uint256', name: 'feeAmount', type: 'uint256', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'overallWeight', type: 'tuple', }, { internalType: 'bool', name: 'refund', type: 'bool', }, ], name: 'transactThroughDerivativeMultilocation', outputs: [], stateMutability: 'nonpayable', type: 'function', }, { inputs: [ { components: [ { internalType: 'uint8', name: 'parents', type: 'uint8', }, { internalType: 'bytes[]', name: 'interior', type: 'bytes[]', }, ], internalType: 'struct XcmTransactorV3.Multilocation', name: 'dest', type: 'tuple', }, { internalType: 'address', name: 'feeLocationAddress', type: 'address', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'transactRequiredWeightAtMost', type: 'tuple', }, { internalType: 'bytes', name: 'call', type: 'bytes', }, { internalType: 'uint256', name: 'feeAmount', type: 'uint256', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'overallWeight', type: 'tuple', }, { internalType: 'bool', name: 'refund', type: 'bool', }, ], name: 'transactThroughSigned', outputs: [], stateMutability: 'nonpayable', type: 'function', }, { inputs: [ { components: [ { internalType: 'uint8', name: 'parents', type: 'uint8', }, { internalType: 'bytes[]', name: 'interior', type: 'bytes[]', }, ], internalType: 'struct XcmTransactorV3.Multilocation', name: 'dest', type: 'tuple', }, { components: [ { internalType: 'uint8', name: 'parents', type: 'uint8', }, { internalType: 'bytes[]', name: 'interior', type: 'bytes[]', }, ], internalType: 'struct XcmTransactorV3.Multilocation', name: 'feeLocation', type: 'tuple', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'transactRequiredWeightAtMost', type: 'tuple', }, { internalType: 'bytes', name: 'call', type: 'bytes', }, { internalType: 'uint256', name: 'feeAmount', type: 'uint256', }, { components: [ { internalType: 'uint64', name: 'refTime', type: 'uint64', }, { internalType: 'uint64', name: 'proofSize', type: 'uint64', }, ], internalType: 'struct XcmTransactorV3.Weight', name: 'overallWeight', type: 'tuple', }, { internalType: 'bool', name: 'refund', type: 'bool', }, ], name: 'transactThroughSignedMultilocation', outputs: [], stateMutability: 'nonpayable', type: 'function', }, ];</p> </details> </li> <li> <p>组装 <code>transactThroughSigned</code> 函数的参数：</p> <ul> <li> <p><code>dest</code> - 目标的多重定位，即平行链 888：</p> <p>js const dest = [ 1, // parents = 1 [ // interior = X1 (数组长度为 1) '0x0000000378', // 平行链选择器 + 平行链 ID 888 ], ];</p> </li> <li> <p><code>feeLocationAddress</code> - 用于支付费用的 XC-20 地址，即平行链 888 的原生资产：</p> <p>js const feeLocationAddress = '0xFFFFFFFF1AB2B146C526D4154905FF12E6E57675';</p> </li> <li> <p><code>transactRequiredWeightAtMost</code> - 在 <code>Transact</code> 指令中执行调用所需的权重。您可以使用 Polkadot.js API 的 <a href="/builders/substrate/libraries/polkadot-js-api/#fees" target="_blank"><code>paymentInfo</code> 方法</a> 获取此信息</p> <p>js const transactRequiredWeightAtMost = [1000000000n, 5000n];</p> </li> <li> <p><code>call</code> - 要调用的 pallet、方法和输入的编码调用数据。它可以在 <a href="https://polkadot.js.org/apps" target="_blank">Polkadot.js Apps</a>（必须连接到目标链）中构建，也可以使用 <a href="/builders/substrate/libraries/polkadot-js-api/" target="_blank">Polkadot.js API</a>。在此示例中，内部调用是将目标链的 1 个代币简单地转移到 Alice 在该链上的帐户：</p> <p>js const call = '0x030044236223ab4291b93eed10e4b511b37a398dee5513000064a7b3b6e00d';</p> </li> <li> <p><code>feeAmount</code> - 用于支付费用的金额</p> <p>js const feeAmount = 50000000000000000n;</p> </li> <li> <p><code>overallWeight</code> - 内部调用 (<code>transactRequiredWeightAtMost</code>) 特有的权重，加上覆盖目标链中 XCM 指令执行成本所需的权重：<code>DescendOrigin</code>、<code>WithdrawAsset</code>、<code>BuyExecution</code> 和 <code>Transact</code>。请务必注意，每个链都定义了自己的权重要求。要确定给定链上每个 XCM 指令所需的权重，请参阅该链的文档或联系其团队成员。或者，您可以为 <code>refTime</code>（数组的第一个索引）传递 uint64 的最大值。这将解释为使用无限量的权重，从而无需确切知道目标链执行 XCM 需要多少权重</p> <p>js const overallWeight = [18446744073709551615n, 10000n];</p> </li> </ul> </li> <li> <p>创建 <code>transactThroughSigned</code> 函数，传入参数</p> </li> <li>签名并发送交易</li> </ol> <p>===</p> <div class="codehilite"><pre><span></span><code><span class="n">js</span>
<span class="kn">import</span><span class="w"> </span><span class="p">{</span> <span class="n">ethers</span> <span class="p">}</span> <span class="kn">from</span><span class="w"> </span><span class="s1">&#39;ethers&#39;</span><span class="p">;</span> <span class="o">//</span> <span class="n">Import</span> <span class="n">Ethers</span> <span class="n">library</span>

<span class="n">const</span> <span class="n">abi</span> <span class="o">=</span> <span class="n">INSERT_ABI</span><span class="p">;</span>
<span class="n">const</span> <span class="n">privateKey</span> <span class="o">=</span> <span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Create</span> <span class="n">Ethers</span> <span class="n">provider</span> <span class="ow">and</span> <span class="n">signer</span>
<span class="n">const</span> <span class="n">provider</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ethers</span><span class="o">.</span><span class="n">JsonRpcProvider</span><span class="p">(</span>
  <span class="s1">&#39;https://rpc.api.moonbase.moonbeam.network&#39;</span>
<span class="p">);</span>
<span class="n">const</span> <span class="n">signer</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ethers</span><span class="o">.</span><span class="n">Wallet</span><span class="p">(</span><span class="n">privateKey</span><span class="p">,</span> <span class="n">provider</span><span class="p">);</span>
<span class="o">//</span> <span class="n">Create</span> <span class="n">contract</span> <span class="n">instance</span>
<span class="n">const</span> <span class="n">xcmTransactorV3</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ethers</span><span class="o">.</span><span class="n">Contract</span><span class="p">(</span>
  <span class="s1">&#39;0x0000000000000000000000000000000000000817&#39;</span><span class="p">,</span>
  <span class="n">abi</span><span class="p">,</span>
  <span class="n">signer</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">Arguments</span> <span class="k">for</span> <span class="n">the</span> <span class="n">transactThroughSigned</span> <span class="n">function</span>
<span class="n">const</span> <span class="n">dest</span> <span class="o">=</span> <span class="p">[</span>
  <span class="mi">1</span><span class="p">,</span> <span class="o">//</span> <span class="n">parents</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="p">[</span>
    <span class="o">//</span> <span class="n">interior</span> <span class="o">=</span> <span class="n">X1</span> <span class="p">(</span><span class="n">the</span> <span class="n">array</span> <span class="n">has</span> <span class="n">a</span> <span class="n">length</span> <span class="n">of</span> <span class="mi">1</span><span class="p">)</span>
    <span class="s1">&#39;0x0000000378&#39;</span><span class="p">,</span> <span class="o">//</span> <span class="n">Parachain</span> <span class="n">selector</span> <span class="o">+</span> <span class="n">Parachain</span> <span class="n">ID</span> <span class="mi">888</span>
  <span class="p">],</span>
<span class="p">];</span>
<span class="n">const</span> <span class="n">feeLocationAddress</span> <span class="o">=</span> <span class="s1">&#39;0xFFFFFFFF1AB2B146C526D4154905FF12E6E57675&#39;</span><span class="p">;</span>
<span class="n">const</span> <span class="n">transactRequiredWeightAtMost</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000000000</span><span class="n">n</span><span class="p">,</span> <span class="mi">5000</span><span class="n">n</span><span class="p">];</span>
<span class="n">const</span> <span class="n">call</span> <span class="o">=</span> <span class="s1">&#39;0x030044236223ab4291b93eed10e4b511b37a398dee5513000064a7b3b6e00d&#39;</span><span class="p">;</span>
<span class="n">const</span> <span class="n">feeAmount</span> <span class="o">=</span> <span class="mi">50000000000000000</span><span class="n">n</span><span class="p">;</span>
<span class="n">const</span> <span class="n">overallWeight</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2000000000</span><span class="n">n</span><span class="p">,</span> <span class="mi">10000</span><span class="n">n</span><span class="p">];</span>
<span class="n">const</span> <span class="n">refund</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Sends</span> <span class="mi">1</span> <span class="n">token</span> <span class="n">to</span> <span class="n">Alice</span><span class="s1">&#39;s account on parachain 888</span>
<span class="k">async</span> <span class="n">function</span> <span class="n">transactThroughSigned</span><span class="p">()</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Creates</span><span class="p">,</span> <span class="n">signs</span><span class="p">,</span> <span class="ow">and</span> <span class="n">sends</span> <span class="n">the</span> <span class="n">transfer</span> <span class="n">transaction</span>
  <span class="n">const</span> <span class="n">transaction</span> <span class="o">=</span> <span class="k">await</span> <span class="n">xcmTransactorV3</span><span class="o">.</span><span class="n">transactThroughSigned</span><span class="p">(</span>
    <span class="n">dest</span><span class="p">,</span>
    <span class="n">feeLocationAddress</span><span class="p">,</span>
    <span class="n">transactRequiredWeightAtMost</span><span class="p">,</span>
    <span class="n">call</span><span class="p">,</span>
    <span class="n">feeAmount</span><span class="p">,</span>
    <span class="n">overallWeight</span><span class="p">,</span>
    <span class="n">refund</span>
  <span class="p">);</span>

  <span class="o">//</span> <span class="n">Waits</span> <span class="k">for</span> <span class="n">the</span> <span class="n">transaction</span> <span class="n">to</span> <span class="n">be</span> <span class="n">included</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">block</span>
  <span class="k">await</span> <span class="n">transaction</span><span class="o">.</span><span class="n">wait</span><span class="p">();</span>
  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">transactThroughSigned</span><span class="p">();</span>
</code></pre></div> <p>===</p> <div class="codehilite"><pre><span></span><code><span class="n">js</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">Web3</span> <span class="kn">from</span><span class="w"> </span><span class="s1">&#39;web3&#39;</span><span class="p">;</span> <span class="o">//</span> <span class="n">Import</span> <span class="n">Web3</span> <span class="n">library</span>

<span class="n">const</span> <span class="n">abi</span> <span class="o">=</span> <span class="n">INSERT_ABI</span><span class="p">;</span>
<span class="n">const</span> <span class="n">privateKey</span> <span class="o">=</span> <span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Create</span> <span class="n">Web3</span> <span class="n">provider</span>
<span class="n">const</span> <span class="n">web3</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Web3</span><span class="p">(</span><span class="s1">&#39;https://rpc.api.moonbase.moonbeam.network&#39;</span><span class="p">);</span> <span class="o">//</span> <span class="n">Change</span> <span class="n">to</span> <span class="n">network</span> <span class="n">of</span> <span class="n">choice</span>

<span class="o">//</span> <span class="n">Create</span> <span class="n">contract</span> <span class="n">instance</span>
<span class="n">const</span> <span class="n">xcmTransactorV3</span> <span class="o">=</span> <span class="n">new</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">Contract</span><span class="p">(</span>
  <span class="n">abi</span><span class="p">,</span>
  <span class="s1">&#39;0x0000000000000000000000000000000000000817&#39;</span><span class="p">,</span>
  <span class="p">{</span> <span class="n">from</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="o">.</span><span class="n">privateKeyToAccount</span><span class="p">(</span><span class="n">privateKey</span><span class="p">)</span><span class="o">.</span><span class="n">address</span> <span class="p">}</span> <span class="o">//</span> <span class="s1">&#39;from&#39;</span> <span class="ow">is</span> <span class="n">necessary</span> <span class="k">for</span> <span class="n">gas</span> <span class="n">estimation</span>
<span class="p">);</span>

<span class="o">//</span> <span class="n">Arguments</span> <span class="k">for</span> <span class="n">the</span> <span class="n">transactThroughSigned</span> <span class="n">function</span>
<span class="n">const</span> <span class="n">dest</span> <span class="o">=</span> <span class="p">[</span>
  <span class="mi">1</span><span class="p">,</span> <span class="o">//</span> <span class="n">parents</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="p">[</span>
    <span class="o">//</span> <span class="n">interior</span> <span class="o">=</span> <span class="n">X1</span> <span class="p">(</span><span class="n">the</span> <span class="n">array</span> <span class="n">has</span> <span class="n">a</span> <span class="n">length</span> <span class="n">of</span> <span class="mi">1</span><span class="p">)</span>
    <span class="s1">&#39;0x0000000378&#39;</span><span class="p">,</span> <span class="o">//</span> <span class="n">Parachain</span> <span class="n">selector</span> <span class="o">+</span> <span class="n">Parachain</span> <span class="n">ID</span> <span class="mi">888</span>
  <span class="p">],</span>
<span class="p">];</span>
<span class="n">const</span> <span class="n">feeLocationAddress</span> <span class="o">=</span> <span class="s1">&#39;0xFFFFFFFF1AB2B146C526D4154905FF12E6E57675&#39;</span><span class="p">;</span>
<span class="n">const</span> <span class="n">transactRequiredWeightAtMost</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000000000</span><span class="n">n</span><span class="p">,</span> <span class="mi">5000</span><span class="n">n</span><span class="p">];</span>
<span class="n">const</span> <span class="n">call</span> <span class="o">=</span> <span class="s1">&#39;0x030044236223ab4291b93eed10e4b511b37a398dee5513000064a7b3b6e00d&#39;</span><span class="p">;</span>
<span class="n">const</span> <span class="n">feeAmount</span> <span class="o">=</span> <span class="mi">50000000000000000</span><span class="n">n</span><span class="p">;</span>
<span class="n">const</span> <span class="n">overallWeight</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2000000000</span><span class="n">n</span><span class="p">,</span> <span class="mi">10000</span><span class="n">n</span><span class="p">];</span>
<span class="n">const</span> <span class="n">refund</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Sends</span> <span class="mi">1</span> <span class="n">token</span> <span class="n">to</span> <span class="n">Alice</span><span class="s1">&#39;s account on parachain 888</span>
<span class="k">async</span> <span class="n">function</span> <span class="n">transactThroughSigned</span><span class="p">()</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Create</span> <span class="n">transaction</span>
  <span class="n">const</span> <span class="n">transferTx</span> <span class="o">=</span> <span class="n">xcmTransactorV3</span><span class="o">.</span><span class="n">methods</span><span class="o">.</span><span class="n">transactThroughSigned</span><span class="p">(</span>
    <span class="n">dest</span><span class="p">,</span>
    <span class="n">feeLocationAddress</span><span class="p">,</span>
    <span class="n">transactRequiredWeightAtMost</span><span class="p">,</span>
    <span class="n">call</span><span class="p">,</span>
    <span class="n">feeAmount</span><span class="p">,</span>
    <span class="n">overallWeight</span><span class="p">,</span>
    <span class="n">refund</span>
  <span class="p">);</span>

  <span class="o">//</span> <span class="n">Sign</span> <span class="n">transaction</span>
  <span class="n">const</span> <span class="n">signedTx</span> <span class="o">=</span> <span class="k">await</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="o">.</span><span class="n">signTransaction</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="n">to</span><span class="p">:</span> <span class="s1">&#39;0x000000000000000000000000000000000000080d&#39;</span><span class="p">,</span>
      <span class="n">data</span><span class="p">:</span> <span class="n">transferTx</span><span class="o">.</span><span class="n">encodeABI</span><span class="p">(),</span>
      <span class="n">gas</span><span class="p">:</span> <span class="k">await</span> <span class="n">transferTx</span><span class="o">.</span><span class="n">estimateGas</span><span class="p">(),</span>
    <span class="p">},</span>
    <span class="n">privateKey</span>
  <span class="p">);</span>

  <span class="o">//</span> <span class="n">Send</span> <span class="n">signed</span> <span class="n">transaction</span>
  <span class="n">const</span> <span class="n">sendTx</span> <span class="o">=</span> <span class="k">await</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">sendSignedTransaction</span><span class="p">(</span><span class="n">signedTx</span><span class="o">.</span><span class="n">rawTransaction</span><span class="p">);</span>
  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">sendTx</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">transactThroughSigned</span><span class="p">();</span>
</code></pre></div> <p>===</p> <div class="codehilite"><pre><span></span><code><span class="n">py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">web3</span><span class="w"> </span><span class="kn">import</span> <span class="n">Web3</span>

<span class="n">abi</span> <span class="o">=</span> <span class="s2">&quot;INSERT_ABI&quot;</span>  <span class="c1"># Paste or import the XCM Transactor V3 ABI</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="s2">&quot;INSERT_PRIVATE_KEY&quot;</span>  <span class="c1"># This is for demo purposes, never store your private key in plain text</span>
<span class="n">address</span> <span class="o">=</span> <span class="s2">&quot;INSERT_ADDRESS&quot;</span>  <span class="c1"># The wallet address that corresponds to your private key</span>

<span class="c1"># Create Web3 provider</span>
<span class="n">web3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s2">&quot;https://rpc.api.moonbase.moonbeam.network&quot;</span><span class="p">))</span>

<span class="c1"># Create contract instance</span>
<span class="n">xcm_transactor_v3</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span>
    <span class="n">address</span><span class="o">=</span><span class="s2">&quot;0x0000000000000000000000000000000000000817&quot;</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">abi</span>
<span class="p">)</span>

<span class="c1"># Arguments for the transactThroughSigned function</span>
<span class="n">dest</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">1</span><span class="p">,</span>  <span class="c1"># parents = 1</span>
    <span class="p">[</span>
        <span class="c1"># interior = X1 (the array has a length of 1)</span>
        <span class="s2">&quot;0x0000000378&quot;</span><span class="p">,</span>  <span class="c1"># Parachain selector + Parachain ID 888</span>
    <span class="p">],</span>
<span class="p">]</span>
<span class="n">feeLocationAddress</span> <span class="o">=</span> <span class="s2">&quot;0xFFFFFFFF1AB2B146C526D4154905FF12E6E57675&quot;</span>
<span class="n">transactRequiredWeightAtMost</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000000000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">]</span>
<span class="n">call</span> <span class="o">=</span> <span class="s2">&quot;0x030044236223ab4291b93eed10e4b511b37a398dee5513000064a7b3b6e00d&quot;</span>
<span class="n">feeAmount</span> <span class="o">=</span> <span class="mi">50000000000000000</span>
<span class="n">overallWeight</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2000000000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">]</span>
<span class="n">refund</span> <span class="o">=</span> <span class="kc">True</span>


<span class="c1"># Sends 1 xcUNIT to the relay chain using the transferMultiasset function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">transact_through_signed</span><span class="p">():</span>
    <span class="c1"># Create transaction</span>
    <span class="n">transferTx</span> <span class="o">=</span> <span class="n">xcm_transactor_v3</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">transactThroughSigned</span><span class="p">(</span>
        <span class="n">dest</span><span class="p">,</span>
        <span class="n">feeLocationAddress</span><span class="p">,</span>
        <span class="n">transactRequiredWeightAtMost</span><span class="p">,</span>
        <span class="n">call</span><span class="p">,</span>
        <span class="n">feeAmount</span><span class="p">,</span>
        <span class="n">overallWeight</span><span class="p">,</span>
        <span class="n">refund</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">address</span><span class="p">,</span>
            <span class="s2">&quot;nonce&quot;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="n">address</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="c1"># Sign transaction</span>
    <span class="n">signedTx</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">transferTx</span><span class="p">,</span> <span class="n">private_key</span><span class="p">)</span>

    <span class="c1"># Send tx and wait for receipt</span>
    <span class="nb">hash</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signedTx</span><span class="o">.</span><span class="n">rawTransaction</span><span class="p">)</span>
    <span class="n">receipt</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tx successful with hash: </span><span class="si">{</span><span class="w"> </span><span class="n">receipt</span><span class="o">.</span><span class="n">transactionHash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span><span class="w"> </span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">transact_through_signed</span><span class="p">()</span>
</code></pre></div> <h3 id="transact-through-computed-origin-fees">通过计算 Origin 费用进行 XCM 交易<a class="headerlink" href="#transact-through-computed-origin-fees" title="Permanent link">&para;</a></h3> <p>当<a href="#xcmtransactor-transact-through-signed" target="_blank">通过计算 Origin 账户进行交易</a>时，交易费用由发起调用的同一账户支付，即目标链中的计算 Origin 账户。因此，计算 Origin 账户必须持有必要的资金来支付整个执行过程。请注意，用于支付费用的目标 Token 不需要在起始链中注册为 XC-20。</p> <p>要估计 Alice 的计算 Origin 账户需要持有的 Token 数量才能执行远程调用，您需要检查特定于目标链的交易信息。您可以使用以下脚本来获取平行链 888 的交易信息：</p> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ethers</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;ethers&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Import Ethers library</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">abi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">INSERT_ABI</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSERT_PRIVATE_KEY&#39;</span><span class="p">;</span>

<span class="c1">// Create Ethers wallet &amp; contract instance</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;https://rpc.api.moonbase.moonbeam.network&#39;</span>
<span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">signer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">xcmTransactorV3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;0x0000000000000000000000000000000000000817&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">abi</span><span class="p">,</span>
<span class="w">  </span><span class="nx">signer</span>
<span class="p">);</span>

<span class="c1">// Multilocation for parachain 888</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">multilocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="c1">// parents = 1</span>
<span class="w">  </span><span class="p">[</span><span class="w">  </span><span class="c1">// interior = X1 (the array has a length of 1)</span>
<span class="w">    </span><span class="s1">&#39;0x0000000378&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// Parachain selector + Parachain ID 888</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">];</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">transactInfoWithSigned</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">xcmTransactorV3</span><span class="p">.</span><span class="nx">transactInfoWithSigned</span><span class="p">(</span>
<span class="w">    </span><span class="nx">multilocation</span>
<span class="w">  </span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">transactInfoWithSigned</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">main</span><span class="p">();</span>
</code></pre></div> <p>响应显示 <code>transactExtraWeightSigned</code> 为 <code>400,000,000</code>。执行该特定目标链中此远程调用的四个 XCM 指令需要此权重。接下来，您需要找出目标链根据资产价格，对每个 XCM 执行权重的收费。以前，这是通过获取每秒单位值来完成的。但是，此方法已被计算相对价格所取代。相对价格是指从价值（即价格）角度来看，多少单位的外国资产对应于一个单位的本机 Token（GLMR 或 MOVR）。例如，如果外国资产价值 5 美元，而 GLMR 价值 0.25 美元，则相对价格为 0.05。但是，我们必须将结果缩放到 18 位小数，以对应于使用的 Wei 单位。在这种情况下，相对价格将为 <code>50000000000000000</code>。</p> <p>您可以使用 <a href="https://github.com/Moonsong-Labs/xcm-tools?tab=readme-ov-file#calculate-relative-price" target="_blank">XCM Tools repo</a> 中的脚本计算相对价格。该脚本也如下所示：</p> <details class="code"> <summary>计算相对价格</summary> <div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;axios&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">chalk</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;chalk&#39;</span><span class="p">;</span>

<span class="c1">// CoinGecko IDs for the networks</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">NETWORK_IDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">GLMR</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;moonbeam&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">MOVR</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;moonriver&#39;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">calculateRelativePrice</span><span class="p">(</span>
<span class="w">  </span><span class="nx">assetPrice</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">  </span><span class="nx">network</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;GLMR&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;MOVR&#39;</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Fetch the native token price from CoinGecko</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span>
<span class="w">      </span><span class="sb">`https://api.coingecko.com/api/v3/simple/price?ids=</span><span class="si">${</span><span class="nx">NETWORK_IDS</span><span class="p">[</span><span class="nx">network</span><span class="p">]</span><span class="si">}</span><span class="sb">&amp;vs_currencies=usd`</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nativeTokenPrice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">NETWORK_IDS</span><span class="p">[</span><span class="nx">network</span><span class="p">]].</span><span class="nx">usd</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Calculate relative price with 18 decimal places</span>
<span class="w">    </span><span class="c1">// Formula: (nativeTokenPrice / assetPrice) * 10^18</span>
<span class="w">    </span><span class="c1">// This gives us how many units of the asset we need to equal 1 unit of native token</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">relativePrice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">nativeTokenPrice</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">assetPrice</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">18</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Return as string to preserve precision</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">relativePrice</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="ow">instanceof</span><span class="w"> </span><span class="ne">Error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Failed to calculate relative price: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">validateInput</span><span class="p">(</span>
<span class="w">  </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<span class="w">  </span><span class="nx">network</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">assetPrice</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="nx">network</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;GLMR&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;MOVR&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Validate price</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">assetPrice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">price</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">assetPrice</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">assetPrice</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Price must be a positive number&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Validate network</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">upperNetwork</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">network</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="s1">&#39;GLMR&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;MOVR&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="s1">&#39;GLMR&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;MOVR&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">upperNetwork</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Network must be either GLMR or MOVR&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">assetPrice</span><span class="p">,</span><span class="w"> </span><span class="nx">network</span><span class="o">:</span><span class="w"> </span><span class="kt">upperNetwork</span><span class="w"> </span><span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">printUsage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nUsage:&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;npx ts-node relative-price-calculator.ts &lt;price&gt; &lt;network&gt;&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nExample:&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;npx ts-node relative-price-calculator.ts 0.25 GLMR&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\nParameters:&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;price   - The price of your asset in USD&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;network - Either GLMR or MOVR&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Get command line arguments</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="p">,</span><span class="w"> </span><span class="nx">network</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Check if help flag is passed</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">price</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;--help&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">price</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;-h&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">printUsage</span><span class="p">();</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Check if required arguments are provided</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">price</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">network</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error: Missing required arguments&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="nx">printUsage</span><span class="p">();</span>
<span class="w">      </span><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Validate inputs</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">assetPrice</span><span class="p">,</span><span class="w"> </span><span class="nx">network</span><span class="o">:</span><span class="w"> </span><span class="kt">validNetwork</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">validateInput</span><span class="p">(</span><span class="nx">price</span><span class="p">,</span><span class="w"> </span><span class="nx">network</span><span class="p">);</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="w">      </span><span class="sb">`\nCalculating relative price for asset worth $</span><span class="si">${</span><span class="nx">assetPrice</span><span class="si">}</span><span class="sb"> against </span><span class="si">${</span><span class="nx">validNetwork</span><span class="si">}</span><span class="sb">...`</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">relativePrice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">calculateRelativePrice</span><span class="p">(</span>
<span class="w">      </span><span class="nx">assetPrice</span><span class="p">,</span>
<span class="w">      </span><span class="nx">validNetwork</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nativeTokenPrice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span>
<span class="w">        </span><span class="sb">`https://api.coingecko.com/api/v3/simple/price?ids=</span><span class="si">${</span><span class="nx">NETWORK_IDS</span><span class="p">[</span><span class="nx">validNetwork</span><span class="p">]</span><span class="si">}</span><span class="sb">&amp;vs_currencies=usd`</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">    </span><span class="p">).</span><span class="nx">data</span><span class="p">[</span><span class="nx">NETWORK_IDS</span><span class="p">[</span><span class="nx">validNetwork</span><span class="p">]].</span><span class="nx">usd</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">decimalRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nativeTokenPrice</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">assetPrice</span><span class="p">;</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`\nResults:`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Asset Price: $</span><span class="si">${</span><span class="nx">assetPrice</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Network: </span><span class="si">${</span><span class="nx">validNetwork</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Native Token Price (from CoinGecko): $</span><span class="si">${</span><span class="nx">nativeTokenPrice</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`\nRelative Price Analysis:`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="w">      </span><span class="sb">`1 </span><span class="si">${</span><span class="nx">validNetwork</span><span class="si">}</span><span class="sb"> is equal to approximately </span><span class="si">${</span><span class="nx">decimalRatio</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span>
<span class="w">        </span><span class="mf">3</span>
<span class="w">      </span><span class="p">)</span><span class="si">}</span><span class="sb"> of your specified token.`</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="w">      </span><span class="sb">`With 18 decimals, 1 </span><span class="si">${</span><span class="nx">validNetwork</span><span class="si">}</span><span class="sb"> or in WEI, 1000000000000000000 is equal to a relative price of </span><span class="si">${</span><span class="nx">relativePrice</span><span class="si">}</span><span class="sb"> units of your token`</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">chalk</span><span class="p">.</span><span class="nx">bold</span><span class="p">(</span><span class="sb">`\nRelative Price: </span><span class="si">${</span><span class="nx">relativePrice</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<span class="w">      </span><span class="sb">`\nThe relative price you should specify in asset registration steps is </span><span class="si">${</span><span class="nx">relativePrice</span><span class="si">}</span><span class="sb">\n`</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;\nError:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="ow">instanceof</span><span class="w"> </span><span class="ne">Error</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">error.message</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">error</span><span class="p">);</span>
<span class="w">    </span><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">main</span><span class="p">();</span>
</code></pre></div> </details> <p>请注意，相对价格值与 <a href="/builders/interoperability/xcm/core-concepts/weights-fees/#polkadot" target="_blank">中继链 XCM 费用计算</a> 部分中估计的成本或 <a href="/builders/interoperability/xcm/core-concepts/weights-fees/#moonbeam-reserve-assets" target="_blank">每权重单位</a> 部分中显示的成本相关（如果目标是另一个平行链）。您需要找到正确的值，以确保计算 Origin 账户持有的 Token 数量正确。计算相关的 XCM 执行费用就像将 <code>transactExtraWeightSigned</code> 乘以 <code>relativePrice</code> 一样简单（用于估算）：</p> <div class="highlight"><pre><span></span><code>XCM-Wei-Token-Cost = transactExtraWeightSigned * relativePrice
XCM-Token-Cost = XCM-Wei-Token-Cost / DecimalConversion
</code></pre></div> <p>因此，通过派生调用进行一次 XCM Transactor 交易的实际计算如下：</p> <div class="highlight"><pre><span></span><code>XCM-Wei-Token-Cost = 400000000 * 50000000000000000
XCM-Token-Cost = 20000000000000 / 10^18
</code></pre></div> <p>通过计算 Origin 进行交易的成本为 <code>0.00002 TOKEN</code>。<strong>请注意，这不包括远程执行调用的成本，仅包括 XCM 执行费用。</strong></p> <div class="md-source-file"> <small> <span class="source-file-label">更新时间:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2026年1月20日 16:04:43">2026年1月20日</span> <br> <span class="source-file-seperator">|</span> <span class="source-file-label">创建时间:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2026年1月15日 00:27:02">2026年1月15日</span> </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class="md-footer"> <nav class="md-footer__inner md-grid" aria-label="标题"> <a href="../xcm-transactor-pallet/" class="md-footer__link md-footer__link--prev" rel="prev"> <div class="md-footer__button md-icon"> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="122.883px" height="122.882px" viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M61.441,0c16.967,0,32.327,6.877,43.446,17.996c11.119,11.119,17.996,26.479,17.996,43.445 c0,16.966-6.877,32.326-17.996,43.445c-11.119,11.118-26.479,17.995-43.446,17.995c-16.966,0-32.326-6.877-43.445-17.995 C6.877,93.768,0,78.407,0,61.441c0-16.967,6.877-32.327,17.996-43.445C29.115,6.877,44.475,0,61.441,0L61.441,0z M71.377,42.166 c1.736-1.784,1.695-4.637-0.088-6.372s-4.637-1.696-6.373,0.088L43.078,58.402l3.23,3.142l-3.244-3.146 c-1.737,1.792-1.693,4.652,0.099,6.39c0.052,0.05,0.104,0.099,0.158,0.146l21.595,22.082c1.736,1.784,4.59,1.823,6.373,0.088 c1.783-1.734,1.824-4.588,0.088-6.372L52.598,61.531L71.377,42.166L71.377,42.166z M98.496,24.386 C89.014,14.903,75.912,9.038,61.441,9.038s-27.572,5.865-37.055,15.348C14.903,33.869,9.038,46.97,9.038,61.441 c0,14.471,5.865,27.572,15.349,37.055c9.482,9.483,22.583,15.349,37.055,15.349s27.573-5.865,37.055-15.349 c9.484-9.482,15.35-22.584,15.35-37.055C113.846,46.97,107.98,33.869,98.496,24.386L98.496,24.386z"/></g></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> 上一个 </span> <span class="md-footer__page-name"> 使用 Substrate API </span> </div> </a> <a href="../../remote-evm-calls/" class="md-footer__link md-footer__link--next" rel="next"> <div class="md-footer__title"> <span class="md-footer__direction"> 下一个 </span> <span class="md-footer__page-name"> 远程 EVM 调用 </span> </div> <div class="md-footer__button md-icon"> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="122.883px" height="122.882px" viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M61.441,0C44.475,0,29.115,6.877,17.996,17.996C6.877,29.115,0,44.475,0,61.441c0,16.966,6.877,32.326,17.996,43.445 c11.119,11.118,26.479,17.995,43.445,17.995c16.967,0,32.327-6.877,43.446-17.995c11.119-11.119,17.996-26.479,17.996-43.445 c0-16.967-6.877-32.327-17.996-43.445C93.768,6.877,78.408,0,61.441,0L61.441,0z M51.505,42.166 c-1.735-1.784-1.696-4.637,0.088-6.372c1.784-1.735,4.637-1.696,6.373,0.088l21.839,22.521l-3.23,3.142l3.244-3.146 c1.738,1.792,1.693,4.652-0.098,6.39c-0.053,0.05-0.105,0.099-0.158,0.146L57.966,87.017c-1.735,1.784-4.588,1.823-6.373,0.088 c-1.784-1.734-1.823-4.588-0.088-6.372l18.78-19.201L51.505,42.166L51.505,42.166z M24.386,24.386 C33.869,14.903,46.97,9.038,61.441,9.038c14.471,0,27.573,5.865,37.055,15.348c9.484,9.483,15.35,22.584,15.35,37.056 c0,14.471-5.865,27.572-15.35,37.055c-9.482,9.483-22.584,15.349-37.055,15.349c-14.471,0-27.572-5.865-37.055-15.349 C14.903,89.014,9.038,75.912,9.038,61.441C9.038,46.97,14.903,33.869,24.386,24.386L24.386,24.386z"/></g></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="column llms-wrapper"> <p class="llms-title"> AI 兼容文档 </p> <div class="llms-options"> <a class="llms-link" href="/llms.txt">法学硕士文本</a> <a class="llms-link" href="/llms-full.txt">法学硕士全文</a> <a class="llms-link" href="../../../../../../../ai-resources/ai-resources/">按主题分类的法学硕士</a> </div> </div> <div class="column social"> <div class="md-social"> <a href="https://discord.com/invite/PfpUATX" target="_blank" rel="noopener" title="Discord" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href="https://t.me/Moonbeam_Official" target="_blank" rel="noopener" title="Telegram" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg> </a> <a href="https://x.com/MoonbeamNetwork" target="_blank" rel="noopener" title="Twitter" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href="https://www.youtube.com/c/MoonbeamNetwork" target="_blank" rel="noopener" title="YouTube" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href="https://github.com/moonbeam-foundation/moonbeam" target="_blank" rel="noopener" title="GitHub" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> <div class="md-footer-copyright"> <div class="copyright-wrapper"> <div class="md-footer-copyright__highlight"> © 2026 Moonbeam Foundation. All Rights Reserved. </div> <div class="papermoon"> <span> 由 <a href="https://papermoon.io/" target="_blank">PaperMoon</a> with 🩵 制作 </span> </div> <div class="policy-links"> <a href="https://moonbeam.network/terms-of-use" target="_blank">使用条款</a> <a href="https://moonbeam.network/privacy-policy" target="_blank">隐私政策</a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-consent" data-md-component="consent" id="__consent" hidden> <div class="md-consent__overlay"></div> <aside class="md-consent__inner"> <form class="md-consent__form md-grid md-typeset" name="consent"> <form class="md-consent__form md-grid md-typeset"> 左侧区域徽标 <div class="cookie-logo"> <img src="../../../../../../../assets/images/Moonbeam_Icon_White.webp" alt="用于 Cookie 同意的 Moonbeam 徽标"> </div> 中心区域标题和描述 <div class="cookie-content"> <h4>This website uses cookies</h4> <p>We use essential cookies to make the website work. We would also like to use cookies to understand how you use the website and how you interact with certain features. We may share this information with our analytics partners. For further details, please see our <a href="https://moonbeam.network/cookie-policy" target="_blank" rel="noopener">cookie policy</a>. </p> 管理设置切换 <input class="md-toggle" type="checkbox" id="__settings"> 同意设置 <div class="md-consent__settings"> <ul class="task-list"> <li class="task-list-item"> <label class="task-list-control"> <input type="checkbox" name="analytics" checked> <span class="task-list-indicator"></span> Google Analytics </label> </li> </ul> </div> </div> 右侧区域按钮 <div class="cookie-buttons md-consent__controls"> <button class="md-button md-button--primary">同意</button> <label class="md-button" for="__settings">管理设定</label> <button type="reset" class="md-button md-button--secondary">拒绝</button> </div> </form> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id="__config" type="application/json">{"base":"../../../../../../","features":["navigation.tabs","navigation.tabs.sticky","navigation.sections","navigation.indexes","navigation.prune","content.code.copy","announce.dismiss","content.action.edit"],"search":"../../../../../../../assets/javascripts/workers/search.d50fe291.min.js","tags":null,"translations":{"clipboard.copied":"\u5df2\u590d\u5236","clipboard.copy":"\u590d\u5236","search.result.more.one":"\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.more.other":"\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.none":"\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.one":"\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.other":"# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c","search.result.placeholder":"\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22","search.result.term.missing":"\u7f3a\u5c11","select.version":"\u9009\u62e9\u5f53\u524d\u7248\u672c"},"version":null}</script> <script src="../../../../../../../assets/javascripts/bundle.56ea9cef.min.js"></script> <script src="../../../../../../../js/connectMetaMask.js"></script> <script src="../../../../../../../js/errorModal.js"></script> <script src="../../../../../../../js/networkModal.js"></script> <script src="../../../../../../../js/lang-toggle.js"></script> <script src="../../../../../../../js/fixCreatedDate.js"></script> <script src="../../../../../../../js/externalLinkModal.js"></script> <script src="../../../../../../../js/cookbookInit.js"></script> <script src="../../../../../../../js/clipboardCopyllms.js"></script> <script src="../../../../../../../js/cookbookEventHandler.js"></script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      const copyTxtFile = async (url) => {
        try {
            const response = await fetch(url);
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const text = await response.text();
            await navigator.clipboard.writeText(text);

            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.add('md-dialog--active');

              const copiedToClipboardMessage =
                copiedToClipboard.querySelector('.md-dialog__inner');
              if (
                copiedToClipboardMessage &&
                copiedToClipboardMessage.textContent !==
                  "已复制"
              ) {
                copiedToClipboardMessage.textContent =
                  "已复制";
              }
              // Set a timer to remove the after 2 seconds (2000ms)
              setTimeout(() => {
                copiedToClipboard.classList.remove('md-dialog--active');
              }, 2000);
            }
          } catch (err) {
            console.error('Failed to copy:', err);
            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.remove('md-dialog--active');
            }
          }
      }

      document.querySelectorAll('.llms').forEach(button => {
        button.addEventListener('click', (event) => {
          event.preventDefault(); // Prevent default link behavior

          const action = button.getAttribute('data-action');
          const fileName = button.getAttribute('data-value');
          if (!fileName) return; // Exit if no file name is found

          // Add 'llms-files/' prefix except for root-level llms.txt and llms-full.txt
          const filePath = (fileName === "llms.txt" || fileName === "llms-full.txt") 
            ? fileName 
            : `llms-files/${fileName}`;
          const url = `https://docs.moonbeam.network/${filePath}`;

          if (action === 'copy') {
            copyTxtFile(url);
          }
        })
      })
    });
  </script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>