<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn how to use the Batch Precompile on Moonbeam to batch an approval and swap into a single call, so you can approve the exact amount of tokens for the swap."><link href=https://docs.moonbeam.network/tutorials/eth-api/batch-approve-swap/ rel=canonical><link href=../precompiles.index/ rel=prev><link href=../randomness-lottery/ rel=next><link rel=icon href=../../../assets/images/favicon.webp><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.15"><title>Approve & Swap with the Batch Precompile | Moonbeam Docs</title><link rel=stylesheet href=../../../assets/stylesheets/main.342714a4.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js as=script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Banana+Grotesk:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Banana Grotesk";--md-code-font:"Roboto Mono"}</style><link rel=preconnect href=https://fonts.googleapis.com><link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel=stylesheet><link rel=stylesheet href=../../../assets/stylesheets/moonbeam.min.css><link rel=stylesheet href=../../../assets/stylesheets/termynal.min.css><link rel=stylesheet href=../../../assets/stylesheets/timeline-neoteroi.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-5ZBERCXWC3"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-5ZBERCXWC3",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-5ZBERCXWC3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#use-the-batch-precompile-to-approve-and-swap-tokens-in-a-single-transaction class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <div class=md-header__left-nav> <a href=https://docs.moonbeam.network/ title="Moonbeam Docs" class="md-header__button md-logo" aria-label="Moonbeam Docs"> <img src=../../../assets/images/logo.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> </div> <div class=md-header__buttons> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../builders/ >Builders</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../builders/get-started/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/get-started.webp alt="Get Started" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Get Started</span> <p class=dropdown-desc>Everything you need to get started building</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/ethereum/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/ethereum.webp alt="Ethereum Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Ethereum Toolkit</span> <p class=dropdown-desc>Ethereum libraries, tools, and contracts</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/substrate/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/substrate.webp alt="Substrate Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Substrate Toolkit</span> <p class=dropdown-desc>Substrate libraries, tools, and low-level interfaces</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/interoperability/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/interoperability.webp alt=Interoperability loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Interoperability</span> <p class=dropdown-desc>GMP protocols for cross-chain development</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/integrations/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/integrations.webp alt=Integrate loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Integrate</span> <p class=dropdown-desc>Tools and protocols to integrate with</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../node-operators/ >Node Operators</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../node-operators/networks/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/networks.webp alt=Networks loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Networks</span> <p class=dropdown-desc>Run full, tracing, or collator nodes</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../tokens/ >Tokens</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../tokens/connect/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/connect.webp alt="Connect to Moonbeam" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Connect to Moonbeam</span> <p class=dropdown-desc>Connect your wallet to Moonbeam</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../tokens/manage/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/manage.webp alt="Account Management" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Account Management</span> <p class=dropdown-desc>Advanced account and identity services</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../tokens/staking/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/staking.webp alt=Staking loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Staking</span> <p class=dropdown-desc>Stake tokens by delegating to collators</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../tokens/governance/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/governance.webp alt=Governance loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Governance</span> <p class=dropdown-desc>Submit and vote on on-chain proposals</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../learn/ >Learn</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../learn/platform/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/platform.webp alt=Platform loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Platform</span> <p class=dropdown-desc>Dive into underlying technology and design aspects</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../learn/core-concepts/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/core-concepts.webp alt="Core Concepts" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Core Concepts</span> <p class=dropdown-desc>Learn about the fundamentals of Moonbeam</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../learn/features/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/features.webp alt=Features loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Features</span> <p class=dropdown-desc>Explore core features</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../learn/dapp-directory/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/dapp-directory.webp alt="DApp Directory" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>DApp Directory</span> <p class=dropdown-desc>Explore the DApp Directory and listing process</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../ >Tutorials</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../interoperability/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/interoperability.webp alt=Interoperability loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Interoperability</span> <p class=dropdown-desc>Get hands-on building cross-chain DApps</p> </div> </a> </li> <li class=md-tab__item> <a href=../ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/eth-api.webp alt="Ethereum API" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Ethereum API</span> <p class=dropdown-desc>Beginner to pro smart contract tutorials</p> </div> </a> </li> <li class=md-tab__item> <a href=../../integrations/ > <div class=icon-col> <img class=dropdown-icon src=assets/images/dropdown-icons/integrations.webp alt=Integrations loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Integrations</span> <p class=dropdown-desc>Dive deeper with tutorials on seamless integrations</p> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class="language-select-wrapper select-wrapper"> <span class="language-select-label select-label">Eng</span> <ul class="language-select select"> <li class=en value=en><a href=#>Eng</a></li> <li class=cn value=cn><a href>中文</a></li> </ul> <span class="md-icon selector-closed active"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6z"/></svg></span> <span class="md-icon selector-open"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg></span> </div> <a href=# class="md-header__button md-button connectMetaMask-nav md-typeset"> Connect Wallet </a> <a class="md-header__button md-button faucet md-typeset" href=https://faucet.moonbeam.network/ target=_blank> Faucet </a> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Moonbeam Docs" class="md-nav__button md-logo" aria-label="Moonbeam Docs" data-md-component=logo> <img src=../../../assets/images/logo.webp alt=logo> </a> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ >Builders</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/get-started/ >Get Started</a> <label for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/get-started/quick-start/ class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/create-account/ class=md-nav__link> Create an Account </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/get-started/networks/ >Networks</a> <label for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonbeam-dev/ class=md-nav__link> Local Moonbeam Dev Node </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonbase/ class=md-nav__link> Moonbase Alpha </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonriver/ class=md-nav__link> Moonriver </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonbeam/ class=md-nav__link> Moonbeam </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/get-started/endpoints/ class=md-nav__link> Network RPC Endpoints </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/explorers/ class=md-nav__link> Block Explorers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/ >Ethereum Toolkit</a> <label for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/canonical-contracts/ class=md-nav__link> Canonical Contracts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/ >Precompiled Contracts</a> <label for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/account/ >Account Management</a> <label for=__nav_2_3_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-account-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/account/identity/ class=md-nav__link> Identity </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/account/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/ux/ >User Experience</a> <label for=__nav_2_3_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-ux-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/ux/batch/ class=md-nav__link> Batch </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/ux/call-permit/ class=md-nav__link> Call Permit </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/ux/erc20/ class=md-nav__link> Native Token ERC-20 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/features/ >Network Features</a> <label for=__nav_2_3_3_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/features/governance/ >Governance</a> <label for=__nav_2_3_3_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_3_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/collective/ class=md-nav__link> Collective </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/conviction-voting/ class=md-nav__link> Conviction Voting </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/preimage/ class=md-nav__link> Preimage </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/referenda/ class=md-nav__link> Referenda </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/randomness/ class=md-nav__link> Randomness </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/staking/ class=md-nav__link> Staking Functions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/interoperability/ >Interoperability</a> <label for=__nav_2_3_3_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-interoperability-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/interoperability/gmp/ class=md-nav__link> GMP </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/ class=md-nav__link> X-Tokens </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/eth-api/ class=md-nav__link> XCM Interface </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/ class=md-nav__link> XCM Transactor </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xcm-utils/ class=md-nav__link> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/utility/ >Utility</a> <label for=__nav_2_3_3_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_7> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-utility-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/eth-mainnet/ class=md-nav__link> Ethereum Native </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/registry/ class=md-nav__link> Precompile Registry </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/relay-data-verifier/ class=md-nav__link> Relay Data Verifier </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/non-specific/ class=md-nav__link> Non-Network Specific </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/libraries/ >Libraries</a> <label for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/ethersjs/ class=md-nav__link> Ethers.js </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/ethersrs/ class=md-nav__link> Ethers.rs </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/viem/ class=md-nav__link> viem </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/web3js/ class=md-nav__link> Web3.js </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/web3py/ class=md-nav__link> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/dev-env/ >Dev Environments</a> <label for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-dev-env-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/dev-env/openzeppelin/ >OpenZeppelin</a> <label for=__nav_2_3_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-dev-env-openzeppelin-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/openzeppelin/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/openzeppelin/contracts/ class=md-nav__link> Contract Wizard </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/ape/ class=md-nav__link> Ape </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/foundry/ class=md-nav__link> Foundry </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/hardhat/ class=md-nav__link> Hardhat </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/remix/ class=md-nav__link> Remix </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/scaffold-eth/ class=md-nav__link> Scaffold-ETH </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/tenderly/ class=md-nav__link> Tenderly </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/thirdweb/ class=md-nav__link> thirdweb </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/waffle-mars/ class=md-nav__link> Waffle & Mars </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/verify-contracts/ >Verify Contracts</a> <label for=__nav_2_3_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-verify-contracts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/verify-contracts/block-explorers/ class=md-nav__link> Block Explorers </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/verify-contracts/etherscan-plugins/ class=md-nav__link> Etherscan Plugins </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/verify-contracts/api-verification/ class=md-nav__link> API-based Verification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/json-rpc/ >JSON-RPC APIs</a> <label for=__nav_2_3_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_7> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-json-rpc-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/eth-rpc/ class=md-nav__link> Standard Ethereum </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/debug-trace/ class=md-nav__link> Non-standard Ethereum: Tracing </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/pubsub/ class=md-nav__link> Non-standard Ethereum: Pubsub </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/moonbeam-custom-api/ class=md-nav__link> Custom Moonbeam </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/ >Substrate Toolkit</a> <label for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/libraries/ >Libraries</a> <label for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/libraries/polkadot-js-api/ class=md-nav__link> Polkadot.js API </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/libraries/py-substrate-interface/ class=md-nav__link> Py Substrate Interface </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/libraries/sidecar/ class=md-nav__link> Sidecar </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/dev-env/ >Dev Environments</a> <label for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-dev-env-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/dev-env/chopsticks/ class=md-nav__link> Chopsticks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/ >Low-Level Interfaces</a> <label for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/account/ >Account Management</a> <label for=__nav_2_4_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-account-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/account/identity/ class=md-nav__link> Identity </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/account/multisig/ class=md-nav__link> Multisig </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/account/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/features/ >Network Features</a> <label for=__nav_2_4_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/features/governance/ >Governance</a> <label for=__nav_2_4_4_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_4_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-features-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/governance/conviction-voting/ class=md-nav__link> Conviction Voting </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/governance/parameters/ class=md-nav__link> Parameters </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/governance/preimage/ class=md-nav__link> Preimage </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/governance/referenda/ class=md-nav__link> Referenda </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/staking/ class=md-nav__link> Parachain Staking </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/randomness/ class=md-nav__link> Randomness </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/interoperability/ >Interoperability</a> <label for=__nav_2_4_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-interoperability-" data-md-scrollfix> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/xcm-pallet/ class=md-nav__link> Polkadot XCM </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/ class=md-nav__link> XCM Transactor </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/utility/ >Utility</a> <label for=__nav_2_4_4_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-utility-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/utility/utility/ class=md-nav__link> Utility </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/ >Interoperability</a> <label for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/ >XCM Interoperability</a> <label for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/core-concepts/ >Core Concepts</a> <label for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-core-concepts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/core-concepts/instructions/ class=md-nav__link> XCM Instructions </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/core-concepts/multilocations/ class=md-nav__link> Multilocations </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/core-concepts/weights-fees/ class=md-nav__link> Weights and Fees </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/core-concepts/sovereign-accounts/ class=md-nav__link> Sovereign Accounts </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/xc-registration/ >XC Registration</a> <label for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc-registration-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc-registration/forum-templates/ class=md-nav__link> Forum Templates </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc-registration/xc-integration/ class=md-nav__link> XC Channel Registration </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc-registration/assets/ class=md-nav__link> XC Asset Registration via Governance </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc-registration/self-serve-asset-registration/ class=md-nav__link> Self-Serve Asset Registration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/xc20/ >XC-20s</a> <label for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/interact/ class=md-nav__link> Interact with XC-20s </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/ >Send XC-20s</a> <label for=__nav_2_5_2_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_2_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-send-xc20s-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/xcm-pallet/ class=md-nav__link> Using the Substrate API: Polkadot XCM Pallet </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/ class=md-nav__link> Using the Ethereum API: X-Tokens Precompile </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/eth-api/ class=md-nav__link> Using the Ethereum API: XCM Precompile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/remote-execution/ >Remote Execution</a> <label for=__nav_2_5_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/computed-origins/ class=md-nav__link> Computed Origin Accounts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/remote-execution/substrate-calls/ >Remote Substrate Calls</a> <label for=__nav_2_5_2_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_2_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-substrate-calls-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/ class=md-nav__link> Using the Substrate API </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/ class=md-nav__link> Using the Ethereum API </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/remote-evm-calls/ class=md-nav__link> Remote EVM Calls </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://moonbeam-foundation.github.io/xcm-sdk/latest/ class=md-nav__link> XCM SDK </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/send-execute-xcm/ class=md-nav__link> Send, Execute, & Test XCMs </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xcm-utils/ class=md-nav__link> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/protocols/ >Cross-Chain Protocols</a> <label for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-protocols-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/axelar/ class=md-nav__link> Axelar </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/hyperlane/ class=md-nav__link> Hyperlane </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/layerzero/ class=md-nav__link> LayerZero </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/wormhole/ class=md-nav__link> Wormhole </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/mrl/ class=md-nav__link> Moonbeam Routed Liquidity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/ >Integrate</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/analytics/ >Analytics</a> <label for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-analytics-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/analytics/dapplooker/ class=md-nav__link> Dapplooker </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/analytics/zapper/ class=md-nav__link> Portfolio Tracking on Moonbeam </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/indexers/ >Indexers</a> <label for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-indexers-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/thegraph/ class=md-nav__link> The Graph </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/covalent/ class=md-nav__link> GoldRush API </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/moralis/ class=md-nav__link> Moralis </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/subquery/ class=md-nav__link> SubQuery </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/subsquid/ class=md-nav__link> SQD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/oracles/ >Oracles</a> <label for=__nav_2_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-oracles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/api3/ class=md-nav__link> API3 </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/band-protocol/ class=md-nav__link> Band Protocol </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/dia/ class=md-nav__link> DIA </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/razor-network/ class=md-nav__link> Razor Network </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/supra/ class=md-nav__link> Supra </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/wallets/ >Wallets</a> <label for=__nav_2_6_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-wallets-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/walletconnect/ class=md-nav__link> WalletConnect </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/particle-network/ class=md-nav__link> Particle Network </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/rainbowkit/ class=md-nav__link> RainbowKit </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/ >Node Operators</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/networks/ >Networks</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/networks/run-a-node/ >Run a Node</a> <label for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-run-a-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/systemd/ class=md-nav__link> Using Systemd </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/flags/ class=md-nav__link> Flags </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/tracing-node/ class=md-nav__link> Run a Tracing Node </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/networks/collators/ >Collators</a> <label for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-collators-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/requirements/ class=md-nav__link> Requirements </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/account-management/ class=md-nav__link> Account Management </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/author-mapping/ class=md-nav__link> Author Mapping Precompile </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/activities/ class=md-nav__link> Collator Activities </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/orbiter/ class=md-nav__link> Orbiter Program </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/ >Tokens</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/connect/ >Connect to Moonbeam</a> <label for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-connect-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/connect/ledger/ >Ledger</a> <label for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-connect-ledger-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/connect/ledger/moonbeam/ class=md-nav__link> Moonbeam App </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/ledger/moonriver/ class=md-nav__link> Moonriver App </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/ledger/ethereum/ class=md-nav__link> Ethereum App </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../tokens/connect/coinbase-wallet/ class=md-nav__link> Coinbase Wallet </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/mathwallet/ class=md-nav__link> MathWallet </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/polkadotjs/ class=md-nav__link> Polkadot.js Apps </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/subwallet/ class=md-nav__link> SubWallet </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/talisman/ class=md-nav__link> Talisman </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/trezor/ class=md-nav__link> Trezor </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/on-ramps/ class=md-nav__link> On Ramps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/manage/ >Account Management</a> <label for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-manage-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/manage/proxy-accounts/ class=md-nav__link> Proxy Accounts </a> </li> <li class=md-nav__item> <a href=../../../tokens/manage/multisig-safe/ class=md-nav__link> Moonbeam Safe </a> </li> <li class=md-nav__item> <a href=../../../tokens/manage/identity/ class=md-nav__link> Managing an Identity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/staking/ >Staking</a> <label for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-staking-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/staking/stake/ class=md-nav__link> How to Stake </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/governance/ >Governance</a> <label for=__nav_4_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/governance/proposals/ class=md-nav__link> Submit a Democracy Proposal </a> </li> <li class=md-nav__item> <a href=../../../tokens/governance/voting/ class=md-nav__link> Vote on a Proposal </a> </li> <li class=md-nav__item> <a href=../../../tokens/governance/treasury-spend/ class=md-nav__link> Submit a Treasury Proposal </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/ >Learn</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/platform/ >Platform</a> <label for=__nav_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-platform-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/platform/networks/ >Networks</a> <label for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-platform-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../learn/platform/networks/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/networks/moonbase/ class=md-nav__link> Moonbase Alpha </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/networks/moonriver/ class=md-nav__link> Moonriver </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/networks/moonbeam/ class=md-nav__link> Moonbeam </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../learn/platform/vision/ class=md-nav__link> Vision </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/why-polkadot/ class=md-nav__link> Why Polkadot </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/technology/ class=md-nav__link> Technology & Architecture </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/tokens/ class=md-nav__link> Tokens </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/code/ class=md-nav__link> Source Code </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/links/ class=md-nav__link> Important Links </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/glossary/ class=md-nav__link> Glossary </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/core-concepts/ >Core Concepts</a> <label for=__nav_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-core-concepts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../learn/core-concepts/balances/ class=md-nav__link> Account Balances </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/transfers-api/ class=md-nav__link> Balance Transfers </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/consensus-finality/ class=md-nav__link> Consensus & Finality </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/tx-fees/ class=md-nav__link> Transaction Fees </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/unified-accounts/ class=md-nav__link> Unified Accounts </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/security/ class=md-nav__link> Security Considerations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/features/ >Features</a> <label for=__nav_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-features-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../learn/features/xchain-plans/ class=md-nav__link> Cross-Chain Communication </a> </li> <li class=md-nav__item> <a href=../../../learn/features/eth-compatibility/ class=md-nav__link> Ethereum Compatibility </a> </li> <li class=md-nav__item> <a href=../../../learn/features/governance/ class=md-nav__link> Governance </a> </li> <li class=md-nav__item> <a href=../../../learn/features/consensus/ class=md-nav__link> Parachain Consensus </a> </li> <li class=md-nav__item> <a href=../../../learn/features/randomness/ class=md-nav__link> Randomness </a> </li> <li class=md-nav__item> <a href=../../../learn/features/staking/ class=md-nav__link> Staking </a> </li> <li class=md-nav__item> <a href=../../../learn/features/treasury/ class=md-nav__link> Treasury </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../learn/dapp-directory/ class=md-nav__link> DApp Directory </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Tutorials</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <div class="md-nav__link md-nav__link--index "> <a href=../../interoperability/ >Interoperability</a> <label for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../interoperability/protocols.index/ >Create Connected Contracts with Cross-Chain Protocols</a> <label for=__nav_6_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-protocols.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../interoperability/cross-chain-dao/ class=md-nav__link> [LayerZero] Creating a Cross-Chain DAO </a> </li> <li class=md-nav__item> <a href=../../interoperability/using-axelar-sdk/ class=md-nav__link> [Axelar] Minting a Cross-Chain NFT </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../interoperability/xcm.index/ >Build Cross-Chain Applications with XCM</a> <label for=__nav_6_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-xcm.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../interoperability/remote-staking-xcm/ class=md-nav__link> [Polkadot's XCM Pallet] Remote Staking on Moonbeam from Polkadot </a> </li> <li class=md-nav__item> <a href=../../interoperability/uniswapv2-swap-xcm/ class=md-nav__link> [Polkadot's XCM Pallet] Uniswap V2 Swap on Moonbeam from Polkadot </a> </li> <li class=md-nav__item> <a href=../../interoperability/remote-batched-evm-calls/ class=md-nav__link> [Polkadot's XCM Pallet] Batched Remote EVM Calls on Moonbeam from Polkadot </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Ethereum API</a> <label for=__nav_6_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=true> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../get-started.index/ >Get Started with Smart Contracts</a> <label for=__nav_6_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-get-started.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../chat-gpt/ class=md-nav__link> [ChatGPT] Use GPT-4 to Write and Debug Smart Contracts </a> </li> <li class=md-nav__item> <a href=../how-to-build-a-dapp/ class=md-nav__link> [Ethers.js] How to Build a DApp </a> </li> <li class=md-nav__item> <a href=../foundry-start-to-end/ class=md-nav__link> [Foundry] Development Life Cycle from Start to End </a> </li> <li class=md-nav__item> <a href=../hardhat-start-to-end/ class=md-nav__link> [Hardhat] Development Life Cycle from Start to End </a> </li> <li class=md-nav__item> <a href=../using-tenderly/ class=md-nav__link> [Tenderly] Using Tenderly to Debug and Simulate Transactions </a> </li> <li class=md-nav__item> <a href=../thirdweb/ class=md-nav__link> [thirdweb] Building a DApp with thirdweb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../precompiles.index/ >Interact with Precompiles</a> <label for=__nav_6_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_6_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-precompiles.index-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> [Batch] Approve & Swap Tokens in a Single Transaction <span class="md-nav__icon md-icon"></span> </label> <div class="md-nav__link-wrapper md-nav__item md-nav__item--active"> <a href=./ class="md-nav__link md-nav__link--active"> [Batch] Approve & Swap Tokens in a Single Transaction </a> </div> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label=Sections> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <div class=toc-sections-title>Sections</div> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#checking-prerequisites class=md-nav__link> <span class=md-ellipsis> Checking Prerequisites </span> </a> <nav class=md-nav aria-label="Checking Prerequisites"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-dependencies class=md-nav__link> <span class=md-ellipsis> Install Dependencies </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#contracts class=md-nav__link> <span class=md-ellipsis> Contract Setup </span> </a> <nav class=md-nav aria-label="Contract Setup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#compile-deploy-contracts class=md-nav__link> <span class=md-ellipsis> Compile &amp; Deploy Contracts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#swapping-tokens class=md-nav__link> <span class=md-ellipsis> Swap Tokens </span> </a> <nav class=md-nav aria-label="Swap Tokens"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-contract-instances class=md-nav__link> <span class=md-ellipsis> Create Contract Instances </span> </a> </li> <li class=md-nav__item> <a href=#add-function-to-check-balances class=md-nav__link> <span class=md-ellipsis> Add Check Balances Helper Function </span> </a> </li> <li class=md-nav__item> <a href=#add-logic-to-swap-dtoks class=md-nav__link> <span class=md-ellipsis> Approve &amp; Swap Tokens for DEV using the Batch Precompile </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#uniswap-v2-implementation class=md-nav__link> <span class=md-ellipsis> Uniswap V2 Implementation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../randomness-lottery/ class=md-nav__link> [Randomness] Create a Lottery </a> </li> <li class=md-nav__item> <a href=../call-permit-gasless-txs/ class=md-nav__link> [Call Permit] Send Gasless Transactions </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../integrations/ >Integrations</a> <label for=__nav_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../integrations/indexers.index/ >Use Indexers to Query Chain Data</a> <label for=__nav_6_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-indexers.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../integrations/local-subsquid/ class=md-nav__link> [SQD] Index a Local Dev Node </a> </li> <li class=md-nav__item> <a href=../../integrations/nft-subsquid/ class=md-nav__link> [SQD] Index NFT Transfers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../integrations/oracles.index/ >Use Oracles to Fetch Off-Chain Data</a> <label for=__nav_6_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-oracles.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../integrations/supra/ class=md-nav__link> [Supra] Fetch Price Data </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../integrations/0xgasless/ class=md-nav__link> Enable Gasless Transactions </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner><!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label=Sections> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <div class=toc-sections-title>Sections</div> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#checking-prerequisites class=md-nav__link> <span class=md-ellipsis> Checking Prerequisites </span> </a> <nav class=md-nav aria-label="Checking Prerequisites"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-dependencies class=md-nav__link> <span class=md-ellipsis> Install Dependencies </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#contracts class=md-nav__link> <span class=md-ellipsis> Contract Setup </span> </a> <nav class=md-nav aria-label="Contract Setup"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#compile-deploy-contracts class=md-nav__link> <span class=md-ellipsis> Compile &amp; Deploy Contracts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#swapping-tokens class=md-nav__link> <span class=md-ellipsis> Swap Tokens </span> </a> <nav class=md-nav aria-label="Swap Tokens"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-contract-instances class=md-nav__link> <span class=md-ellipsis> Create Contract Instances </span> </a> </li> <li class=md-nav__item> <a href=#add-function-to-check-balances class=md-nav__link> <span class=md-ellipsis> Add Check Balances Helper Function </span> </a> </li> <li class=md-nav__item> <a href=#add-logic-to-swap-dtoks class=md-nav__link> <span class=md-ellipsis> Approve &amp; Swap Tokens for DEV using the Batch Precompile </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#uniswap-v2-implementation class=md-nav__link> <span class=md-ellipsis> Uniswap V2 Implementation </span> </a> </li> </ul> </nav> </div><div class=feedback-actions-container><div class=feedback-section> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73zM1 21h4V9H1z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+Approve%20%26%20Swap%20with%20the%20Batch%20Precompile+-+/tutorials/eth-api/batch-approve-swap/" target=_blank rel=noopener>additional feedback</a>. </div> </div> </div> </fieldset> <div class=divider></div></form> </div><div class=edit-section> <a href=https://github.com/moonbeam-foundation/moonbeam-docs/edit/master/tutorials/eth-api/batch-approve-swap.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> Edit this page </a> </div> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=use-the-batch-precompile-to-approve-and-swap-tokens-in-a-single-transaction>Use the Batch Precompile to Approve and Swap Tokens in a Single Transaction<a class=headerlink href=#use-the-batch-precompile-to-approve-and-swap-tokens-in-a-single-transaction title="Permanent link">&para;</a></h1> <p><em>by Erin Shaben</em></p> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>Token approvals are critical for interacting with smart contracts securely, preventing smart contracts without permission from accessing a user's tokens. When a smart contract is given approval to access a user's tokens, the amount of tokens it has access to is often an unlimited amount, depending on the DApp.</p> <p>One of the reasons why many DApps use an unlimited amount is so that users don't need to continue to sign approval transactions every time they want to move their tokens. This is in addition to the second transaction required to actually swap the tokens. For networks like Ethereum, this can be expensive. However, if the approved smart contract has a vulnerability, it could be exploited and the users' tokens could be transferred at any time without requiring further approval. In addition, if a user no longer wants the DApp's contract to have access to their tokens, they have to revoke the token approval, which requires another transaction to be sent.</p> <p>As a DApp developer on Moonbeam, you can avoid this process entirely, providing users with more control over their assets. This can be done using the <a href=/moonbeam-mkdocs/builders/ethereum/precompiles/ux/batch/ target=_blank>batch precompile</a> to batch an approval and swap into a single transaction, instead of the typical two transaction process. This allows for the approval amount to be the exact swap amount instead of having unlimited access to your users' tokens.</p> <p>In this tutorial, we'll dive into the process of batching an approval and swap into one transaction using the <code>batchAll</code> function of the batch precompile contract. We'll create and deploy an ERC-20 contract and a simple DEX contract for the swap on the <a href=/moonbeam-mkdocs/builders/get-started/networks/moonbase/ target=_blank>Moonbase Alpha TestNet</a> using <a href=/moonbeam-mkdocs/builders/ethereum/dev-env/hardhat/ target=_blank>Hardhat</a> and <a href=/moonbeam-mkdocs/builders/ethereum/libraries/ethersjs/ target=_blank>Ethers</a>.</p> <h2 id=checking-prerequisites>Checking Prerequisites<a class=headerlink href=#checking-prerequisites title="Permanent link">&para;</a></h2> <p>For this tutorial, you'll need the following:</p> <ul> <li>An account with funds. You can get DEV tokens for testing on Moonbase Alpha once every 24 hours from the <a href=https://faucet.moonbeam.network target=_blank>Moonbase Alpha Faucet</a></li> <li>An empty Hardhat project that is configured for the Moonbase Alpha TestNet. For step-by-step instructions, please refer to the <a href=/moonbeam-mkdocs/builders/ethereum/dev-env/hardhat/#creating-a-hardhat-project target=_blank>Creating a Hardhat Project</a> and the <a href=/moonbeam-mkdocs/builders/ethereum/dev-env/hardhat/#hardhat-configuration-file target=_blank>Hardhat Configuration File</a> sections of our Hardhat documentation page</li> <li>To test out the examples in this guide on Moonbeam or Moonriver, you will need to have your own endpoint and API key, which you can get from one of the supported <a href=/moonbeam-mkdocs/builders/get-started/endpoints/ target=_blank>Endpoint Providers</a></li> </ul> <h3 id=install-dependencies>Install Dependencies<a class=headerlink href=#install-dependencies title="Permanent link">&para;</a></h3> <p>Once you have your <a href=/moonbeam-mkdocs/builders/ethereum/dev-env/hardhat/ target=_blank>Hardhat project</a>, you can install the <a href=https://hardhat.org/hardhat-runner/plugins/nomicfoundation-hardhat-ethers target=_blank>Ethers plugin</a>. This provides a convenient way to use the <a href=/moonbeam-mkdocs/builders/ethereum/libraries/ethersjs/ target=_blank>Ethers.js</a> library to interact with the network.</p> <p>You can also install the <a href=https://docs.openzeppelin.com/contracts target=_blank>OpenZeppelin contracts library</a>, as we'll be importing the <code>ERC20.sol</code> contract and <code>IERC20.sol</code> interface in our contracts.</p> <p>To install the necessary dependencies, run the following command:</p> <div class=highlight><pre><span></span><code>npm<span class=w> </span>install<span class=w> </span>@nomicfoundation/hardhat-ethers<span class=w> </span>ethers@6<span class=w> </span>@openzeppelin/contracts
</code></pre></div> <h2 id=contracts>Contract Setup<a class=headerlink href=#contracts title="Permanent link">&para;</a></h2> <p>The following are the contracts that we'll be working with today:</p> <ul> <li> <p><code>Batch.sol</code> - one of the precompile contracts on Moonbeam that allows you to combine multiple EVM calls into one. For more information on the available methods, please refer to the <a href=/moonbeam-mkdocs/builders/ethereum/precompiles/ux/batch/#the-batch-interface target=_blank>Batch Solidity Interface</a> documentation</p> </li> <li> <p><code>DemoToken.sol</code> - an ERC-20 contract for the <code>DemoToken</code> (DTOK) token, which on deployment mints an initial supply and assigns them to the contract owner. It's a standard ERC-20 token, you can review the <a href=https://docs.openzeppelin.com/contracts/2.x/api/token/erc20#IERC20 target=_blank>IERC20 interface</a> for more information on the available methods</p> </li> <li> <p><code>SimpleDex.sol</code> - a simple example of a DEX that on deployment deploys the <code>DemoToken</code> contract, which mints 1000 DTOKs, and allows you to swap DEV token for DTOKs and vice versa. <strong>This contract is for demo purposes only</strong>. The <code>SimpleDex</code> contract contains the following methods:</p> <ul> <li><strong>token</strong>() - a read-only method that returns the address of the <code>DemoToken</code> contract</li> <li><strong>swapDevForDemoToken</strong>() - a payable function that accepts DEV tokens in exchange for DTOK tokens. The function checks to make sure there are enough DTOK tokens held in the contract before making the transfer. After the transfer is made, a <code>Bought</code> event is emitted</li> <li><strong>swapDemoTokenForDev</strong>(<em>uint256</em> amount) - accepts the amount of DTOKs to swap for DEV tokens. The function checks to make sure the caller of the function has approved the contract to transfer their DTOKs before swapping the DTOKs back to DEV. After the transfer is made, a <code>Sold</code> event is emitted</li> </ul> </li> </ul> <p>If you don't already have a <code>contracts</code> directory in your Hardhat project, you can create a new directory:</p> <div class=highlight><pre><span></span><code>mkdir<span class=w> </span>contracts<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nb>cd</span><span class=w> </span>contracts
</code></pre></div> <p>Then, you can create a single file that we'll use to store the code for the <code>DemoToken</code> and <code>SimpleDex</code> contracts and another file for the batch precompile:</p> <div class=highlight><pre><span></span><code>touch<span class=w> </span>SimpleDex.sol<span class=w> </span>Batch.sol
</code></pre></div> <p>In the <code>SimpleDex.sol</code> file, you can paste in the following code for the <code>DemoToken</code> and <code>SimpleDex</code> contracts:</p> <div class=highlight><pre><span></span><code><span class=c1>// SPDX-License-Identifier: MIT</span>
<span class=k>pragma solidity</span><span class=w> </span><span class=o>^</span><span class=k>0.8.20</span><span class=p>;</span>

<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;</span><span class=p>;</span>

<span class=k>contract</span><span class=w> </span><span class=ni>DemoToken</span><span class=w> </span><span class=kt>is</span><span class=w> </span>ERC20<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>initialSupply</span><span class=p>)</span><span class=w> </span>ERC20<span class=p>(</span><span class=s2>&quot;DemoToken&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;DTOK&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Assign 500 DTOK tokens to the SimpleDex contract</span>
<span class=w>        </span>_mint<span class=p>(</span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span>initialSupply<span class=w> </span><span class=o>/</span><span class=w> </span><span class="m m-Decimal">2</span><span class=p>);</span>
<span class=w>        </span><span class=c1>// Assign 500 DTOK tokens to the EOA that deployed the SimpleDex contract</span>
<span class=w>        </span>_mint<span class=p>(</span><span class=k>tx.origin</span><span class=p>,</span><span class=w> </span>initialSupply<span class=w> </span><span class=o>/</span><span class=w> </span><span class="m m-Decimal">2</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>

<span class=k>contract</span><span class=w> </span><span class=ni>SimpleDex</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span>IERC20<span class=w> </span><span class=kt>public</span><span class=w> </span>token<span class=p>;</span>

<span class=w>    </span><span class=kt>event</span><span class=w> </span><span class=nv>Bought</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>amount</span><span class=p>);</span>
<span class=w>    </span><span class=kt>event</span><span class=w> </span><span class=nv>Sold</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>amount</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Make constructor payable so that DEV liquidity exists for the contract</span>
<span class=w>    </span><span class=kt>constructor</span><span class=p>()</span><span class=w> </span><span class=kt>payable</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Mint 1000 DTOK tokens. Half will be assigned to the SimpleDex contract </span>
<span class=w>        </span><span class=c1>// and the other half will be assigned to the EOA that deployed the</span>
<span class=w>        </span><span class=c1>// SimpleDex contract</span>
<span class=w>        </span>token<span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>new</span><span class=w> </span>DemoToken<span class=p>(</span><span class="m m-Decimal">1000000000000000000000</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Function to swap DEV for DTOK tokens</span>
<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>swapDevForDemoToken</span><span class=p>()</span><span class=w> </span><span class=kt>payable</span><span class=w> </span><span class=kt>public</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Verify the contract has enough tokens for the requested amount</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>amountTobuy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>msg.value</span><span class=p>;</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>dexBalance</span><span class=w> </span><span class=o>=</span><span class=w> </span>token<span class=p>.</span>balanceOf<span class=p>(</span><span class=kt>address</span><span class=p>(</span><span class=kt>this</span><span class=p>));</span>
<span class=w>        </span><span class=kt>require</span><span class=p>(</span>amountTobuy<span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;You need to send some DEV&quot;</span><span class=p>);</span>
<span class=w>        </span><span class=kt>require</span><span class=p>(</span>amountTobuy<span class=w> </span><span class=o>&lt;=</span><span class=w> </span>dexBalance<span class=p>,</span><span class=w> </span><span class=s2>&quot;Not enough tokens in the reserve&quot;</span><span class=p>);</span>
<span class=w>        </span><span class=c1>// If enough, swap the DEV to DTOKs</span>
<span class=w>        </span>token<span class=p>.</span>transfer<span class=p>(</span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span>amountTobuy<span class=p>);</span>
<span class=w>        </span>emit<span class=w> </span>Bought<span class=p>(</span>amountTobuy<span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Function to swap DTOK for DEV tokens</span>
<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>swapDemoTokenForDev</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>amount</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Make sure the requested amount is greater than 0 and the caller</span>
<span class=w>        </span><span class=c1>// has approved the requested amount of tokens to be transferred</span>
<span class=w>        </span><span class=kt>require</span><span class=p>(</span>amount<span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;You need to sell at least some tokens&quot;</span><span class=p>);</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>allowance</span><span class=w> </span><span class=o>=</span><span class=w> </span>token<span class=p>.</span>allowance<span class=p>(</span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=p>(</span><span class=kt>this</span><span class=p>));</span>
<span class=w>        </span><span class=kt>require</span><span class=p>(</span>allowance<span class=w> </span><span class=o>&gt;=</span><span class=w> </span>amount<span class=p>,</span><span class=w> </span><span class=s2>&quot;Check the token allowance&quot;</span><span class=p>);</span>
<span class=w>        </span><span class=c1>// Transfer the DTOKs to the contract</span>
<span class=w>        </span>token<span class=p>.</span>transferFrom<span class=p>(</span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=p>(</span><span class=kt>this</span><span class=p>),</span><span class=w> </span>amount<span class=p>);</span>
<span class=w>        </span><span class=c1>// Transfer the DEV tokens back to the caller</span>
<span class=w>        </span><span class=kt>payable</span><span class=p>(</span><span class=k>msg.sender</span><span class=p>).</span>transfer<span class=p>(</span>amount<span class=p>);</span>
<span class=w>        </span>emit<span class=w> </span>Sold<span class=p>(</span>amount<span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>In the <code>Batch.sol</code> file, you can paste in the Batch Precompile contract.</p> <details class=code> <summary>Batch.sol</summary> <div class=highlight><pre><span></span><code><span class=c1>// SPDX-License-Identifier: GPL-3.0-only</span>
<span class=k>pragma solidity</span><span class=w> </span><span class=o>&gt;=</span><span class=k>0.8.3</span><span class=p>;</span>

<span class=c1>/// @dev The Batch contract&#39;s address.</span>
<span class=kt>address</span><span class=w> </span><span class=nv>constant</span><span class=w> </span>BATCH_ADDRESS<span class=w> </span><span class=o>=</span><span class=w> </span><span class=mh>0x0000000000000000000000000000000000000808</span><span class=p>;</span>

<span class=c1>/// @dev The Batch contract&#39;s instance.</span>
Batch<span class=w> </span><span class=kt>constant</span><span class=w> </span>BATCH_CONTRACT<span class=w> </span><span class=o>=</span><span class=w> </span>Batch<span class=p>(</span>BATCH_ADDRESS<span class=p>);</span>

<span class=c1>/// @author The Moonbeam Team</span>
<span class=c1>/// @title Batch precompile</span>
<span class=c1>/// @dev Allows to perform multiple calls through one call to the precompile.</span>
<span class=c1>/// Can be used by EOA to do multiple calls in a single transaction.</span>
<span class=c1>/// @custom:address 0x0000000000000000000000000000000000000808</span>
interface<span class=w> </span>Batch<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>/// @dev Batch multiple calls into a single transaction.</span>
<span class=w>    </span><span class=c1>/// All calls are performed from the address calling this precompile.</span>
<span class=w>    </span><span class=c1>///</span>
<span class=w>    </span><span class=c1>/// In case of one subcall reverting following subcalls will still be attempted.</span>
<span class=w>    </span><span class=c1>///</span>
<span class=w>    </span><span class=c1>/// @param to List of addresses to call.</span>
<span class=w>    </span><span class=c1>/// @param value List of values for each subcall. If array is shorter than &quot;to&quot; then additional</span>
<span class=w>    </span><span class=c1>/// calls will be performed with a value of 0.</span>
<span class=w>    </span><span class=c1>/// @param callData Call data for each `to` address. If array is shorter than &quot;to&quot; then</span>
<span class=w>    </span><span class=c1>/// additional calls will be performed with an empty call data.</span>
<span class=w>    </span><span class=c1>/// @param gasLimit Gas limit for each `to` address. Use 0 to forward all the remaining gas.</span>
<span class=w>    </span><span class=c1>/// If array is shorter than &quot;to&quot; then the remaining gas available will be used.</span>
<span class=w>    </span><span class=c1>/// @custom:selector 79df4b9c</span>
<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>batchSome</span><span class=p>(</span>
<span class=w>        </span><span class=kt>address</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>to<span class=p>,</span>
<span class=w>        </span><span class=kt>uint256</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>value<span class=p>,</span>
<span class=w>        </span><span class=kt>bytes</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>callData<span class=p>,</span>
<span class=w>        </span><span class=kt>uint64</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>gasLimit
<span class=w>    </span><span class=p>)</span><span class=w> </span><span class=kt>external</span><span class=p>;</span>

<span class=w>    </span><span class=c1>/// @dev Batch multiple calls into a single transaction.</span>
<span class=w>    </span><span class=c1>/// All calls are performed from the address calling this precompile.</span>
<span class=w>    </span><span class=c1>///</span>
<span class=w>    </span><span class=c1>/// In case of one subcall reverting, no more subcalls will be executed but</span>
<span class=w>    </span><span class=c1>/// the batch transaction will succeed. Use batchAll to revert on any subcall revert.</span>
<span class=w>    </span><span class=c1>///</span>
<span class=w>    </span><span class=c1>/// @param to List of addresses to call.</span>
<span class=w>    </span><span class=c1>/// @param value List of values for each subcall. If array is shorter than &quot;to&quot; then additional</span>
<span class=w>    </span><span class=c1>/// calls will be performed with a value of 0.</span>
<span class=w>    </span><span class=c1>/// @param callData Call data for each `to` address. If array is shorter than &quot;to&quot; then</span>
<span class=w>    </span><span class=c1>/// additional calls will be performed with an empty call data.</span>
<span class=w>    </span><span class=c1>/// @param gasLimit Gas limit for each `to` address. Use 0 to forward all the remaining gas.</span>
<span class=w>    </span><span class=c1>/// If array is shorter than &quot;to&quot; then the remaining gas available will be used.</span>
<span class=w>    </span><span class=c1>/// @custom:selector cf0491c7</span>
<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>batchSomeUntilFailure</span><span class=p>(</span>
<span class=w>        </span><span class=kt>address</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>to<span class=p>,</span>
<span class=w>        </span><span class=kt>uint256</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>value<span class=p>,</span>
<span class=w>        </span><span class=kt>bytes</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>callData<span class=p>,</span>
<span class=w>        </span><span class=kt>uint64</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>gasLimit
<span class=w>    </span><span class=p>)</span><span class=w> </span><span class=kt>external</span><span class=p>;</span>

<span class=w>    </span><span class=c1>/// @dev Batch multiple calls into a single transaction.</span>
<span class=w>    </span><span class=c1>/// All calls are performed from the address calling this precompile.</span>
<span class=w>    </span><span class=c1>///</span>
<span class=w>    </span><span class=c1>/// In case of one subcall reverting, the entire batch will revert.</span>
<span class=w>    </span><span class=c1>///</span>
<span class=w>    </span><span class=c1>/// @param to List of addresses to call.</span>
<span class=w>    </span><span class=c1>/// @param value List of values for each subcall. If array is shorter than &quot;to&quot; then additional</span>
<span class=w>    </span><span class=c1>/// calls will be performed with a value of 0.</span>
<span class=w>    </span><span class=c1>/// @param callData Call data for each `to` address. If array is shorter than &quot;to&quot; then</span>
<span class=w>    </span><span class=c1>/// additional calls will be performed with an empty call data.</span>
<span class=w>    </span><span class=c1>/// @param gasLimit Gas limit for each `to` address. Use 0 to forward all the remaining gas.</span>
<span class=w>    </span><span class=c1>/// If array is shorter than &quot;to&quot; then the remaining gas available will be used.</span>
<span class=w>    </span><span class=c1>/// @custom:selector 96e292b8</span>
<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>batchAll</span><span class=p>(</span>
<span class=w>        </span><span class=kt>address</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>to<span class=p>,</span>
<span class=w>        </span><span class=kt>uint256</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>value<span class=p>,</span>
<span class=w>        </span><span class=kt>bytes</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>callData<span class=p>,</span>
<span class=w>        </span><span class=kt>uint64</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>gasLimit
<span class=w>    </span><span class=p>)</span><span class=w> </span><span class=kt>external</span><span class=p>;</span>

<span class=w>    </span><span class=c1>/// Emitted when a subcall succeeds.</span>
<span class=w>    </span><span class=kt>event</span><span class=w> </span><span class=nv>SubcallSucceeded</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>index</span><span class=p>);</span>

<span class=w>    </span><span class=c1>/// Emitted when a subcall fails.</span>
<span class=w>    </span><span class=kt>event</span><span class=w> </span><span class=nv>SubcallFailed</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>index</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> </details> <h3 id=compile-deploy-contracts>Compile &amp; Deploy Contracts<a class=headerlink href=#compile-deploy-contracts title="Permanent link">&para;</a></h3> <p>To compile the contracts, we'll go ahead and run the following Hardhat command:</p> <div class=highlight><pre><span></span><code>npx<span class=w> </span>hardhat<span class=w> </span>compile
</code></pre></div> <div id=termynal data-termynal> <span data-ty=input><span class=file-path></span>npx hardhat compile</span> <span data-ty>Compiled 6 Solidity files successfully (evm target: paris).</span> <span data-ty=input><span class=file-path></span></span> </div> <p>After compilation, an <code>artifacts</code> directory is created: it holds the bytecode and metadata of the contract, which are <code>.json</code> files. It’s a good idea to add this directory to the <code>.gitignore</code> file.</p> <p>Next, we can deploy the <code>SimpleDex</code> contract, which upon deployment will automatically deploy the <code>DemoToken</code> contract and mint 1000 DTOKs and assign half of them to the <code>SimpleDex</code> contract and the other half to the address that you're initiating the deployment from.</p> <p>We'll also add some initial liquidity to the contract by passing in a <code>value</code> when calling <code>deploy</code>. Since the value needs to be in Wei, we can use <code>ethers.parseEther</code> to pass in a value such as <code>"0.5"</code> DEV and it will convert the value to Wei for us.</p> <p>Before deploying the contract, we'll need to create the deployment script. We'll create a new directory for the script and name it <code>scripts</code> and add a new file to it called <code>deploy.js</code>:</p> <div class=highlight><pre><span></span><code>mkdir<span class=w> </span>scripts<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>touch<span class=w> </span>scripts/deploy.js
</code></pre></div> <p>In the <code>deploy.js</code> script, you can paste in the following code, which will deploy the <code>SimpleDex</code> contract and print the address of the contract to the terminal upon successful deployment:</p> <div class=highlight><pre><span></span><code><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Liquidity to add in DEV (i.e., &#39;.5&#39;) to be converted to Wei</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>parseEther</span><span class=p>(</span><span class=s1>&#39;INSERT_AMOUNT_OF_DEV&#39;</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Deploy the SimpleDex contract, which will also automatically deploy</span>
<span class=w>  </span><span class=c1>// the DemoToken contract and add liquidity to the contract</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>SimpleDex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractFactory</span><span class=p>(</span><span class=s1>&#39;SimpleDex&#39;</span><span class=p>,);</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>simpleDex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>SimpleDex</span><span class=p>.</span><span class=nx>deploy</span><span class=p>({</span><span class=w> </span><span class=nx>value</span><span class=w> </span><span class=p>})</span>

<span class=w>  </span><span class=c1>// Wait for the deployment transaction to be included in a block</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>simpleDex</span><span class=p>.</span><span class=nx>waitForDeployment</span><span class=p>();</span>

<span class=w>   </span><span class=c1>// Get and print the contract address</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>myContractDeployedAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>simpleDex</span><span class=p>.</span><span class=nx>getAddress</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`SimpleDex deployed to </span><span class=si>${</span><span class=nx>myContractDeployedAddress</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=p>}</span>

<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exitCode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1</span><span class=p>;</span>
<span class=p>});</span>
</code></pre></div> <p>Now we can deploy the <code>SimpleDex</code> contract using the <code>run</code> command and specifying <code>moonbase</code> as the network:</p> <div class=highlight><pre><span></span><code>npx<span class=w> </span>hardhat<span class=w> </span>run<span class=w> </span>--network<span class=w> </span>moonbase<span class=w> </span>scripts/deploy.js
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you want to run the script in a standalone fashion using <code>node &lt;script&gt;</code>, you'll need to require the Hardhat Runtime Environment explicitly using <code>const hre = require('hardhat');</code> in the <code>deploy.js</code> file.</p> </div> <div id=termynal data-termynal> <span data-ty=input><span class=file-path></span>npx hardhat run --network moonbase scripts/deploy.js</span> <span data-ty>SimpleDex deployed to 0xA467EB6C80D4Dae4c45C5d31Ead341c34cdD1b5e</span> <span data-ty=input><span class=file-path></span></span> </div> <p>After a few seconds, the contract will be deployed, and you should see the address in the terminal. We'll need to use the address in the following sections to interact with the contract, so make sure you save it.</p> <h2 id=swapping-tokens>Swap Tokens<a class=headerlink href=#swapping-tokens title="Permanent link">&para;</a></h2> <p>With the contract deployed, now we can create a script that will enable us to get started by swapping DEV tokens for DTOK tokens. Once we have the DTOKs, we can get into the approval and swap. We'll take a quick look at how the approval and swap work normally before diving into using the batch precompile to batch these transactions.</p> <p>For simplicity, we'll create a single script to handle all of the logic needed to swap DEV to DTOKs and back, called <code>swap.js</code>. We'll add this file to the <code>scripts</code> directory:</p> <div class=highlight><pre><span></span><code>touch<span class=w> </span>scripts/swap.js
</code></pre></div> <h3 id=create-contract-instances>Create Contract Instances<a class=headerlink href=#create-contract-instances title="Permanent link">&para;</a></h3> <p>We'll need to create contract instances for each of our contracts so that we can access each contract's functions. For this, we're going to use the <code>getContractAt</code> helper function of the Hardhat plugin.</p> <p>For this step, we're going to need the contract address of the <code>SimpleDex</code> contract. Then we'll be able to use the <code>SimpleDex</code> contract instance to retrieve the <code>DemoToken</code> contract address through the <code>token</code> function.</p> <p>We'll also need to add a contract instance for the batch precompile, which is located at <code>0x0000000000000000000000000000000000000808</code>.</p> <p>You can add the following code to the <code>swap.js</code> file:</p> <div class=highlight><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>simpleDexAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_ADDRESS_OF_DEX&#39;</span><span class=p>;</span>

<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Create instance of SimpleDex.sol</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>simpleDex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractAt</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;SimpleDex&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>simpleDexAddress</span>
<span class=w>  </span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Create instance of DemoToken.sol</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>demoTokenAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>simpleDex</span><span class=p>.</span><span class=nx>token</span><span class=p>();</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>demoToken</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractAt</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;DemoToken&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>demoTokenAddress</span>
<span class=w>  </span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Create instance of Batch.sol</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>batchAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;0x0000000000000000000000000000000000000808&#39;</span><span class=p>;</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>batch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractAt</span><span class=p>(</span><span class=s1>&#39;Batch&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>batchAddress</span><span class=p>);</span>
<span class=p>}</span>
<span class=nx>main</span><span class=p>();</span>
</code></pre></div> <h3 id=add-function-to-check-balances>Add Check Balances Helper Function<a class=headerlink href=#add-function-to-check-balances title="Permanent link">&para;</a></h3> <p>Next, we're going to create a helper function that will be used to check the balance of DTOK tokens the DEX and the signer account has. This will be particularly useful to see balance changes after the swaps are complete.</p> <p>Since the <code>DemoToken</code> contract has an ERC-20 interface, you can check the balance of DTOKs an account has using the <code>balanceOf</code> function. So, we'll call the <code>balanceOf</code> function, passing in the address of the signer and the DEX, and then print the formatted results in DTOKs to the terminal:</p> <div class=highlight><pre><span></span><code><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>checkBalances</span><span class=p>(</span><span class=nx>demoToken</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Get the signer</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getSigners</span><span class=p>();</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signers</span><span class=p>[</span><span class=mf>0</span><span class=p>];</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signerAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signer</span><span class=p>.</span><span class=nx>address</span><span class=p>;</span>

<span class=w>  </span><span class=c1>// Get the balance of the DEX and print it</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>dexBalance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>formatEther</span><span class=p>(</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>demoToken</span><span class=p>.</span><span class=nx>balanceOf</span><span class=p>(</span><span class=nx>simpleDexAddress</span><span class=p>)</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Dex </span><span class=si>${</span><span class=nx>simpleDexAddress</span><span class=si>}</span><span class=sb> has a balance of: </span><span class=si>${</span><span class=nx>dexBalance</span><span class=si>}</span><span class=sb> DTOKs`</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Get the balance of the signer and print it</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signerBalance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>formatEther</span><span class=p>(</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>demoToken</span><span class=p>.</span><span class=nx>balanceOf</span><span class=p>(</span><span class=nx>signer</span><span class=p>)</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>    </span><span class=sb>`Account </span><span class=si>${</span><span class=nx>signerAddress</span><span class=si>}</span><span class=sb> has a balance of: </span><span class=si>${</span><span class=nx>signerBalance</span><span class=si>}</span><span class=sb> DTOKs`</span>
<span class=w>  </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <h3 id=add-logic-to-swap-dtoks>Approve &amp; Swap Tokens for DEV using the Batch Precompile<a class=headerlink href=#add-logic-to-swap-dtoks title="Permanent link">&para;</a></h3> <p>At this point, you should already have some DTOKs in your signing account, and the <code>SimpleDex</code> contract should have some DEV liquidity. If not, you can use the <code>simpleDex.swapDevForDemoToken</code> function to acquire some DTOKs and add liquidity to the DEX.</p> <p>Now, we can approve the DEX to spend some DTOK tokens on our behalf so that we can swap the DTOKs for DEVs. On Ethereum, for example, we would need to send two transactions to be able to swap the DTOKs back to DEVs: an approval and a transfer. However, on Moonbeam, thanks to the batch precompile contract, you can batch these two transactions into a single one. This allows us to set the approval amount for the exact amount of the swap.</p> <p>So instead of calling <code>demoToken.approve(spender, amount)</code> and then <code>simpleDex.swapDemoTokenForDev(amount)</code>, we'll get the encoded call data for each of these transactions and pass them into the batch precompile's <code>batchAll</code> function. To get the encoded call data, we'll use Ether's <code>interface.encodeFunctionData</code> function and pass in the necessary parameters. For example, we'll swap .2 DTOK for .2 DEV. In this case, for the approval, we can pass in the DEX address as the <code>spender</code> and set the <code>amount</code> to .2 DTOK. We'll also set the <code>amount</code> to swap as .2 DTOK. Again, we can use the <code>ethers.parseEther</code> function to convert the amount in DTOK to Wei for us.</p> <p>Once we have the encoded call data, we can use it to call the <code>batchAll</code> function of the batch precompile. This function performs multiple calls atomically, where the same index of each array combine into the information required for a single subcall. If a subcall reverts, all subcalls will revert. The following parameters are required by the <code>batchAll</code> function:</p> <ul> <li><strong><em>address[]</em> to</strong> - an array of addresses to direct subtransactions to, where each entry is a subtransaction</li> <li><strong><em>uint256[]</em> value</strong> - an array of native currency values to send in the subtransactions, where the index corresponds to the subtransaction of the same index in the <em>to</em> array. If this array is shorter than the <em>to</em> array, all the following subtransactions will default to a value of 0</li> <li><strong><em>bytes[]</em> callData</strong> - an array of call data to include in the subtransactions, where the index corresponds to the subtransaction of the same index in the <em>to</em> array. If this array is shorter than the <em>to</em> array, all of the following subtransactions will include no call data</li> <li><strong><em>uint64[]</em> gasLimit</strong> - an array of gas limits in the subtransactions, where the index corresponds to the subtransaction of the same index in the <em>to</em> array. Values of 0 are interpreted as unlimited and will have all remaining gas of the batch transaction forwarded. If this array is shorter than the <em>to</em> array, all of the following subtransactions will have all remaining gas forwarded</li> </ul> <p>So, the first index of each array will correspond to the approval and the second will correspond to the swap.</p> <p>After the swap, we'll check the balances using the <code>checkBalances</code> function to make sure the balances have changed as expected.</p> <p>We'll update the <code>main</code> function to include the following logic:</p> <div class=highlight><pre><span></span><code><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// ...</span>

<span class=w>  </span><span class=c1>// Parse the value to swap to Wei</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>amountDtok</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>parseEther</span><span class=p>(</span><span class=s1>&#39;INSERT_AMOUNT_OF_DTOK_TO_SWAP&#39;</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Get the encoded call data for the approval and swap</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>approvalCallData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>demoToken</span><span class=p>.</span><span class=kr>interface</span><span class=p>.</span><span class=nx>encodeFunctionData</span><span class=p>(</span><span class=s1>&#39;approve&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=nx>simpleDexAddress</span><span class=p>,</span>
<span class=w>    </span><span class=nx>amountDtok</span><span class=p>,</span>
<span class=w>  </span><span class=p>]);</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>swapCallData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>simpleDex</span><span class=p>.</span><span class=kr>interface</span><span class=p>.</span><span class=nx>encodeFunctionData</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;swapDemoTokenForDev&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>[</span><span class=nx>amountDtok</span><span class=p>]</span>
<span class=w>  </span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Assemble and send the batch transaction</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>batchAll</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>batch</span><span class=p>.</span><span class=nx>batchAll</span><span class=p>(</span>
<span class=w>    </span><span class=p>[</span><span class=nx>demoTokenAddress</span><span class=p>,</span><span class=w> </span><span class=nx>simpleDexAddress</span><span class=p>],</span><span class=w> </span><span class=c1>// to address</span>
<span class=w>    </span><span class=p>[],</span><span class=w> </span><span class=c1>// value of the native token to send </span>
<span class=w>    </span><span class=p>[</span><span class=nx>approvalCallData</span><span class=p>,</span><span class=w> </span><span class=nx>swapCallData</span><span class=p>],</span><span class=w> </span><span class=c1>// call data</span>
<span class=w>    </span><span class=p>[]</span><span class=w> </span><span class=c1>// gas limit</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>batchAll</span><span class=p>.</span><span class=nx>wait</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Approve and swap DTOK tokens for DEV tokens: </span><span class=si>${</span><span class=nx>batchAll</span><span class=p>.</span><span class=nx>hash</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Check balances after the swap</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>checkBalances</span><span class=p>(</span><span class=nx>demoToken</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <p>So, if you set the amount to swap to be .2 DTOK, the DEX balance will increase by .2 DTOK, and the signing account's balance will decrease by .2 DTOK. The transaction hash for the swap will also be printed to the terminal, so you can use <a href=https://moonbase.moonscan.io target=_blank>Moonscan</a> to view more information on the transaction.</p> <details class=code> <summary>View the complete script</summary> <div class=highlight><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>simpleDexAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_ADDRESS_OF_DEX&#39;</span><span class=p>;</span>

<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>checkBalances</span><span class=p>(</span><span class=nx>demoToken</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Get the signer</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getSigners</span><span class=p>();</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signers</span><span class=p>[</span><span class=mf>0</span><span class=p>];</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signerAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>signer</span><span class=p>.</span><span class=nx>address</span><span class=p>;</span>

<span class=w>  </span><span class=c1>// Get the balance of the DEX and print it</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>dexBalance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>formatEther</span><span class=p>(</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>demoToken</span><span class=p>.</span><span class=nx>balanceOf</span><span class=p>(</span><span class=nx>simpleDexAddress</span><span class=p>)</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Dex </span><span class=si>${</span><span class=nx>simpleDexAddress</span><span class=si>}</span><span class=sb> has a balance of: </span><span class=si>${</span><span class=nx>dexBalance</span><span class=si>}</span><span class=sb> DTOKs`</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Get the balance of the signer and print it</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>signerBalance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>formatEther</span><span class=p>(</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>demoToken</span><span class=p>.</span><span class=nx>balanceOf</span><span class=p>(</span><span class=nx>signer</span><span class=p>)</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Account </span><span class=si>${</span><span class=nx>signerAddress</span><span class=si>}</span><span class=sb> has a balance of: </span><span class=si>${</span><span class=nx>signerBalance</span><span class=si>}</span><span class=sb> DTOKs`</span><span class=p>);</span>
<span class=p>}</span>

<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Create instance of SimpleDex.sol</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>simpleDex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractAt</span><span class=p>(</span><span class=s1>&#39;SimpleDex&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>simpleDexAddress</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Create instance of DemoToken.sol</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>demoTokenAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>simpleDex</span><span class=p>.</span><span class=nx>token</span><span class=p>();</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>demoToken</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractAt</span><span class=p>(</span><span class=s1>&#39;DemoToken&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>demoTokenAddress</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Create instance of Batch.sol</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>batchAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;0x0000000000000000000000000000000000000808&#39;</span><span class=p>;</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>batch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>getContractAt</span><span class=p>(</span><span class=s1>&#39;Batch&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>batchAddress</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Parse the value to swap to Wei</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>amountDtok</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>parseEther</span><span class=p>(</span><span class=s1>&#39;INSERT_AMOUNT_OF_DEV_TO_SWAP&#39;</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Get the encoded call data for the approval and swap</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>approvalCallData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>demoToken</span><span class=p>.</span><span class=kr>interface</span><span class=p>.</span><span class=nx>encodeFunctionData</span><span class=p>(</span><span class=s1>&#39;approve&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=nx>simpleDexAddress</span><span class=p>,</span>
<span class=w>    </span><span class=nx>amountDtok</span><span class=p>,</span>
<span class=w>  </span><span class=p>]);</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>swapCallData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>simpleDex</span><span class=p>.</span><span class=kr>interface</span><span class=p>.</span><span class=nx>encodeFunctionData</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;swapDemoTokenForDev&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>[</span><span class=nx>amountDtok</span><span class=p>]</span>
<span class=w>  </span><span class=p>);</span>

<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>batchAll</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>batch</span><span class=p>.</span><span class=nx>batchAll</span><span class=p>(</span>
<span class=w>    </span><span class=p>[</span><span class=nx>demoTokenAddress</span><span class=p>,</span><span class=w> </span><span class=nx>simpleDexAddress</span><span class=p>],</span><span class=w> </span><span class=c1>// to address</span>
<span class=w>    </span><span class=p>[],</span><span class=w> </span><span class=c1>// value of the native token to send</span>
<span class=w>    </span><span class=p>[</span><span class=nx>approvalCallData</span><span class=p>,</span><span class=w> </span><span class=nx>swapCallData</span><span class=p>],</span><span class=w> </span><span class=c1>// call data</span>
<span class=w>    </span><span class=p>[]</span><span class=w> </span><span class=c1>// gas limit</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>batchAll</span><span class=p>.</span><span class=nx>wait</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Approve and swap demo tokens for dev tokens: </span><span class=si>${</span><span class=nx>batchAll</span><span class=p>.</span><span class=nx>hash</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Check balances after the swap</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>checkBalances</span><span class=p>(</span><span class=nx>demoToken</span><span class=p>);</span>
<span class=p>}</span>
<span class=nx>main</span><span class=p>();</span>
</code></pre></div> </details> <p>To run the script, you can use the following command:</p> <div class=highlight><pre><span></span><code>npx<span class=w> </span>hardhat<span class=w> </span>run<span class=w> </span>--network<span class=w> </span>moonbase<span class=w> </span>scripts/swap.js
</code></pre></div> <p>In the terminal, you should see the following items:</p> <ul> <li>The transaction hash for the batch approval and swap</li> <li>The DEX's DTOK balance after the batch approval and swap</li> <li>Your account's DTOK balance after the batch approval and swap</li> </ul> <div id=termynal data-termynal> <span data-ty=input><span class=file-path></span>npx hardhat run --network moonbase scripts/swap.js</span> <span data-ty>Approve and swap demo tokens for dev tokens: 0x56cd9777f10e76b5b98a9ff57f7db44c5c847a615955202148e56aa6221168d6</span> <span data-ty>Dex 0x462830eC426E617D8DB8e3c36de34d85A7b60a2 has a balance of: 500.2 DTOKS</span> <span data-ty>Account Oxf24FF3a9CF04c71Dbc94D0b566f7A27B94566cac has a balance of: 499.8 DTOKs</span> <span data-ty=input><span class=file-path></span></span> </div> <p>And that's it! You've successfully used the batch precompile contract to batch an approval and swap into a single transaction, allowing for the approval amount to be the exact swap amount.</p> <h2 id=uniswap-v2-implementation>Uniswap V2 Implementation<a class=headerlink href=#uniswap-v2-implementation title="Permanent link">&para;</a></h2> <p>If we had a Uniswap V2-style DEX, the typical process for a swap would involve the router, which provides methods to safely swap assets, including the <code>swapExactTokensForETH</code> function. This function can be compared to the <code>swapDemoTokenForDev</code> function of the SimpleDex contract in the example above, where it swaps tokens in exchange for the native asset.</p> <p>Before using the <code>swapExactTokensForETH</code> function, we would first need to approve the router as the spender and specify the approved amount to spend. Then, we could use the swap function once the router has been authorized to move our assets.</p> <p>Like our previous example, this two-transaction process can be modified to batch the approval and the <code>swapExactTokensForETH</code> function into a single transaction using the batch precompile.</p> <p>This example will be based off the <a href=https://github.com/papermoonio/moonbeam-uniswap target=_blank>Uniswap V2 deployment on Moonbase Alpha</a>. We'll approve the router to spend ERTH tokens and then swap ERTH for DEV tokens. Before diving into this example, make sure you swap some DEV for ERTH tokens on the <a href=https://moonbeam-swap.netlify.app/#/swap target=_blank>Moonbeam-swap DApp</a>, so that you have some ERTH to approve and swap back to DEV.</p> <p>Again, we'll use the <code>batchAll</code> function of the batch precompile. So, we'll need to get the encoded call data for the approval and the swap. To get the encoded call data, we'll use Ether's <code>interface.encodeFunctionData</code> function and pass in the necessary parameters.</p> <p>For the <code>approve(spender, amount)</code> function, we'll need to pass in the Uniswap V2 router contract as the <code>spender</code>, as well as the amount of ERTH tokens approved to spend for the <code>amount</code>.</p> <p>For the <code>swapExactTokensForETH(amountIn, amountOutMin, path, to, deadline)</code> function, we'll need to specify the amount of tokens to send, the minimum amount of output tokens that must be received so the transaction won't revert, the token addresses for the swap, the recipient of the native asset, and the deadline after which the transaction will revert. To swap ERTH to DEV, the path will be ERTH to WETH, so the path array will need to include the ERTH token address and the WETH token address: <code>[0x08B40414525687731C23F430CEBb424b332b3d35, 0xD909178CC99d318e4D46e7E66a972955859670E1]</code>.</p> <p>In addition to the ERTH and WETH addresses, to create a contract instance of the router contract, you'll also need the <a href=https://github.com/papermoonio/moonbeam-uniswap/blob/f494f9a7a07bd3c5b94ac46484c9c7e6c781203f/uniswap-contracts-moonbeam/address.json#L14 target=_blank>router address</a>, which is <code>0x8a1932D6E26433F3037bd6c3A40C816222a6Ccd4</code>.</p> <p>The code will resemble the following:</p> <div class=highlight><pre><span></span><code><span class=c1>// Define contract addresses</span>
<span class=kd>const</span><span class=w> </span><span class=nx>erthTokenAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;0x08B40414525687731C23F430CEBb424b332b3d35&#39;</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>routerAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;0x8a1932D6E26433F3037bd6c3A40C816222a6Ccd4&#39;</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>wethTokenAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;0xD909178CC99d318e4D46e7E66a972955859670E1&#39;</span><span class=p>;</span>

<span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Create contract instances for the ERTH token, the Uniswap V2 router contract,</span>
<span class=w>  </span><span class=c1>// and the batch precompile</span>
<span class=w>  </span><span class=c1>// ...</span>

<span class=w>  </span><span class=c1>// Access the interface of the ERTH contract instance to get the encoded </span>
<span class=w>  </span><span class=c1>// call data for the approval</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>amountErth</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>ethers</span><span class=p>.</span><span class=nx>parseEther</span><span class=p>(</span><span class=s1>&#39;INSERT_AMOUNT_OF_ERTH_TO_SWAP&#39;</span><span class=p>);</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>approvalCallData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>earth</span><span class=p>.</span><span class=kr>interface</span><span class=p>.</span><span class=nx>encodeFunctionData</span><span class=p>(</span><span class=s1>&#39;approve&#39;</span><span class=p>,</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=nx>routerAddress</span><span class=p>,</span>
<span class=w>    </span><span class=nx>amountErth</span><span class=p>,</span>
<span class=w>  </span><span class=p>]);</span>

<span class=w>  </span><span class=c1>// Access the interface of the Uniswap V2 router contract instance to get</span>
<span class=w>  </span><span class=c1>// the encoded call data for the swap</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>swapCallData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>router</span><span class=p>.</span><span class=kr>interface</span><span class=p>.</span><span class=nx>encodeFunctionData</span><span class=p>(</span>
<span class=w>    </span><span class=s1>&#39;swapExactTokensForETH&#39;</span><span class=p>,</span>
<span class=w>    </span><span class=p>[</span>
<span class=w>      </span><span class=nx>amountErth</span><span class=p>,</span><span class=w> </span><span class=c1>// amountIn</span>
<span class=w>      </span><span class=s1>&#39;INSERT_AMOUNT_OUT_MIN&#39;</span><span class=p>,</span><span class=w> </span><span class=c1>// amountOutMin</span>
<span class=w>     </span><span class=p>[</span>
<span class=w>      </span><span class=nx>erthTokenAddress</span><span class=p>,</span><span class=w> </span><span class=c1>// ERTH token address</span>
<span class=w>      </span><span class=nx>wethTokenAddress</span><span class=w> </span><span class=c1>// WETH token address</span>
<span class=w>      </span><span class=p>],</span><span class=w> </span><span class=c1>// path </span>
<span class=w>     </span><span class=s1>&#39;INSERT_YOUR_ADDRESS&#39;</span><span class=p>,</span><span class=w> </span><span class=c1>// to</span>
<span class=w>     </span><span class=s1>&#39;INSERT_DEADLINE&#39;</span><span class=w> </span><span class=c1>// deadline</span>
<span class=w>    </span><span class=p>]</span>
<span class=w>  </span><span class=p>);</span>

<span class=w>  </span><span class=c1>// Assemble and send the batch transaction</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>batchAll</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>batch</span><span class=p>.</span><span class=nx>batchAll</span><span class=p>(</span>
<span class=w>    </span><span class=p>[</span><span class=nx>erthTokenAddress</span><span class=p>,</span><span class=w> </span><span class=nx>routerAddress</span><span class=p>],</span><span class=w> </span><span class=c1>// to address</span>
<span class=w>    </span><span class=p>[],</span><span class=w> </span><span class=c1>// value of the native token to send </span>
<span class=w>    </span><span class=p>[</span><span class=nx>approvalCallData</span><span class=p>,</span><span class=w> </span><span class=nx>swapCallData</span><span class=p>],</span><span class=w> </span><span class=c1>// call data</span>
<span class=w>    </span><span class=p>[]</span><span class=w> </span><span class=c1>// gas limit</span>
<span class=w>  </span><span class=p>);</span>
<span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>batchAll</span><span class=p>.</span><span class=nx>wait</span><span class=p>();</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Approve and swap ERTH tokens for DEV tokens: </span><span class=si>${</span><span class=nx>batchAll</span><span class=p>.</span><span class=nx>hash</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=p>}</span>
<span class=nx>main</span><span class=p>();</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you need the ABI to create a contract instance for any of the contracts in this example, all of the contracts are verified on <a href=https://moonbase.moonscan.io target=_blank>Moonscan</a>. So, you can search for the contract addresses on Moonscan and head to the <strong>Contract</strong> tab to get the <strong>Contract ABI</strong>.</p> </div> <p>This will result in the approval and swap being batched into a single transaction and the transaction hash will be printed to the console. You can now adapt and apply this logic to your Uniswap V2-style application!</p> <div class=page-disclaimer> This tutorial is for educational purposes only. As such, any contracts or code created in this tutorial should not be used in production. </div> <div class=page-disclaimer> The information presented herein has been provided by third parties and is made available solely for general information purposes. Moonbeam does not endorse any project listed and described on the Moonbeam Doc Website (https://docs.moonbeam.network/). Moonbeam Foundation does not warrant the accuracy, completeness or usefulness of this information. Any reliance you place on such information is strictly at your own risk. Moonbeam Foundation disclaims all liability and responsibility arising from any reliance placed on this information by you or by anyone who may be informed of any of its contents. All statements and/or opinions expressed in these materials are solely the responsibility of the person or entity providing those materials and do not necessarily represent the opinion of Moonbeam Foundation. The information should not be construed as professional or financial advice of any kind. Advice from a suitably qualified professional should always be sought in relation to any particular matter or circumstance. The information herein may link to or integrate with other websites operated or content provided by third parties, and such other websites may link to this website. Moonbeam Foundation has no control over any such other websites or their content and will have no liability arising out of or related to such websites or their content. The existence of any such link does not constitute an endorsement of such websites, the content of the websites, or the operators of the websites. These links are being provided to you only as a convenience and you release and hold Moonbeam Foundation harmless from any and all liability arising from your use of this information or the information provided by any third-party website or service. </div> <div class=md-source-file> <small> <span class=source-file-label>Last update:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 16, 2025 14:41:49">September 16, 2025</span> <br> <span class=source-file-seperator>|</span> <span class=source-file-label>Created:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 16, 2025 14:41:49">September 16, 2025</span> </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=../precompiles.index/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=122.883px height=122.882px viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space=preserve><g><path d="M61.441,0c16.967,0,32.327,6.877,43.446,17.996c11.119,11.119,17.996,26.479,17.996,43.445 c0,16.966-6.877,32.326-17.996,43.445c-11.119,11.118-26.479,17.995-43.446,17.995c-16.966,0-32.326-6.877-43.445-17.995 C6.877,93.768,0,78.407,0,61.441c0-16.967,6.877-32.327,17.996-43.445C29.115,6.877,44.475,0,61.441,0L61.441,0z M71.377,42.166 c1.736-1.784,1.695-4.637-0.088-6.372s-4.637-1.696-6.373,0.088L43.078,58.402l3.23,3.142l-3.244-3.146 c-1.737,1.792-1.693,4.652,0.099,6.39c0.052,0.05,0.104,0.099,0.158,0.146l21.595,22.082c1.736,1.784,4.59,1.823,6.373,0.088 c1.783-1.734,1.824-4.588,0.088-6.372L52.598,61.531L71.377,42.166L71.377,42.166z M98.496,24.386 C89.014,14.903,75.912,9.038,61.441,9.038s-27.572,5.865-37.055,15.348C14.903,33.869,9.038,46.97,9.038,61.441 c0,14.471,5.865,27.572,15.349,37.055c9.482,9.483,22.583,15.349,37.055,15.349s27.573-5.865,37.055-15.349 c9.484-9.482,15.35-22.584,15.35-37.055C113.846,46.97,107.98,33.869,98.496,24.386L98.496,24.386z"/></g></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <span class=md-footer__page-name> Precompiled Contracts Tutorials </span> </div> </a> <a href=../randomness-lottery/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <span class=md-footer__page-name> [Randomness] Create a Lottery </span> </div> <div class="md-footer__button md-icon"> <svg version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=122.883px height=122.882px viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space=preserve><g><path d="M61.441,0C44.475,0,29.115,6.877,17.996,17.996C6.877,29.115,0,44.475,0,61.441c0,16.966,6.877,32.326,17.996,43.445 c11.119,11.118,26.479,17.995,43.445,17.995c16.967,0,32.327-6.877,43.446-17.995c11.119-11.119,17.996-26.479,17.996-43.445 c0-16.967-6.877-32.327-17.996-43.445C93.768,6.877,78.408,0,61.441,0L61.441,0z M51.505,42.166 c-1.735-1.784-1.696-4.637,0.088-6.372c1.784-1.735,4.637-1.696,6.373,0.088l21.839,22.521l-3.23,3.142l3.244-3.146 c1.738,1.792,1.693,4.652-0.098,6.39c-0.053,0.05-0.105,0.099-0.158,0.146L57.966,87.017c-1.735,1.784-4.588,1.823-6.373,0.088 c-1.784-1.734-1.823-4.588-0.088-6.372l18.78-19.201L51.505,42.166L51.505,42.166z M24.386,24.386 C33.869,14.903,46.97,9.038,61.441,9.038c14.471,0,27.573,5.865,37.055,15.348c9.484,9.483,15.35,22.584,15.35,37.056 c0,14.471-5.865,27.572-15.35,37.055c-9.482,9.483-22.584,15.349-37.055,15.349c-14.471,0-27.572-5.865-37.055-15.349 C14.903,89.014,9.038,75.912,9.038,61.441C9.038,46.97,14.903,33.869,24.386,24.386L24.386,24.386z"/></g></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="column llms-wrapper"> <p class=llms-title> AI-Compatible Docs </p> <div class=llms-options> <a class=llms-link href=/llms.txt>llms.txt</a> <a class=llms-link href=/llms-full.txt>llms-full.txt</a> <a href=/ai-resources/ai-resources/ class=llms-link>LLMs By Topic</a> </div> </div> <div class="column social"> <div class=md-social> <a href=https://discord.com/invite/PfpUATX target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href=https://t.me/Moonbeam_Official target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg> </a> <a href=https://twitter.com/MoonbeamNetwork target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href=https://www.youtube.com/c/MoonbeamNetwork target=_blank rel=noopener title=YouTube class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href=https://github.com/moonbeam-foundation/moonbeam target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> <div class=md-footer-copyright> <div class=copyright-wrapper> <div class=md-footer-copyright__highlight> © 2025 Moonbeam Foundation. All Rights Reserved. </div> <div class=papermoon> <span> Made with 🩵 by <a href=https://papermoon.io/ target=_blank>PaperMoon</a> </span> </div> <div class=policy-links> <a href=https://moonbeam.network/terms-of-use target=_blank>Terms of use</a> <a href=https://moonbeam.network/privacy-policy target=_blank>Privacy policy</a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <form class="md-consent__form md-grid md-typeset"><div class=cookie-logo> <img src=../../..assets/images/Moonbeam_Icon_White.webp alt="Moonbeam logo for Cookie consent"> </div><div class=cookie-content> <h4>This website uses cookies</h4> <p>We use essential cookies to make the website work. We would also like to use cookies to understand how you use the website and how you interact with certain features. We may share this information with our analytics partners. For further details, please see our <a href=https://moonbeam.network/cookie-policy target=_blank rel=noopener>cookie policy</a>. </p><input class=md-toggle type=checkbox id=__settings><div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> </ul> </div> </div><div class="cookie-buttons md-consent__controls"> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> <button type=reset class="md-button md-button--secondary">Reject</button> </div> </form> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.prune", "content.code.copy", "announce.dismiss", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.56ea9cef.min.js></script> <script src=../../../js/connectMetaMask.min.js></script> <script src=../../../js/errorModal.min.js></script> <script src=../../../js/networkModal.min.js></script> <script src=../../../js/handleLanguageChange.min.js></script> <script src=../../../js/fixCreatedDate.min.js></script> <script src=../../../js/externalLinkModal.min.js></script> <script src=../../../js/cookbookInit.min.js></script> <script src=../../../js/clipboardCopyllms.min.js></script> <script src=../../../js/cookbookEventHandler.js></script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      const copyTxtFile = async (url) => {
        try {
            const response = await fetch(url);
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const text = await response.text();
            await navigator.clipboard.writeText(text);

            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.add('md-dialog--active');

              const copiedToClipboardMessage =
                copiedToClipboard.querySelector('.md-dialog__inner');
              if (
                copiedToClipboardMessage &&
                copiedToClipboardMessage.textContent !==
                  "Copied to clipboard"
              ) {
                copiedToClipboardMessage.textContent =
                  "Copied to clipboard";
              }
              // Set a timer to remove the after 2 seconds (2000ms)
              setTimeout(() => {
                copiedToClipboard.classList.remove('md-dialog--active');
              }, 2000);
            }
          } catch (err) {
            console.error('Failed to copy:', err);
            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.remove('md-dialog--active');
            }
          }
      }

      document.querySelectorAll('.llms').forEach(button => {
        button.addEventListener('click', (event) => {
          event.preventDefault(); // Prevent default link behavior

          const action = button.getAttribute('data-action');
          const fileName = button.getAttribute('data-value');
          if (!fileName) return; // Exit if no file name is found

          // Add 'llms-files/' prefix except for root-level llms.txt and llms-full.txt
          const filePath = (fileName === "llms.txt" || fileName === "llms-full.txt") 
            ? fileName 
            : `llms-files/${fileName}`;
          const url = `https://docs.moonbeam.network/${filePath}`;

          if (action === 'copy') {
            copyTxtFile(url);
          }
        })
      })
    });
  </script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>